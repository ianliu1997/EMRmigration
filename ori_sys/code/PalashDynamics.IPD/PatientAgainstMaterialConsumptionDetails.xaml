<UserControl x:Class="PalashDynamics.IPD.PatientAgainstMaterialConsumptionDetails"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"  
    xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"  
    xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit"
    xmlns:Converter="clr-namespace:PalashDynamics.Converters;assembly=PalashDynamics.Converters"
    xmlns:Localization="clr-namespace:PalashDynamic.Localization;assembly=PalashDynamic.Localization"
    xmlns:data="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"
    xmlns:my="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Toolkit"  
    xmlns:layoutToolkit="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Layout.Toolkit"
             Loaded="UserControl_Loaded">
    <!--xmlns:Converter="clr-namespace:PalashDynamics.Converters;assembly=PalashDynamics.Converters"-->

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/PalashDynamics;component/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <Converter:DateTimeConverter x:Key="DateConverter"></Converter:DateTimeConverter>
            <Converter:ToggleBooleanValueConverter x:Key="VisiblilityConverter"/>
            <Localization:Localized x:Key="locResource"></Localization:Localized>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid x:Name="WindowLayoutRoot" Margin="2" Background="White" >
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"></RowDefinition>
            <RowDefinition></RowDefinition>
            <RowDefinition Height="auto"></RowDefinition>
        </Grid.RowDefinitions>
        <Grid x:Name="LayoutRoot1" Background="White" Grid.Row="0">
            <toolkit:DockPanel LastChildFill="True" toolkit:DockPanel.Dock="Left">
                <toolkit:DockPanel LastChildFill="True" toolkit:DockPanel.Dock="Left" VerticalAlignment="Top" >
                    <toolkit:DockPanel>

                        <Border x:Name="imgPhoto1" BorderBrush="{StaticResource TabControlDarkerBorder}"    BorderThickness="2" CornerRadius="3,3,0,0" Margin="4" Background="Transparent">
                            <Image   Height="250" Width="250" MaxHeight="60" MaxWidth="100" Stretch="Fill" Margin="2" x:Name="imgPhoto"></Image>
                        </Border>
                    </toolkit:DockPanel>
                    <toolkit:DockPanel >
                    </toolkit:DockPanel>
                </toolkit:DockPanel>
                <toolkit:DockPanel LastChildFill="True">
                    <Grid x:Name="Patient" >
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="28"/>
                            <RowDefinition Height="Auto"/>




                        </Grid.RowDefinitions>

                        <TextBlock VerticalAlignment="Center" FontWeight="Bold" TextAlignment="Right" Grid.Row="0" Grid.Column="0" Text="{Binding lblPatientName,StringFormat='\{0\} : ', Source={StaticResource locResource}}"  Margin="4"></TextBlock>
                        <TextBlock  VerticalAlignment="Center" Grid.Row="0" Grid.Column="1" x:Name="txtFirstName" Text="{Binding PatientName, Mode=TwoWay}" Margin="4"></TextBlock>

                        <TextBlock VerticalAlignment="Center" FontWeight="Bold" TextAlignment="Right"   Grid.Row="0" Grid.Column="2" Text="{Binding lblDOB, Source={StaticResource locResource},StringFormat='\{0\} : '}"  Margin="4"></TextBlock>
                        <TextBlock  VerticalAlignment="Center" Grid.Row="0" Grid.Column="3" x:Name="txtDOB"  Text="{Binding BirthDate,Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}" Margin="4"></TextBlock>

                        <TextBlock VerticalAlignment="Center" FontWeight="Bold" TextAlignment="Right"   Grid.Row="0" Grid.Column="6" Text="{Binding lblMRNo, StringFormat='\{0\} :', Source={StaticResource locResource}}"  Margin="4"></TextBlock>
                        <TextBlock  VerticalAlignment="Center" Grid.Row="0" Grid.Column="7" x:Name="txtMRNo" Text="{Binding MRNo}" Margin="4"></TextBlock>

                        <TextBlock  VerticalAlignment="Center" TextAlignment="Right" Text="{Binding lblGender, StringFormat='\{0\} : ', Source={StaticResource locResource}}" Margin="4" Grid.Row="1" Grid.Column="4" FontWeight="Bold" ></TextBlock>
                        <TextBlock  VerticalAlignment="Center" Grid.Row="1" Grid.Column="5" x:Name="txtGender" Text="{Binding Gender}" Margin="4"></TextBlock>

                        <TextBlock VerticalAlignment="Center" FontWeight="Bold" TextAlignment="Right" Grid.Row="1" Grid.Column="2" Text="{Binding lblEducation, StringFormat='\{0\} : ', Source={StaticResource locResource}}"  Margin="4"></TextBlock>
                        <TextBlock  VerticalAlignment="Center" Grid.Row="1" Grid.Column="3" x:Name="txtEducation" Text="{Binding Education}" Margin="4"></TextBlock>

                        <TextBlock VerticalAlignment="Center"  TextAlignment="Right" Text="{Binding lblAge, StringFormat='\{0\} : ', Source={StaticResource locResource}}" Grid.Column="4" FontWeight="Bold" Margin="4"></TextBlock>
                        <TextBlock  VerticalAlignment="Center" Grid.Column="5" x:Name="txtAge" Text="{Binding AgeInYearMonthDays}" Margin="4"></TextBlock>

                        <TextBlock  VerticalAlignment="Center" TextAlignment="Right" Text="{Binding lblMaritalStatus, StringFormat='\{0\} : ', Source={StaticResource locResource}}" Margin="4" Grid.Row="1" Grid.Column="0" FontWeight="Bold" ></TextBlock>
                        <TextBlock  VerticalAlignment="Center" Grid.Row="1" Grid.Column="1" x:Name="txtMaritalStatus" Text="{Binding MaritalStatus}" Margin="4"></TextBlock>

                        <TextBlock  VerticalAlignment="Center" TextAlignment="Right" Text="{Binding lblMobileColon,StringFormat='\{0\} : ' ,Source={StaticResource locResource}}" Margin="4,4,-1,4" Grid.Row="1" Grid.Column="6" FontWeight="Bold" ></TextBlock>
                        <TextBlock  VerticalAlignment="Center" Grid.Row="1" Grid.Column="7" x:Name="txtContactNO1" Text="{Binding MOB}" Margin="4"></TextBlock>
                        <TextBlock VerticalAlignment="Center" FontWeight="Bold" TextAlignment="Right" Grid.Row="2" Grid.Column="2" Text="{Binding lblReligion, StringFormat='\{0\} : ', Source={StaticResource locResource}}"  Margin="4"></TextBlock>
                        <TextBlock  VerticalAlignment="Center" Grid.Row="2" Grid.Column="3" x:Name="txtReligion" Text="{Binding Religion}" Margin="4"></TextBlock>

                    </Grid>
                </toolkit:DockPanel>
            </toolkit:DockPanel>
        </Grid>
        <Grid x:Name="LayoutRoot2" Grid.Row="1">
            <my:DockPanel LastChildFill="True" Margin="4">
                <Grid Width="Auto"  Margin="0" my:DockPanel.Dock="Top" DataContext="{Binding BizActionObject}">
                    <Grid Margin="2" HorizontalAlignment="Stretch">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="auto" ></RowDefinition>
                            <RowDefinition Height="auto" ></RowDefinition>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="auto"></ColumnDefinition>
                            <ColumnDefinition></ColumnDefinition>
                            <ColumnDefinition Width="auto"></ColumnDefinition>
                            <ColumnDefinition></ColumnDefinition>
                            <ColumnDefinition Width="auto"></ColumnDefinition>
                            <ColumnDefinition></ColumnDefinition>
                            <ColumnDefinition Width="auto"></ColumnDefinition>
                            <ColumnDefinition></ColumnDefinition>
                            <ColumnDefinition Width="auto"></ColumnDefinition>
                            <ColumnDefinition></ColumnDefinition>
                            <ColumnDefinition Width="auto"></ColumnDefinition>
                            <ColumnDefinition></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                    </Grid>
                </Grid >
                <Grid Height="Auto" Width="Auto" my:DockPanel.Dock="Bottom">
                    <my:DockPanel LastChildFill="True">
                        <!--<data:DataPager x:Name="dpdgMaterailConsumptionList" toolkit:DockPanel.Dock="Bottom" 
                                                        DisplayMode="FirstLastPreviousNext"  IsEnabled="True"                       
                                                        Source="{Binding}" 
                                                        AutoEllipsis="False" IsTotalItemCountFixed="False" Margin="4,0,4,0"  />-->
                        <data:DataPager  x:Name="dpdgMaterailConsumptionList" toolkit:DockPanel.Dock="Bottom"
                        Grid.Row="1"
                        PageSize="{Binding PageSize}"
                        DisplayMode="FirstLastPreviousNext"
                        IsEnabled="True"
                        IsTotalItemCountFixed="False"
                        Source="{Binding ConsumptionDataList}"  />
                        
                        <data:DataGrid Height="Auto" Width="Auto" Grid.Row="0" x:Name="dgMaterailConsumptionList" AutoGenerateColumns="False" ItemsSource="{Binding ConsumptionDataList}" CanUserSortColumns="True" >
                            
                            <data:DataGrid.Columns>
                                <data:DataGridTextColumn Visibility="Visible" IsReadOnly="True"  Header="Consumption Date"  Binding="{Binding Date,Converter={StaticResource DateConverter},ConverterParameter='dd/MMM/yyyy hh:mm:ss'}"></data:DataGridTextColumn>
                                <data:DataGridTextColumn Visibility="Visible"  IsReadOnly="True" Header="Store"  Binding="{Binding StoreName}"></data:DataGridTextColumn>
                                <data:DataGridTextColumn Visibility="Visible"  IsReadOnly="True" Header="Package Name"  Binding="{Binding PackageName}"></data:DataGridTextColumn>
                                <data:DataGridTextColumn Visibility="Visible" IsReadOnly="True"  Header="Item Name"  Binding="{Binding ItemName}"></data:DataGridTextColumn>
                                <data:DataGridTextColumn IsReadOnly="True"  Header="Batch Code"  Binding="{Binding BatchCode}"></data:DataGridTextColumn>
                                <data:DataGridTextColumn IsReadOnly="True" Header="Expiry Date"  Binding="{Binding ExpiryDate,Converter={StaticResource DateConverter},ConverterParameter={StaticResource ExpiryDateDisplayFormat}}"></data:DataGridTextColumn>

                                <data:DataGridTemplateColumn Header="Used Quantity" IsReadOnly="True">
                                    <data:DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock  VerticalAlignment="Center" Text="{Binding UsedQty,StringFormat=0.00}" TextAlignment="Right"  ></TextBlock>
                                        </DataTemplate>
                                    </data:DataGridTemplateColumn.CellTemplate>
                                </data:DataGridTemplateColumn>
                                <data:DataGridTextColumn IsReadOnly="True"  Header="UOM"  Binding="{Binding TransactionUOM,Mode=TwoWay}"></data:DataGridTextColumn>
                                <data:DataGridTextColumn  IsReadOnly="True" Header="Cost Price" Visibility="Collapsed" Binding="{Binding Rate,StringFormat=0.00}">
                                    <data:DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="TextAlignment" Value="Right"/>
                                        </Style>
                                    </data:DataGridTextColumn.ElementStyle>
                                </data:DataGridTextColumn>
                                <data:DataGridTextColumn  IsReadOnly="True" Header="MRP"  Binding="{Binding MRP,StringFormat=0.00}">
                                    <data:DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="TextAlignment" Value="Right"/>
                                        </Style>
                                    </data:DataGridTextColumn.ElementStyle>
                                </data:DataGridTextColumn>
                            </data:DataGrid.Columns>
                            
                        </data:DataGrid>
                    </my:DockPanel>
                </Grid>
            </my:DockPanel>
        </Grid>
        <Grid x:Name="LayoutRoot3" Grid.Row="2" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
                <ColumnDefinition Width="150"></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" Grid.Row="1" Text="Total Consumption AMT Till Date"  Margin="4" HorizontalAlignment="Right" VerticalAlignment="Center"></TextBlock>
            <TextBox Grid.Column="1"  Grid.Row="1" x:Name="txtTotalAmount"  Margin="4"  MaxLength="50" IsEnabled="False" ></TextBox>

            <toolkit:DockPanel toolkit:DockPanel.Dock="Bottom" HorizontalAlignment="Right"  Grid.Column="3">
                <StackPanel Grid.Column="3" Margin="4" Grid.Row="1" Grid.ColumnSpan="2" Orientation="Horizontal">
                    <toolkit:DockPanel toolkit:DockPanel.Dock="Bottom" HorizontalAlignment="Right">
                        <ToggleButton Grid.Column="3" Grid.Row="1" Background="#000000" Margin="5"  Style="{StaticResource ToggleButtonStyle}" Visibility="Visible"  Content="Print Package Consumption"   x:Name="cmdPackage" Click="cmdPrintPackage_Click" Width="200" ></ToggleButton>
                        <ToggleButton Grid.Column="3" Grid.Row="1" Background="#000000" Margin="5"  Style="{StaticResource ToggleButtonStyle}" Visibility="Visible"  Content="New"   x:Name="cmdNew" Click="cmdNew_Click" ></ToggleButton>
                        <ToggleButton Grid.Column="4" Grid.Row="1" Background="#000000"  Margin="5"  Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" Content="Print"   x:Name="cmdPrint" Click="cmdPrint_Click" ></ToggleButton>
                        <ToggleButton Grid.Column="5" Grid.Row="1" Background="#000000" Margin="5"  Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" Content="Close"   x:Name="cmdCloseM" Click="cmdCloseM_Click" ></ToggleButton>
                    </toolkit:DockPanel>
                </StackPanel>
            </toolkit:DockPanel>
        </Grid>

    </Grid>
</UserControl>

