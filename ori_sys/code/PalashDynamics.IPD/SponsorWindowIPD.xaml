<UserControl x:Class="PalashDynamics.IPD.SponsorWindowIPD"
           xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit"  xmlns:data="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"  xmlns:controlsToolkit="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Toolkit"  
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
           xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"
           xmlns:CustomCombo="clr-namespace:PalashDynamics.Controls;assembly=PalashDynamics.Controls.AutoCompleteComboBox"
           xmlns:Converter="clr-namespace:PalashDynamics.Converters;assembly=PalashDynamics.Converters"
           xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
           Width="auto" Height="auto"    Loaded="ChildWindow_Loaded" Background="White" BorderBrush="White" >
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/PalashDynamics;component/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <Converter:DateTimeConverter x:Key="DateConverter"></Converter:DateTimeConverter>
        </ResourceDictionary>

    </UserControl.Resources>
    <Grid x:Name="LayoutRoot" Background="White" Margin="0">

        <toolkit:DockPanel LastChildFill="True" >
            <toolkit:DockPanel toolkit:DockPanel.Dock="Top">
                <Border  Grid.Row="0" x:Name="mainFormBorder" Margin="4"  BorderBrush="{StaticResource TabControlDarkerBorder}" BorderThickness="1" CornerRadius="0,0,3,3" Background="Transparent" >
                    <Grid Grid.Row="0" Background="White"  Margin="10">
                        <Grid DataContext="{Binding}" x:Name="pnlAddSponser">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition/>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>

                                <TextBlock   VerticalAlignment="Center" HorizontalAlignment="Right" Grid.Row="0" Margin="4,10,4,4" Text="Patient Category" />
                                <CustomCombo:AutoCompleteComboBox  Grid.Row="0" Grid.Column="1"   x:Name="cmbPatientSource"  Margin="4,10,4,4"  VerticalAlignment="Center" SelectedItemBinding="{Binding clsPatientSourceVO, Mode=OneWay}" SelectedValuePath="ID" SelectionChanged="cmbPatientSource_SelectionChanged"/>

                                <TextBlock   VerticalAlignment="Center" HorizontalAlignment="Right" Grid.Row="0" Grid.Column="2" Margin="4,10,4,4" Text="Patient Source" />
                                <CustomCombo:AutoCompleteComboBox  Grid.Row="0" Grid.Column="3"   x:Name="cmbPatientCategory"  Margin="4,10,4,4"  VerticalAlignment="Center" SelectedItemBinding="{Binding clsPatientSourceVO, Mode=OneWay}" SelectedValuePath="ID" SelectionChanged="cmbPatientCategory_SelectionChanged"/>

                                <TextBlock Text="Member Relation" Grid.Row="0" Grid.Column="4"   Margin="4,10,4,4" VerticalAlignment="Center"></TextBlock>
                                <CustomCombo:AutoCompleteComboBox x:Name="cmbPackageRelations" IsEnabled="True" Grid.Row="0" Grid.Column="5" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID"  Margin="4,10,4,4"  VerticalAlignment="Center" HorizontalAlignment="Stretch" />

                                <TextBlock   VerticalAlignment="Center" HorizontalAlignment="Right" Grid.Row="1" Margin="4" Text="Company" />
                                <CustomCombo:AutoCompleteComboBox  Grid.Row="1" Grid.Column="1"   x:Name="cmbCompany"  Margin="3,2,3,2"  VerticalAlignment="Center" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID" SelectionChanged="cmbCompany_SelectionChanged"/>
                                
                                <TextBlock   VerticalAlignment="Center" HorizontalAlignment="Right" Grid.Row="1" Grid.Column="2" Margin="4" Text="Associated Company" />
                                <CustomCombo:AutoCompleteComboBox  Grid.Row="1" Grid.Column="3"  x:Name="cmbAssCompany"  Margin="3,2,3,2"  VerticalAlignment="Center" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID"  />
                                
                                <TextBlock   VerticalAlignment="Center" HorizontalAlignment="Right" Grid.Row="1" Grid.Column="4" Margin="4" Width="95" TextAlignment="Right"  Text="Reference No"  />
                                <TextBox x:Name="txtRefNo" Text="{Binding ReferenceNo,Mode=TwoWay}"  Grid.Column="5"  Grid.Row="1"   Margin="4" MaxLength="20" />

                                <TextBlock   VerticalAlignment="Center" HorizontalAlignment="Right" Grid.Row="2"  Grid.Column="0" Margin="4" Text="Credit Limit" />
                                <TextBox Text="{Binding CreditLimit,Mode=TwoWay}" x:Name="txtCreditLimit" TextAlignment="Right" Grid.Row="2" Grid.Column="1" Margin="4" TextChanged="txtNumber_TextChanged" KeyDown="txtNumber_KeyDown"/>

                                <TextBlock   VerticalAlignment="Center" HorizontalAlignment="Right" Grid.Row="2" Grid.Column="2" Margin="4" Text="Effective Date"  />
                                <controls:DatePicker SelectedDate="{Binding EffectiveDate,Mode=TwoWay}" x:Name="dtpEffectiveDate" Grid.Row="2" Grid.Column="3" Margin="4" />
                                
                                <TextBlock   VerticalAlignment="Center" HorizontalAlignment="Right" Grid.Row="2" Grid.Column="4" Margin="4" Text="Expiry Date"  />
                                <controls:DatePicker SelectedDate="{Binding ExpiryDate,Mode=TwoWay}" x:Name="ExpiryDate" Grid.Row="2" Grid.Column="5"  Margin="4"  />

                                <TextBlock   VerticalAlignment="Center" HorizontalAlignment="Right" Grid.Row="4" Grid.Column="0" Margin="4" Text="Tariff" />
                                <CustomCombo:AutoCompleteComboBox SelectedValue="{Binding TariffId,Mode=TwoWay}"  Grid.Row="4" Grid.Column="1" x:Name="cmbTariff" Margin="3,2,3,2"  VerticalAlignment="Center" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID"/>

                                <TextBlock   VerticalAlignment="Center" HorizontalAlignment="Right" Grid.Row="4" Grid.Column="2" Margin="4" TextAlignment="Right"  Text="Staff No"  />
                                <TextBox Text="{Binding EmployeeNo, Mode=TwoWay}" x:Name="txtEmployeeNo" Grid.Column="3"  Grid.Row="4"   Margin="4" MaxLength="50"/>
                                
                                <TextBlock   VerticalAlignment="Center" HorizontalAlignment="Right" Grid.Row="4" Grid.Column="4" Margin="4" Text="Designation" />
                                <CustomCombo:AutoCompleteComboBox  Grid.Row="4" Grid.Column="5"   x:Name="cmbDesignation"  Margin="3,2,3,2"  VerticalAlignment="Center" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID"/>

                                <TextBlock VerticalAlignment="Center" HorizontalAlignment="Right" Text="Total Advance" Margin="4" Grid.Row="5" Grid.Column="0"></TextBlock>
                                <TextBox   x:Name="txtTotal" Margin="3,2,3,2" Grid.Row="5" Grid.Column="1"  IsReadOnly="True"  TextAlignment="Right" ></TextBox>
                                
                                <TextBlock VerticalAlignment="Center" HorizontalAlignment="Right" Text="Used" Margin="4" Grid.Row="5" Grid.Column="2"></TextBlock>
                                <TextBox Text="{Binding UsedAmount, Mode=TwoWay}" x:Name="txtUsed"  Margin="3,2,3,2" Grid.Row="5" Grid.Column="3"  IsReadOnly="True" TextAlignment="Right" ></TextBox>

                                <TextBlock VerticalAlignment="Center" HorizontalAlignment="Right" Text="Balance" Margin="4" Grid.Row="5" Grid.Column="4"></TextBlock>
                                <TextBox Text="{Binding UsedAmount, Mode=TwoWay}" x:Name="txBalance"  Margin="3,2,3,2" Grid.Row="5" Grid.Column="5"  IsReadOnly="True" TextAlignment="Right"  ></TextBox>

                                <TextBlock   VerticalAlignment="Center" HorizontalAlignment="Right" Grid.Row="6"  Grid.Column="0" Margin="4,10,4,4" Text="Remark" />
                                <TextBox   Grid.Row="6" VerticalScrollBarVisibility="Visible" HorizontalAlignment="Stretch" TextWrapping="Wrap" Text="{Binding Remark, Mode=TwoWay}" Height="40" Width="1250" x:Name="txtSponserRemark"  AcceptsReturn="True" Grid.Column="1" Grid.ColumnSpan="5" Margin="4,10,4,4" MaxLength="255"/>
                            </Grid>
                            <!--</controls:TabItem>-->
                        </Grid>
                    </Grid>
                </Border>
            </toolkit:DockPanel>
            <toolkit:DockPanel toolkit:DockPanel.Dock="Bottom">
                <StackPanel Grid.Row="2" x:Name="Footer" Orientation="Horizontal" VerticalAlignment="Center"   Margin="0,3,5,3" HorizontalAlignment="Right" Background="Transparent">
                    <StackPanel x:Name="SaveCommandPanel" Orientation="Horizontal"  Margin="0,0,0,0">
                        <ToggleButton x:Name="OkButton"  Grid.Row="4" Content="Save" MinWidth="50"  Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" Click="OKButton_Click" />
                        <ToggleButton x:Name="CancelButton"  Grid.Row="4" Content="Close" MinWidth="50" Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" Click="CancelButton_Click"  />
                    </StackPanel>
                </StackPanel>
            </toolkit:DockPanel>
            <toolkit:DockPanel toolkit:DockPanel.Dock="Top">
                <Border Grid.Row="1" Margin="2"  BorderBrush="{StaticResource TabControlDarkerBorder}" BorderThickness="1" CornerRadius="0,0,3,3" Background="Transparent" VerticalAlignment="Stretch">
                    <data:DataGrid  x:Name="dgSponserList" Margin="4" ItemsSource="{Binding}" VerticalScrollBarVisibility="Visible" AutoGenerateColumns="False" VerticalAlignment="Stretch" IsEnabled="False" CanUserSortColumns="False" >
                        <data:DataGrid.Columns>
                            <data:DataGridTemplateColumn>
                                <data:DataGridTemplateColumn.CellTemplate>

                                    <DataTemplate>
                                        <HyperlinkButton VerticalAlignment="Center" ToolTipService.ToolTip= "Delete" FontFamily="Webdings" Content="r"  Padding="5,0,5,0" IsTabStop="False" Click="hlbDeleteSponsor_Click"  x:Name="hlbDeleteSponsor"></HyperlinkButton>
                                    </DataTemplate>
                                </data:DataGridTemplateColumn.CellTemplate>

                            </data:DataGridTemplateColumn>
                            <data:DataGridTemplateColumn>
                                <data:DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <!--<HyperlinkButton VerticalAlignment="Center" FontFamily="Webdings" Content="Â¤"  Padding="5,0,5,0" IsTabStop="False" Click="hlbEditSponsor_Click"  x:Name="hlbEditSponsor"></HyperlinkButton>-->
                                        <!--<Image Height="16" Stretch="Fill" Name="SponcerEdit"  Source="/PalashDynamics;component/Icons/edit_new.png" MouseLeftButtonDown="Image_MouseLeftButtonDown" />-->
                                        <HyperlinkButton Background="White"  VerticalAlignment="Center" Padding="5,0,5,0" IsTabStop="False" Click="hlbEditSponsor_Click"   x:Name="hlbEditSponsor">
                                            <Image  Height="16" Stretch="Fill" Source="/PalashDynamics;component/Icons/edit_new.png" />
                                        </HyperlinkButton>
                                    </DataTemplate>
                                </data:DataGridTemplateColumn.CellTemplate>

                            </data:DataGridTemplateColumn>
                            <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding PatientSource}" Header="Patient Source" />
                            <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding ComapnyName}" Header="Company Name" />
                            <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding AssociateComapnyName}" Header="Asso. Company Name" />
                            <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding ReferenceNo}" Header="Ref No" />
                            <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding CreditLimit,StringFormat=0.00}" Header="Credit Limit">
                                <data:DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="TextAlignment" Value="Right"/>
                                    </Style>
                                </data:DataGridTextColumn.ElementStyle>
                            </data:DataGridTextColumn>
                            <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding EffectiveDate, Mode=OneWay,Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}" Header="Effective Date" />
                            <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding ExpiryDate, Mode=OneWay, Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}" Header="Expiry Date" />
                            <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding TariffName}" Header="Tariff  Name" />
                            <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding EmployeeNo}" Header="Staff No" />
                            <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding Designation}" Header="Designation" />
                            <!--<data:DataGridTextColumn IsReadOnly="True"  Binding="{Binding Limit}" Header="Limit"></data:DataGridTextColumn>-->
                            <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding Used,StringFormat=0.00}" Header="Used">
                                <data:DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="TextAlignment" Value="Right"/>
                                    </Style>
                                </data:DataGridTextColumn.ElementStyle>
                            </data:DataGridTextColumn>
                            <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding Balance,StringFormat=0.00}" Header="Balance">
                                <data:DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="TextAlignment" Value="Right"/>
                                    </Style>
                                </data:DataGridTextColumn.ElementStyle>
                            </data:DataGridTextColumn>
                            <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding Remark}" Header="Remark" />

                            <!--<data:DataGridTextColumn Binding="{Binding Images}" Header="Images" />-->
                            <!--<data:DataGridCheckBoxColumn Binding="{Binding Status}" Header="Status" Width="70" />-->
                        </data:DataGrid.Columns>
                    </data:DataGrid>
                </Border>
            </toolkit:DockPanel>
        </toolkit:DockPanel>
    </Grid>
</UserControl>