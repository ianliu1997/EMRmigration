<UserControl x:Class="PalashDynamics.IPD.Forms.frmBedUnreservation"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:GroupBox="clr-namespace:Groupbox;assembly=Groupbox"  
              xmlns:Grp="clr-namespace:Groupbox;assembly=Groupbox"
              xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"
             xmlns:controlsToolkit="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Toolkit"
             xmlns:data="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"
             xmlns:Converter="clr-namespace:PalashDynamics.Converters;assembly=PalashDynamics.Converters" 
            

             xmlns:inputcombo="clr-namespace:PalashDynamics.Controls;assembly=PalashDynamics.Controls.AutoCompleteComboBox" Loaded="UserControl_Loaded" Width="Auto" Height="Auto">


    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/PalashDynamics;component/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
          
            <Converter:DateTimeToAgePart x:Key="DateTimeToAgePart"></Converter:DateTimeToAgePart>
            <Converter:DateTimeConverter x:Key="DateConverter"></Converter:DateTimeConverter>
            <Converter:ToggleBooleanValueConverter x:Key="NegateValueConverter"/>
            <Converter:VisiblilityConverter x:Key="VisiblilityConverter"/>
            <ControlTemplate x:Key="FilledContentControlTemplate" TargetType="ContentControl" >
                <Grid>
                    <ContentPresenter />
                </Grid>
            </ControlTemplate>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot1" Background="White">

        <Border BorderBrush="{StaticResource TabControlDarkerBorder}" Margin="4" BorderThickness="2" CornerRadius="3,3,3,3" Background="Transparent">
            <controlsToolkit:DockPanel>

                <controlsToolkit:DockPanel LastChildFill="True" controlsToolkit:DockPanel.Dock="Bottom" Margin="4">

                    <StackPanel Grid.Row="1" x:Name="Footer" Orientation="Horizontal" VerticalAlignment="Center"   Margin="0,3,5,3" HorizontalAlignment="Right" Background="Transparent">
                        <StackPanel x:Name="SaveCommandPanel" Orientation="Horizontal"  Margin="0">
                            <ToggleButton x:Name="cmdUnReserve"  Grid.Row="4" Content="UnReserve" MinWidth="50"  Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Click="cmdUnReserve_Click" Checked="cmdUnReserve_Checked" />
                            <ToggleButton x:Name="cmdCancel"  Grid.Row="4" Content="Cancel" MinWidth="50" Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}"  Click="cmdCancel_Click"  />
                        </StackPanel>
                    </StackPanel>

                </controlsToolkit:DockPanel>

                <Border Margin="4" controlsToolkit:DockPanel.Dock="Top" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" BorderBrush="{StaticResource TabControlDarkerBorder}"  BorderThickness="1" CornerRadius="3,3,0,0" Background="Transparent">
                    <controlsToolkit:DockPanel LastChildFill="True" Margin="4">

                        <Grid controlsToolkit:DockPanel.Dock="Bottom">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                <ColumnDefinition ></ColumnDefinition>
                            </Grid.ColumnDefinitions>

                        </Grid>

                        <Grid controlsToolkit:DockPanel.Dock="Top" >
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grp:GroupBox Grid.Row="0" IsTabStop="False" x:Name="grpPatientInfo" Header="Patient Details" Height="Auto" Margin="0" >

                                <Grid controlsToolkit:DockPanel.Dock="Top" HorizontalAlignment="Stretch" >
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <!--<Grp:GroupBox Grid.Row="0" IsTabStop="False" x:Name="grpPatientInfo" Header="" Height="Auto" Margin="4" >-->
                                        <Grid x:Name="grdPatientInfo" Background="White"  Visibility="Visible" >
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"></RowDefinition>
                                                <RowDefinition Height="Auto"></RowDefinition>
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                            </Grid.ColumnDefinitions>

                                            <TextBlock VerticalAlignment="Center"  HorizontalAlignment="Right" Text="MR No:" Grid.Column="0" Margin="4" ></TextBlock>
                                            <TextBox x:Name="txtMRNo" Margin="4" Grid.Column="1" Grid.Row="0" MinWidth="200" Width="300" KeyUp="txtMRNumber_KeyUp" LostFocus="txtMRNo_LostFocus"></TextBox>


                                            <StackPanel Grid.Column="2" Grid.Row="0" Grid.ColumnSpan="2" Orientation="Horizontal">
                                                <Button  HorizontalAlignment="Left"   x:Name="CmdPatientSearch" Margin="4"  Click="btnPatientSearch"  >
                                                    <Button.Content>
                                                        <Image Height="18" Source="/PalashDynamics;component/Icons/xmag.png" ></Image>
                                                    </Button.Content>
                                                </Button>
                                                <Button VerticalAlignment="Center"  x:Name="cmbPatientSearch" Margin="4"  Click="cmbPatientSearch_Click">
                                                    <Button.Content>
                                                        <Image Height="18" Source="/PalashDynamics;component/Icons/previous_patient_search.jpg"></Image>
                                                    </Button.Content>
                                                </Button>

                                            </StackPanel>


                                            <TextBlock VerticalAlignment="Center" x:Name="lblName" HorizontalAlignment="Right" Text="Patient Name:" Grid.Row="1" Grid.Column="0" Margin="4" Visibility="Collapsed"></TextBlock>
                                        <TextBox VerticalAlignment="Center" x:Name="lblPatientName" HorizontalAlignment="Right" Grid.Row="1" Width="300" Grid.Column="1" Margin="4" Visibility="Collapsed"  IsReadOnly="True"></TextBox> <!--IsEnabled="False"-->

                                        <TextBlock VerticalAlignment="Center" x:Name="lblgender" HorizontalAlignment="Right" Text="Gender:" Grid.Row="1" Grid.Column="2" Margin="4" Visibility="Collapsed"></TextBlock>
                                        <TextBox VerticalAlignment="Center" x:Name="lblPatientgender" HorizontalAlignment="Right" Grid.Row="1" Grid.Column="3" Margin="2" Visibility="Collapsed" IsReadOnly="True"></TextBox>   <!--IsEnabled="False"-->

                                        <TextBlock VerticalAlignment="Center" x:Name="lblregdate" HorizontalAlignment="Right" Text="Registration Date:" Grid.Row="1" Grid.Column="4" Margin="4" Visibility="Collapsed"></TextBlock>
                                        <TextBox VerticalAlignment="Center" x:Name="lblPatientregdate" HorizontalAlignment="Right" Grid.Row="1" Grid.Column="5" Margin="2" Visibility="Collapsed" IsReadOnly="True"></TextBox>   <!--IsEnabled="False"-->



                                    </Grid>
                                    <!--</Grp:GroupBox>-->
                                </Grid>

                            </Grp:GroupBox>
                        </Grid>

                        <controlsToolkit:DockPanel  HorizontalAlignment="Stretch" LastChildFill="True">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"></RowDefinition>
                                    <RowDefinition Height="*"></RowDefinition>
                                </Grid.RowDefinitions>

                                <Grid Grid.Row="0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                                        <ColumnDefinition ></ColumnDefinition>
                                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                                        <ColumnDefinition ></ColumnDefinition>
                                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="From Date" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" Margin="4" HorizontalAlignment="Right"></TextBlock>
                                    <controls:DatePicker x:Name="dtpFromDate" SelectedDate="{Binding}"  Grid.Row="0" Grid.Column="1" Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Center" ></controls:DatePicker>
                                    <TextBlock Text="To Date" Grid.Row="0" Grid.Column="2" VerticalAlignment="Center" Margin="4" HorizontalAlignment="Right"></TextBlock>
                                    <controls:DatePicker x:Name="dtpToDate" Grid.Row="0" SelectedDate="{Binding}" Grid.Column="3" Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Center" ></controls:DatePicker>
                                    <Button  HorizontalAlignment="Left" Grid.Row="0" Grid.Column="4"  x:Name="CmdShow" Margin="4"  Click="cmdShow_Click">
                                        <Button.Content>
                                            <Image Source="/PalashDynamics;component/Icons/Search_b.JPG" Margin="4,0,4,0" Width="20" ></Image>
                                        </Button.Content>
                                    </Button>
                                </Grid>

                                <Border  Grid.Row="1" BorderBrush="{StaticResource TabControlDarkerBorder}"   BorderThickness="1" CornerRadius="3,3,0,0" Background="Transparent">
                                    <controlsToolkit:DockPanel HorizontalAlignment="Stretch" LastChildFill="True">
                                        <data:DataPager x:Name="dgDataPager" controlsToolkit:DockPanel.Dock="Bottom" DisplayMode="FirstLastPreviousNext"  IsEnabled="True"                       
                                                        Source="{Binding}" AutoEllipsis="False" IsTotalItemCountFixed="False"/>

                                        <Border  controlsToolkit:DockPanel.Dock="Top" BorderBrush="{StaticResource TabControlDarkerBorder}"   BorderThickness="1" CornerRadius="3,3,0,0" Background="Transparent">
                                            <ContentControl VerticalAlignment="Center"  Grid.Row="0" FontSize="12" Content="List Of Reserved Beds" Margin="0" Style="{StaticResource Header}"     HorizontalAlignment="Stretch" />
                                        </Border>

                                        <data:DataGrid  x:Name="dgUnReserved" Margin="0,0,0,1" ItemsSource="{Binding}"  AutoGenerateColumns="False"  >
                                            <data:DataGrid.Columns >
                                                <data:DataGridTemplateColumn Header="Select" >
                                                    <data:DataGridTemplateColumn.CellEditingTemplate>
                                                        <DataTemplate>
                                                            <CheckBox x:Name="chkStatus" Margin="4" VerticalAlignment="Center" HorizontalAlignment="Center" IsChecked="{Binding UnResStatus,Mode=TwoWay}" Click="chkStatus_Click"></CheckBox>
                                                        </DataTemplate>
                                                    </data:DataGridTemplateColumn.CellEditingTemplate>
                                                </data:DataGridTemplateColumn>
                                                <data:DataGridTemplateColumn IsReadOnly="True" Header="Patient Name" Width="150" SortMemberPath="FirstName">
                                                    <data:DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                                                                <TextBlock VerticalAlignment="Center" Text="{Binding FirstName}" Margin="4,0,4,0"></TextBlock>
                                                                <TextBlock VerticalAlignment="Center" Text="{Binding MiddleName}" Margin="0,0,4,0"></TextBlock>
                                                                <TextBlock VerticalAlignment="Center" Text="{Binding LastName}"></TextBlock>
                                                            </StackPanel>
                                                        </DataTemplate>
                                                    </data:DataGridTemplateColumn.CellTemplate>
                                                </data:DataGridTemplateColumn>
                                                <data:DataGridTextColumn Binding="{Binding BedNo, Mode=OneWay}"  Header="Bed No" IsReadOnly="True" />
                                                <data:DataGridTextColumn Binding="{Binding Ward, Mode=OneWay}"  Header="Ward Name" IsReadOnly="True" />
                                                <data:DataGridTextColumn Binding="{Binding ClassName, Mode=OneWay}"  Header="Class Name" IsReadOnly="True" />
                                                <data:DataGridTextColumn Binding="{Binding FromDate, Mode=OneWay, StringFormat=dd/MM/yyyy}" Header="From Date" IsReadOnly="True"/>
                                                <data:DataGridTextColumn Binding="{Binding ToDate, Mode=OneWay, StringFormat=dd/MM/yyyy}" Header="To Date" IsReadOnly="True"/>
                                                <data:DataGridTemplateColumn Header="Remark" >
                                                    <data:DataGridTemplateColumn.CellEditingTemplate>
                                                        <DataTemplate>
                                                            <TextBox x:Name="txtRemark" Margin="4" Width="300" Text="{Binding UnResRemark,Mode=TwoWay}" IsEnabled="{Binding IsEnabled,Mode=TwoWay}" VerticalAlignment="Center" />
                                                        </DataTemplate>
                                                    </data:DataGridTemplateColumn.CellEditingTemplate>
                                                </data:DataGridTemplateColumn>
                                            </data:DataGrid.Columns>
                                        </data:DataGrid>

                                    </controlsToolkit:DockPanel>
                                </Border>
                            </Grid>
                        </controlsToolkit:DockPanel>

                    </controlsToolkit:DockPanel>

                </Border>
            </controlsToolkit:DockPanel>
        </Border>


    </Grid>
</UserControl>
