<UserControl x:Class="EMR.frmEMRVitals"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"          
    xmlns:data="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"  
    xmlns:Converter="clr-namespace:PalashDynamics.Converters;assembly=PalashDynamics.Converters"
xmlns:Localization="clr-namespace:PalashDynamic.Localization;assembly=PalashDynamic.Localization"
             xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit" 
    
    xmlns:controlsToolkit="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Toolkit"
    Loaded="UserControl_Loaded">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/PalashDynamics;component/Generic.xaml"/>

            </ResourceDictionary.MergedDictionaries>
            <Localization:Localized x:Key="locResource"></Localization:Localized>
            <Converter:DateTimeConverter x:Key="DateConverter"></Converter:DateTimeConverter>
            <Converter:DateTimeToAgePart x:Key="DateTimeToAgePart"></Converter:DateTimeToAgePart>
            <Converter:ToggleBooleanValueConverter x:Key="NegateValueConverter"/>
            <Converter:DateTimeConverterGlobal x:Key="DateConverterGlobal"></Converter:DateTimeConverterGlobal>
            <Converter:VisiblilityConverter x:Key="VisiblilityConverter"/>
        </ResourceDictionary>

    </UserControl.Resources>

    <toolkit:DockPanel LastChildFill="True">


        <Border  BorderBrush="{StaticResource TabControlDarkerBorder}"  Margin="4" toolkit:DockPanel.Dock="Top" BorderThickness="1" CornerRadius="3,3,3,3" Background="Transparent" >
            <Grid >
                <ScrollViewer x:Name="scrolForm" Style="{StaticResource ScrollViewerStyle1}" Background="Transparent" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" controlsToolkit:ScrollViewerExtensions.IsMouseWheelScrollingEnabled="True" KeyUp="ScrollViewer_KeyUp">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="0.4*"></ColumnDefinition>
                            <ColumnDefinition Width="1.6*"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition ></RowDefinition>
                            <RowDefinition Height="Auto"></RowDefinition>
                        </Grid.RowDefinitions>
                        <Grid x:Name="Form" Grid.Column="0">
                        </Grid>
                        <Border  BorderBrush="{StaticResource TabControlDarkerBorder}"  Margin="4" Grid.Row="1" BorderThickness="1" CornerRadius="3,3,3,3" Background="Transparent" >
                            <StackPanel x:Name="Footer" Orientation="Horizontal" VerticalAlignment="Center"   Margin="0,3,5,3" HorizontalAlignment="Right" Background="Transparent">
                                <StackPanel Orientation="Horizontal"  Margin="1" HorizontalAlignment="Right"  >
                                    <ToggleButton Margin="5,0,10,0" Content="{Binding btnSave, Source={StaticResource locResource}}" Style="{StaticResource ToggleButtonStyle}" x:Name="cmdSave" Click="cmdSave_Click" Width="auto" ></ToggleButton>
                                    <ToggleButton Margin="5,0,5,0" Content="{Binding btnCancel, Source={StaticResource locResource}}" Style="{StaticResource ToggleButtonStyle}" x:Name="cmdCancel" Click="cmdCancel_Click" Width="auto" ></ToggleButton>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                        <toolkit:DockPanel Grid.Column="1" Grid.RowSpan="2">
                            <controlsToolkit:DockPanel  >
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition ></RowDefinition>
                                        <RowDefinition Height="Auto"></RowDefinition>
                                        <RowDefinition Height="Auto"></RowDefinition>
                                    </Grid.RowDefinitions>
                                    <controlsToolkit:DockPanel Grid.Row="0"  Margin="4" controlsToolkit:DockPanel.Dock="Top">
                                        <ScrollViewer Background="Transparent" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" controlsToolkit:ScrollViewerExtensions.IsMouseWheelScrollingEnabled="True">
                                            <Grid>
                                                <Border  BorderBrush="{StaticResource TabControlDarkerBorder}"  Margin="4" controlsToolkit:DockPanel.Dock="Bottom" BorderThickness="1" CornerRadius="3,3,3,3" Background="Transparent" >
                                                    <controlsToolkit:DockPanel x:Name="docTop" controlsToolkit:DockPanel.Dock="Top" LastChildFill="True">
                                                        <Grid  Visibility="Visible"  HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="Auto"/>
                                                                <RowDefinition/>
                                                            </Grid.RowDefinitions>

                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock x:Name="lblVital" FontWeight="Bold" FontSize="12" Foreground="Black" Margin="5, 3, 0, 0" IsHitTestVisible="False" Text="{Binding lblVitals, Source={StaticResource locResource}}"></TextBlock>
                                                                <ComboBox x:Name="ChartType" Width="auto" ItemsSource="{Binding ListOfVital, Mode=TwoWay}" HorizontalAlignment="Left" Margin="44,2,0,4" MinWidth="110">
                                                                    <ComboBox.ItemTemplate>
                                                                        <DataTemplate>
                                                                            <CheckBox Content="{Binding VitalDescription}" Click="CheckBox_Click" IsChecked="{Binding IsChecked,Mode=TwoWay}" Tag="{Binding VitalID,Mode=TwoWay}" />
                                                                        </DataTemplate>
                                                                    </ComboBox.ItemTemplate>
                                                                </ComboBox>
                                                                <TextBlock x:Name="tbDepartment" Height="20" Width="Auto"  HorizontalAlignment="Left" Text="{Binding lblSelectfromList, Source={StaticResource locResource}}" Margin="-108,0,0,0"></TextBlock>
                                                            </StackPanel>
                                                            <Button  HorizontalAlignment="Right" Margin="0,2,4,5" x:Name="cmdVitalForward" Click="cmdVitalForward_Click"  Width="20" Height="20" VerticalAlignment="Center" ToolTipService.ToolTip="{Binding ttpVitalGraph,Source={StaticResource locResource}}">
                                                                <Button.Content>
                                                                    <Image Source="Icons/graph.png" ></Image>
                                                                </Button.Content>
                                                            </Button>
                                                            <Button  HorizontalAlignment="Right" Margin="0,2,26,5" x:Name="cmdVitalBackWord" Click="cmdVitalBackWord_Click"  Width="20" Height="20" VerticalAlignment="Center" IsEnabled="False">
                                                                <Button.Content>
                                                                    <Image Source="Icons/chart.png" ></Image>
                                                                </Button.Content>
                                                            </Button>
                                                            <controlsToolkit:DockPanel  Grid.Row="1">
                                                                <Grid  HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition Height="Auto"/>
                                                                        <RowDefinition/>
                                                                    </Grid.RowDefinitions>
                                                                    <Grid Height="AUTO" Visibility="Visible" Width="auto" x:Name="FrontPanel" Grid.Row="1">
                                                                        <data:DataGrid  x:Name="dgPatientVitals"  IsReadOnly="True"  SelectionMode="Single" ItemsSource="{Binding}"  AutoGenerateColumns="False" >
                                                                            <data:DataGrid.Columns>
                                                                                <data:DataGridTextColumn Binding="{Binding Date,StringFormat='{}{0:dd/MM/yyyy a\\t h:mm tt}'}" Localization:DataGridColumnHelper.HeaderBinding="{Binding lblVisitDate,Source={StaticResource locResource}}" Width="140"/>
                                                                               
                                                                                <data:DataGridTemplateColumn Localization:DataGridColumnHelper.HeaderBinding="{Binding lblBMI,Source={StaticResource locResource}}" IsReadOnly="False" >
                                                                                    <data:DataGridTemplateColumn.CellTemplate>
                                                                                        <DataTemplate>
                                                                                            <TextBlock Text="{Binding BMI, StringFormat=0.00}" Margin="4" VerticalAlignment="Center" HorizontalAlignment="Right" TextAlignment="Right" />
                                                                                        </DataTemplate>
                                                                                    </data:DataGridTemplateColumn.CellTemplate>
                                                                                </data:DataGridTemplateColumn>
                                                                                
                                                                                <data:DataGridTemplateColumn Localization:DataGridColumnHelper.HeaderBinding="{Binding lblPulse,Source={StaticResource locResource}}" IsReadOnly="False" >
                                                                                    <data:DataGridTemplateColumn.CellTemplate>
                                                                                        <DataTemplate>
                                                                                            <TextBlock Text="{Binding Pulse, StringFormat=0.00}" Margin="4" VerticalAlignment="Center" HorizontalAlignment="Right" TextAlignment="Right" />
                                                                                        </DataTemplate>
                                                                                    </data:DataGridTemplateColumn.CellTemplate>
                                                                                </data:DataGridTemplateColumn>
                                                                                
                                                                                <data:DataGridTemplateColumn Localization:DataGridColumnHelper.HeaderBinding="{Binding lblSystolicBP,Source={StaticResource locResource}}" IsReadOnly="False" >
                                                                                    <data:DataGridTemplateColumn.CellTemplate>
                                                                                        <DataTemplate>
                                                                                            <TextBlock Text="{Binding SystolicBP, StringFormat=0.00}" Margin="4" VerticalAlignment="Center" HorizontalAlignment="Right" TextAlignment="Right" />
                                                                                        </DataTemplate>
                                                                                    </data:DataGridTemplateColumn.CellTemplate>
                                                                                </data:DataGridTemplateColumn>
                                                                                
                                                                                <data:DataGridTemplateColumn Localization:DataGridColumnHelper.HeaderBinding="{Binding lblDiastolicBP,Source={StaticResource locResource}}" IsReadOnly="False" >
                                                                                    <data:DataGridTemplateColumn.CellTemplate>
                                                                                        <DataTemplate>
                                                                                            <TextBlock Text="{Binding DiastolicBP, StringFormat=0.00}" Margin="4" VerticalAlignment="Center" HorizontalAlignment="Right" TextAlignment="Right" />
                                                                                        </DataTemplate>
                                                                                    </data:DataGridTemplateColumn.CellTemplate>
                                                                                </data:DataGridTemplateColumn>
                                                                                
                                                                                <data:DataGridTemplateColumn Localization:DataGridColumnHelper.HeaderBinding="{Binding lblTemp,Source={StaticResource locResource}}" IsReadOnly="False">
                                                                                    <data:DataGridTemplateColumn.CellTemplate>
                                                                                        <DataTemplate>
                                                                                            <TextBlock Text="{Binding Temperature, StringFormat=0.00}" Margin="4" VerticalAlignment="Center" HorizontalAlignment="Right" TextAlignment="Right" />
                                                                                        </DataTemplate>
                                                                                    </data:DataGridTemplateColumn.CellTemplate>
                                                                                </data:DataGridTemplateColumn>
                                                                                <!--<data:DataGridTemplateColumn Localization:DataGridColumnHelper.HeaderBinding="{Binding lblRBS,Source={StaticResource locResource}}" IsReadOnly="False" Visibility="Collapsed" >
                                                                                    <data:DataGridTemplateColumn.CellTemplate>
                                                                                        <DataTemplate>
                                                                                            <TextBlock Text="{Binding RBS, StringFormat=0.00}" Margin="4" VerticalAlignment="Center" HorizontalAlignment="Right" TextAlignment="Right" />
                                                                                        </DataTemplate>
                                                                                    </data:DataGridTemplateColumn.CellTemplate>
                                                                                </data:DataGridTemplateColumn>-->

                                                                                <data:DataGridTemplateColumn Header="Respiratory Rate" IsReadOnly="False" >
                                                                                    <data:DataGridTemplateColumn.CellTemplate>
                                                                                        <DataTemplate>
                                                                                            <TextBlock Text="{Binding RR, StringFormat=0.00}" Margin="4" VerticalAlignment="Center" HorizontalAlignment="Right" TextAlignment="Right" />
                                                                                        </DataTemplate>
                                                                                    </data:DataGridTemplateColumn.CellTemplate>
                                                                                </data:DataGridTemplateColumn>

                                                                                <data:DataGridTemplateColumn Localization:DataGridColumnHelper.HeaderBinding="{Binding lblHeight,Source={StaticResource locResource}}" IsReadOnly="False" >
                                                                                    <data:DataGridTemplateColumn.CellTemplate>
                                                                                        <DataTemplate>
                                                                                            <TextBlock Text="{Binding Height, StringFormat=0.00}" Margin="4" VerticalAlignment="Center" HorizontalAlignment="Right" TextAlignment="Right" />
                                                                                        </DataTemplate>
                                                                                    </data:DataGridTemplateColumn.CellTemplate>
                                                                                </data:DataGridTemplateColumn>

                                                                                <data:DataGridTemplateColumn Localization:DataGridColumnHelper.HeaderBinding="{Binding lblWeight,Source={StaticResource locResource}}" IsReadOnly="False" >
                                                                                    <data:DataGridTemplateColumn.CellTemplate>
                                                                                        <DataTemplate>
                                                                                            <TextBlock Text="{Binding Weight, StringFormat=0.00}" Margin="4" VerticalAlignment="Center" HorizontalAlignment="Right" TextAlignment="Right" />
                                                                                        </DataTemplate>
                                                                                    </data:DataGridTemplateColumn.CellTemplate>
                                                                                </data:DataGridTemplateColumn>

                                                                                <data:DataGridTemplateColumn Visibility="Collapsed" Localization:DataGridColumnHelper.HeaderBinding="{Binding lblHeadCircumference,Source={StaticResource locResource}}" IsReadOnly="True" >
                                                                                    <data:DataGridTemplateColumn.CellTemplate>
                                                                                        <DataTemplate>
                                                                                            <TextBlock Text="{Binding HeadCircumference, StringFormat=0.00}" Margin="4" VerticalAlignment="Center" HorizontalAlignment="Right" TextAlignment="Right" />
                                                                                        </DataTemplate>
                                                                                    </data:DataGridTemplateColumn.CellTemplate>
                                                                                </data:DataGridTemplateColumn>

                                                                            </data:DataGrid.Columns>
                                                                        </data:DataGrid>
                                                                    </Grid>
                                                                    <Grid Height="AUTO" Width="auto" x:Name="BackPanel" Visibility="Collapsed" Grid.Row="1">
                                                                        <toolkit:Chart Grid.Row="1" Height="Auto" Width="Auto"  x:Name="myChartAll" AllowDrop="True" Visibility="Visible">
                                                                            <toolkit:Chart.Series>
                                                                                <toolkit:LineSeries ItemsSource="{Binding}" x:Name="lineHeight1" IndependentValueBinding="{Binding Date,Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}" DependentValueBinding="{Binding Height}" Title="Height(cm)">
                                                                                </toolkit:LineSeries>

                                                                                <toolkit:LineSeries ItemsSource="{Binding}" x:Name="lineWeight1" IndependentValueBinding="{Binding Date,Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}" DependentValueBinding="{Binding Weight}" Title="Weight(kg)">
                                                                                </toolkit:LineSeries>

                                                                                <toolkit:LineSeries ItemsSource="{Binding}" x:Name="lineBMI1" IndependentValueBinding="{Binding Date,Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}" DependentValueBinding="{Binding BMI}" Title="BMI">
                                                                                </toolkit:LineSeries>

                                                                                <toolkit:LineSeries ItemsSource="{Binding}" x:Name="linePulse1" IndependentValueBinding="{Binding Date,Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}" DependentValueBinding="{Binding Pulse}" Title="Pulse (Beats/min)">
                                                                                </toolkit:LineSeries>

                                                                                <toolkit:LineSeries ItemsSource="{Binding}" x:Name="lineSystolicBP1" IndependentValueBinding="{Binding Date,Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}" DependentValueBinding="{Binding SystolicBP}" Title="Systolic BP(mm Hg)">
                                                                                </toolkit:LineSeries>

                                                                                <toolkit:LineSeries ItemsSource="{Binding}" x:Name="lineDiastolicBP1" IndependentValueBinding="{Binding Date,Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}" DependentValueBinding="{Binding DiastolicBP}" Title="Diastolic BP(mm Hg)">
                                                                                </toolkit:LineSeries>

                                                                                <toolkit:LineSeries ItemsSource="{Binding}" x:Name="lineTemperature1" IndependentValueBinding="{Binding Date,Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}" DependentValueBinding="{Binding Temperature}" Title="Tempe(˚C)">
                                                                                </toolkit:LineSeries>

                                                                                <toolkit:LineSeries ItemsSource="{Binding}" x:Name="lineRBS1" IndependentValueBinding="{Binding Date,Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}" DependentValueBinding="{Binding RR}" Title="RR">
                                                                                </toolkit:LineSeries>

                                                                                <!-- <toolkit:LineSeries ItemsSource="{Binding}" x:Name="lineO21" IndependentValueBinding="{Binding Date,Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}" DependentValueBinding="{Binding O2}" Title="O2(%)">
                                                                                </toolkit:LineSeries>-->
                                                                                <!--<toolkit:LineSeries ItemsSource="{Binding}" x:Name="lineHeadCircum" IndependentValueBinding="{Binding Date,Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}" DependentValueBinding="{Binding HeadCircumference}" Title="{Binding lblHeadCircumference, Source={StaticResource locResource}}">
                                                                                </toolkit:LineSeries>-->

                                                                            </toolkit:Chart.Series>
                                                                            <toolkit:Chart.Axes>
                                                                                <toolkit:LinearAxis Orientation="Y" Location="Left" Title="Value" x:Name="AllAxis" ShowGridLines="True" Minimum="0"  />
                                                                            </toolkit:Chart.Axes>
                                                                        </toolkit:Chart>

                                                                    </Grid>
                                                                </Grid>
                                                            </controlsToolkit:DockPanel >

                                                        </Grid>
                                                    </controlsToolkit:DockPanel>
                                                </Border>
                                            </Grid>
                                        </ScrollViewer>
                                    </controlsToolkit:DockPanel>

                                </Grid>
                            </controlsToolkit:DockPanel>
                        </toolkit:DockPanel>

                    </Grid>
                </ScrollViewer>
            </Grid>
        </Border>
    </toolkit:DockPanel>

</UserControl>