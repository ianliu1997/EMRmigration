<controls:ChildWindow x:Class="EMR.EmrHistroyImageUpload"
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
           xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"
                       xmlns:data="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"
                     xmlns:Converter="clr-namespace:PalashDynamics.Converters;assembly=PalashDynamics.Converters"
           Width="800" Height="500" 
           Title="Image Upload" HasCloseButton="False" >

    <controls:ChildWindow.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/PalashDynamics;component/Generic.xaml"/>

            </ResourceDictionary.MergedDictionaries>
            <Converter:ByteToImageConverter x:Name="binaryConverter" x:Key="byteToImageConverter"></Converter:ByteToImageConverter>
        </ResourceDictionary>


    </controls:ChildWindow.Resources>
    <Grid x:Name="LayoutRoot" Margin="2">

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <StackPanel Grid.Row="0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto" ></ColumnDefinition>
                    <ColumnDefinition Width="auto"></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <ToggleButton x:Name="CmdBrowse"  HorizontalAlignment="Left" Style="{StaticResource ToggleButtonStyle}"  Margin="4" Click="CmdBrowse_Click"  TabIndex="21" Grid.Column="0" >
                    <StackPanel Orientation="Horizontal"  VerticalAlignment="Center" HorizontalAlignment="Right" >
                        <TextBlock Grid.Column="0" Grid.Row="0" VerticalAlignment="Center" HorizontalAlignment="Right" Text="Browse"  Margin="2"></TextBlock>
                    </StackPanel>
                </ToggleButton>
                <ToggleButton   Margin="4" Content="Cancel" Style="{StaticResource ToggleButtonStyle}" HorizontalAlignment="Left"  Grid.Column="1" Width="70" x:Name="cmdSave" Click="cmdSave_Click"   ></ToggleButton>
                <ToggleButton   Margin="4" Content="OK" Style="{StaticResource ToggleButtonStyle}" HorizontalAlignment="Left"  Grid.Column="2" Width="70" x:Name="cmdOK" Click="cmdOK_Click"   ></ToggleButton>
            </Grid>
        </StackPanel>
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel  Grid.Row="1" Height="Auto" ScrollViewer.VerticalScrollBarVisibility="Visible" >
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                    </Grid.RowDefinitions>
                    <data:DataGrid Grid.Row="0" x:Name="dgImgList" Margin="2" AutoGenerateColumns="False" Height="400" ItemsSource="{Binding}" HorizontalAlignment="Stretch" TabIndex="6"  VerticalScrollBarVisibility="Visible"    VerticalAlignment="Stretch" >
                        <data:DataGrid.Columns>
                            <data:DataGridTemplateColumn>
                                <data:DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Image Source="{Binding ImageName}" Height="50" Width="50"  Visibility="{Binding isOPD}"   />
                                        </StackPanel>
                                    </DataTemplate>
                                </data:DataGridTemplateColumn.CellTemplate>
                            </data:DataGridTemplateColumn>
                            <data:DataGridTemplateColumn>
                                <data:DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <HyperlinkButton VerticalAlignment="Center" FontFamily="Webdings" Content="r"  Padding="5,0,5,0" IsTabStop="False" x:Name="cmdDelete" ToolTipService.ToolTip="Delete" Click="cmdDeleteDrug_Click"></HyperlinkButton>
                                    </DataTemplate>
                                </data:DataGridTemplateColumn.CellTemplate>
                            </data:DataGridTemplateColumn>
                        </data:DataGrid.Columns>
                    </data:DataGrid>

                    <data:DataGrid Grid.Row="1" x:Name="dgImgListIPD" Margin="2" AutoGenerateColumns="False" Height="400" ItemsSource="{Binding}" HorizontalAlignment="Stretch" TabIndex="6"  VerticalScrollBarVisibility="Visible"    VerticalAlignment="Stretch" >
                        <data:DataGrid.Columns>
                            <data:DataGridTemplateColumn>
                                <data:DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Image x:Name="thumbNail"  Width="50" Height="50" VerticalAlignment="Center" Source="{Binding ImageName1,Converter={StaticResource byteToImageConverter}}" Visibility="{Binding ISIPD}"></Image>
                                        </StackPanel>
                                    </DataTemplate>
                                </data:DataGridTemplateColumn.CellTemplate>
                            </data:DataGridTemplateColumn>
                            <data:DataGridTemplateColumn>
                                <data:DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <HyperlinkButton VerticalAlignment="Center" FontFamily="Webdings" Content="r"  Padding="5,0,5,0" IsTabStop="False" x:Name="cmdDelete" ToolTipService.ToolTip="Delete" Click="cmdDeleteDrug_Click"></HyperlinkButton>
                                    </DataTemplate>
                                </data:DataGridTemplateColumn.CellTemplate>
                            </data:DataGridTemplateColumn>
                        </data:DataGrid.Columns>
                    </data:DataGrid>
                </Grid>
            
            
            </StackPanel>
        </ScrollViewer>
    </Grid>
</controls:ChildWindow>