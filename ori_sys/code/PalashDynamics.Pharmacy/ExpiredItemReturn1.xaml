<UserControl xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit" 
    x:Class="PalashDynamics.Pharmacy.ExpiredItemReturn1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
              xmlns:data="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"
    xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"
    xmlns:Grp="clr-namespace:Groupbox;assembly=Groupbox" 
    xmlns:inputcombo="clr-namespace:PalashDynamics.Controls;assembly=PalashDynamics.Controls.AutoCompleteComboBox"
    Height="auto" Width="auto" Loaded="UserControl_Loaded"
    xmlns:local="clr-namespace:PalashDynamics.Converters;assembly=PalashDynamics.Converters">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/PalashDynamics;component/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <local:DateTimeConverter x:Key="DateConverter" />

        </ResourceDictionary>
    </UserControl.Resources>

    <toolkit:DockPanel LastChildFill="True">

        <toolkit:DockPanel toolkit:DockPanel.Dock="Bottom" HorizontalAlignment="Right">
            <StackPanel Grid.Column="1" Margin="4" Grid.Row="1" Grid.ColumnSpan="2" Orientation="Horizontal">
                <ToggleButton x:Name="cmdPrint" Content="Print" Click="cmdPrint_Click"  Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" ></ToggleButton>
                <ToggleButton Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible"  Content="Approve"   x:Name="cmdApprove" Click="cmdApprove_Click" ></ToggleButton>
                <ToggleButton Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible"  Content="New"   x:Name="cmdNew" Click="cmdNew_Click" ></ToggleButton>
                <ToggleButton Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" Content="Save"   x:Name="cmdSave" IsEnabled="True" Click="cmdSave_Click" ></ToggleButton>
                <ToggleButton Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" Content="Cancel"   x:Name="cmdCancel" IsEnabled="True" Click="cmdCancel_Click"></ToggleButton>
                <!--<ToggleButton Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" Content="Close"   x:Name="cmdClose" Click="cmdClose_Click" ></ToggleButton>-->
            </StackPanel>
        </toolkit:DockPanel>

        <!--<toolkit:DockPanel toolkit:DockPanel.Dock="Bottom" HorizontalAlignment="Right">
            <StackPanel  Margin="4"  Grid.ColumnSpan="2" Orientation="Horizontal">
                <ToggleButton Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" Content="Save"   x:Name="cmdSave" IsEnabled="False" Click="cmdSave_Click" ></ToggleButton>
                <ToggleButton Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" Content="Cancel"   x:Name="cmdClose1" IsEnabled="False" Click="cmdClose1_Click"></ToggleButton>
            </StackPanel>
        </toolkit:DockPanel>-->

        <Grid >
            <toolkit:DockPanel Grid.Column="0" Grid.ColumnSpan="2" HorizontalAlignment="Stretch"  Visibility="Visible"  LastChildFill="True" x:Name="FrontPanel">
                <toolkit:DockPanel LastChildFill="True">
                    <Border  toolkit:DockPanel.Dock="Top" BorderBrush="{StaticResource TabControlDarkerBorder}"   BorderThickness="1" CornerRadius="3,3,0,0" Background="Transparent">
                        <ContentControl VerticalAlignment="Center" Grid.ColumnSpan="4" FontSize="12" Content="List of Expired Items" Margin="-1" Style="{StaticResource Header}"     HorizontalAlignment="Stretch" />
                    </Border>
                    <Border BorderBrush="{StaticResource TabControlDarkerBorder}"  Margin="0,-1,0,0" BorderThickness="1" CornerRadius="0,0,3,3" Background="Transparent">
                        <toolkit:DockPanel  LastChildFill="True">
                            <toolkit:DockPanel x:Name="dpSearch1" toolkit:DockPanel.Dock="Top" LastChildFill="True">
                                <Grp:GroupBox Header="" toolkit:DockPanel.Dock="Top" Margin="4" >
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition></RowDefinition>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition></ColumnDefinition>
                                            <ColumnDefinition ></ColumnDefinition>
                                            <ColumnDefinition ></ColumnDefinition>
                                            <ColumnDefinition></ColumnDefinition>

                                        </Grid.ColumnDefinitions>
                                        <Grp:GroupBox Header="Return Date" Grid.Row="0" Grid.Column="0">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition></RowDefinition>
                                                    <RowDefinition></RowDefinition>
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                    <ColumnDefinition></ColumnDefinition>
                                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                    <ColumnDefinition></ColumnDefinition>
                                                </Grid.ColumnDefinitions>

                                                <TextBlock Text="From Date" Margin="2" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" ></TextBlock>
                                                <controls:DatePicker x:Name="dpSearchFromDate" Margin="2" Grid.Row="0" Grid.Column="1"  HorizontalAlignment="Stretch" VerticalAlignment="Center" ></controls:DatePicker>

                                                <TextBlock Text="To Date" Margin="2" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"></TextBlock>
                                                <controls:DatePicker x:Name="dpSearchToDate" Margin="2" Grid.Row="1" Grid.Column="1"  HorizontalAlignment="Stretch" VerticalAlignment="Center" ></controls:DatePicker>
                                            </Grid>

                                        </Grp:GroupBox>

                                        <Grp:GroupBox Header="Store" Grid.Row="0" Grid.Column="1" Margin="4">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition></RowDefinition>
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                    <ColumnDefinition></ColumnDefinition>
                                                </Grid.ColumnDefinitions>

                                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Store" Margin="2" VerticalAlignment="Center"></TextBlock>
                                                <inputcombo:AutoCompleteComboBox  SelectedItemBinding="{Binding clsStoreVO, Mode=OneWay}" SelectedValuePath="StoreId" Margin="2"  Grid.Row="0" Grid.Column="1"   x:Name="cmbSearchStore" VerticalAlignment="Center"  ></inputcombo:AutoCompleteComboBox>
                                            </Grid>
                                        </Grp:GroupBox>
                                        <Grp:GroupBox Header="Supplier" Grid.Row="0" Grid.Column="2" Margin="4">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition></RowDefinition>
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                    <ColumnDefinition></ColumnDefinition>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Supplier" Margin="2" VerticalAlignment="Center"></TextBlock>
                                                <inputcombo:AutoCompleteComboBox  SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID" Margin="2"  Grid.Row="0" Grid.Column="1"   x:Name="cmbSearchSupplier" VerticalAlignment="Center"  ></inputcombo:AutoCompleteComboBox>
                                            </Grid>

                                        </Grp:GroupBox>

                                        <StackPanel HorizontalAlignment="Left" VerticalAlignment="Bottom" Grid.Row="0" Grid.Column="3" Margin="4"   Orientation="Horizontal">
                                            <!--<ToggleButton  Background="#000000" Margin="4" HorizontalAlignment="Left" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" Content="Search" Width="80"   x:Name="cmdSearch"  Click="cmdSearch_Click" ></ToggleButton>-->
                                            <Button x:Name="cmdSearch" Margin="4" ToolTipService.ToolTip="Search Expired Items" Click="cmdSearch_Click">
                                                <Image Source="/PalashDynamics;component/Icons/Search_b.JPG" Margin="4" Width="20" ></Image>
                                            </Button>
                                        </StackPanel>
                                    </Grid>

                                </Grp:GroupBox>
                                <toolkit:DockPanel LastChildFill="True" x:Name="dpMaterialConsumptionList">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition></RowDefinition>
                                            <RowDefinition></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>

                                        </Grid.RowDefinitions>
                                        <toolkit:DockPanel Grid.Row="0" LastChildFill="True" x:Name="dpItemListTop">
                                            <Border  toolkit:DockPanel.Dock="Top" BorderBrush="{StaticResource TabControlDarkerBorder}"   BorderThickness="1" CornerRadius="3,3,0,0" Background="Transparent">
                                                <ContentControl VerticalAlignment="Center" Grid.ColumnSpan="4" FontSize="12" Content="List of Expired Items" Margin="4,0,4,0" Style="{StaticResource Header}"     HorizontalAlignment="Stretch" />
                                            </Border>
                                            <data:DataPager x:Name="dpdgExpiredList" toolkit:DockPanel.Dock="Bottom" 
                                                        DisplayMode="FirstLastPreviousNext"  IsEnabled="True"                       
                                                        Source="{Binding}" 
                                                        AutoEllipsis="False" IsTotalItemCountFixed="False" Margin="4,0,4,0"  />
                                            <data:DataGrid   x:Name="dgExpiredList" ScrollViewer.HorizontalScrollBarVisibility="auto" ScrollViewer.VerticalScrollBarVisibility="auto" AutoGenerateColumns="False"  AlternatingRowBackground="Silver" VerticalAlignment="Stretch"  Margin="4,4,4,2" SelectionChanged="dgExpiredList_SelectionChanged" >
                                                <data:DataGrid.Columns>

                                                    <data:DataGridTemplateColumn>
                                                        <data:DataGridTemplateColumn.CellTemplate>
                                                            <DataTemplate>
                                                                <HyperlinkButton x:Name="Update" TabIndex="0" Padding="5,0,5,0"  Content="View" VerticalAlignment="Center" Click="Update_Click"  ></HyperlinkButton>
                                                            </DataTemplate>
                                                        </data:DataGridTemplateColumn.CellTemplate>
                                                    </data:DataGridTemplateColumn>

                                                    <data:DataGridTextColumn Visibility="Visible"  IsReadOnly="True" Header="Return No."  Binding="{Binding ExpiryReturnNo,Mode=TwoWay}"></data:DataGridTextColumn>
                                                    <data:DataGridTextColumn Visibility="Visible" IsReadOnly="True"  Header="Return Date"  Binding="{Binding Date,Mode=TwoWay,Converter={StaticResource DateConverter},ConverterParameter='dd/MMM/yyyy'}"></data:DataGridTextColumn>

                                                    <data:DataGridTextColumn IsReadOnly="True" Header="Store Name"  Binding="{Binding StoreName,Mode=TwoWay}"></data:DataGridTextColumn>
                                                    <data:DataGridTextColumn IsReadOnly="True" Header="Supplier Name"  Binding="{Binding SupplierName,Mode=TwoWay}"></data:DataGridTextColumn>
                                                    <data:DataGridTextColumn IsReadOnly="True" Header="Net Amount"  Binding="{Binding NetAmount,StringFormat=0.000,Mode=TwoWay}">
                                                        <data:DataGridTextColumn.ElementStyle>
                                                            <Style TargetType="TextBlock">
                                                                <Setter Property="TextAlignment" Value="Right"/>
                                                            </Style>
                                                        </data:DataGridTextColumn.ElementStyle>
                                                    </data:DataGridTextColumn>

                                                    <data:DataGridCheckBoxColumn IsReadOnly="True" Header="Approved"  Binding="{Binding Approve,Mode=OneWay}"/>
                                                    <data:DataGridCheckBoxColumn IsReadOnly="True" Header="Rejected" Binding="{Binding Reject,Mode=OneWay}" Visibility="Collapsed"/>
                                                    <data:DataGridTextColumn IsReadOnly="True" Header="Approved/Rejected By"  Binding="{Binding ApproveOrRejectByName,Mode=TwoWay}" Visibility="Collapsed"></data:DataGridTextColumn>

                                                </data:DataGrid.Columns>
                                            </data:DataGrid>
                                        </toolkit:DockPanel>
                                        <toolkit:DockPanel Grid.Row="1" LastChildFill="True" x:Name="dpItemListBottom">
                                            <Border  toolkit:DockPanel.Dock="Top" BorderBrush="{StaticResource TabControlDarkerBorder}"   BorderThickness="1" CornerRadius="3,3,0,0" Background="Transparent">
                                                <ContentControl VerticalAlignment="Center" Grid.ColumnSpan="4" FontSize="12" Content="Expired Items Details" Margin="4,0,4,0" Style="{StaticResource Header}"     HorizontalAlignment="Stretch" />
                                            </Border>
                                            <data:DataGrid  x:Name="dgExpiredItemList" ScrollViewer.HorizontalScrollBarVisibility="auto" ScrollViewer.VerticalScrollBarVisibility="auto" AutoGenerateColumns="False"  AlternatingRowBackground="Silver" VerticalAlignment="Stretch"  Margin="4"     >
                                                <data:DataGrid.Columns>
                                                    <data:DataGridTextColumn Visibility="Visible" IsReadOnly="True"  Header="Received No."  Binding="{Binding ReceivedNo,Mode=OneWay}"></data:DataGridTextColumn>
                                                    <data:DataGridTextColumn Visibility="Visible" IsReadOnly="True"  Header="Item Name"  Binding="{Binding ItemName,Mode=OneWay}"></data:DataGridTextColumn>
                                                    <data:DataGridTextColumn IsReadOnly="True"  Header="Batch Code"  Binding="{Binding BatchCode,Mode=OneWay}"></data:DataGridTextColumn>
                                                    <data:DataGridTemplateColumn Header="Return Quantity" IsReadOnly="True">
                                                        <data:DataGridTemplateColumn.CellTemplate>
                                                            <DataTemplate>
                                                                <TextBlock  VerticalAlignment="Center" Text="{Binding ReturnQty,StringFormat=0.00,Mode=TwoWay}" TextAlignment="Right"  ></TextBlock>

                                                            </DataTemplate>
                                                        </data:DataGridTemplateColumn.CellTemplate>
                                                    </data:DataGridTemplateColumn>
                                                    <data:DataGridTextColumn Visibility="Visible" IsReadOnly="True"  Header="UOM"  Binding="{Binding UOM,Mode=OneWay}"></data:DataGridTextColumn>

                                                    <data:DataGridTextColumn  IsReadOnly="True" Header="Cost Price"  Binding="{Binding PurchaseRate,StringFormat=0.00,Mode=TwoWay}">
                                                        <data:DataGridTextColumn.ElementStyle>
                                                            <Style TargetType="TextBlock">
                                                                <Setter Property="TextAlignment" Value="Right"/>
                                                            </Style>
                                                        </data:DataGridTextColumn.ElementStyle>
                                                    </data:DataGridTextColumn>


                                                    <data:DataGridTextColumn  IsReadOnly="True" Header="Total Cost Price"  Binding="{Binding TotalPurchaseRate,StringFormat=0.00,Mode=TwoWay}">
                                                        <data:DataGridTextColumn.ElementStyle>
                                                            <Style TargetType="TextBlock">
                                                                <Setter Property="TextAlignment" Value="Right"/>
                                                            </Style>
                                                        </data:DataGridTextColumn.ElementStyle>
                                                    </data:DataGridTextColumn>

                                                    <data:DataGridTextColumn  IsReadOnly="True" Header="MRP"  Binding="{Binding MRP,StringFormat=0.00,Mode=TwoWay}">
                                                        <data:DataGridTextColumn.ElementStyle>
                                                            <Style TargetType="TextBlock">
                                                                <Setter Property="TextAlignment" Value="Right"/>
                                                            </Style>
                                                        </data:DataGridTextColumn.ElementStyle>
                                                    </data:DataGridTextColumn>
                                                    <data:DataGridTextColumn IsReadOnly="True" Header="Total Amount"  Binding="{Binding MRPAmount,StringFormat=0.00,Mode=TwoWay}">
                                                        <data:DataGridTextColumn.ElementStyle>
                                                            <Style TargetType="TextBlock">
                                                                <Setter Property="TextAlignment" Value="Right"/>
                                                            </Style>
                                                        </data:DataGridTextColumn.ElementStyle>
                                                    </data:DataGridTextColumn>
                                                    <data:DataGridTextColumn IsReadOnly="True" Header="Net Amount"  Binding="{Binding NetAmount,StringFormat=0.00,Mode=TwoWay}">
                                                        <data:DataGridTextColumn.ElementStyle>
                                                            <Style TargetType="TextBlock">
                                                                <Setter Property="TextAlignment" Value="Right"/>
                                                            </Style>
                                                        </data:DataGridTextColumn.ElementStyle>
                                                    </data:DataGridTextColumn>
                                                </data:DataGrid.Columns>
                                            </data:DataGrid>
                                        </toolkit:DockPanel>
                                        <toolkit:DockPanel  Margin="4" LastChildFill="True" Grid.Row="2" >
                                            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
                                                <TextBlock HorizontalAlignment="Right" Text="Total" VerticalAlignment="Center" Margin="1,0,1,0"></TextBlock>
                                                <TextBox x:Name="txtTotalCountRecords" TextAlignment="Right" VerticalAlignment="Center" IsReadOnly="True"  Margin="4" Width="70" ></TextBox>
                                            </StackPanel>
                                        </toolkit:DockPanel>
                                    </Grid>
                                </toolkit:DockPanel>
                            </toolkit:DockPanel>
                        </toolkit:DockPanel>
                    </Border>
                </toolkit:DockPanel>

            </toolkit:DockPanel>
            <toolkit:DockPanel Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"  HorizontalAlignment="Stretch"  Visibility="Collapsed"  LastChildFill="True"  x:Name="BackPanel" >

                <toolkit:DockPanel  LastChildFill="True">
                    <toolkit:DockPanel x:Name="dpSummary" toolkit:DockPanel.Dock="Bottom" LastChildFill="True">
                        <Grp:GroupBox>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto"></ColumnDefinition>
                                    <ColumnDefinition ></ColumnDefinition>
                                    <ColumnDefinition Width="auto"></ColumnDefinition>
                                    <ColumnDefinition ></ColumnDefinition>
                                    <ColumnDefinition Width="110" ></ColumnDefinition>
                                    <ColumnDefinition ></ColumnDefinition>
                                    <ColumnDefinition Width="auto" ></ColumnDefinition>
                                    <ColumnDefinition  ></ColumnDefinition>

                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto"></RowDefinition>
                                    <RowDefinition></RowDefinition>


                                </Grid.RowDefinitions>
                                <TextBlock Text="Remark" Margin="4" Grid.RowSpan="2" Grid.Row="0" HorizontalAlignment="Right"></TextBlock>
                                <TextBox x:Name="txtRemark" Height="55" DataContext="{Binding}" Text="{Binding Remark,Mode=TwoWay}" Grid.Column="1" Grid.Row="0" Grid.RowSpan="2" HorizontalAlignment="Stretch" Margin="4" AcceptsReturn="True" VerticalScrollBarVisibility="Visible" TextWrapping="Wrap"></TextBox>

                                <TextBlock Text="Total Cost Amount" Margin="4"  HorizontalAlignment="Right" Grid.Row="0" Grid.Column="2"></TextBlock>
                                <TextBox x:Name="txtTAmt" DataContext="{Binding}" Text="{Binding TotalAmount,StringFormat=0.000}" TextAlignment="Right" IsReadOnly="True" Grid.Column="3" Grid.Row="0"  HorizontalAlignment="Stretch" Margin="4" ></TextBox>

                                <TextBlock Text="Total VAT Amount" Margin="4" Width="auto" HorizontalAlignment="Right" Grid.Row="0" Grid.Column="4"></TextBlock>
                                <TextBox x:Name="txtTVAT" DataContext="{Binding}" TextAlignment="Right" Text="{Binding TotalVATAmount,StringFormat=0.000}" IsReadOnly="True" Grid.Column="5" Grid.Row="0"  HorizontalAlignment="Stretch" Margin="4" ></TextBox>

                                <TextBlock Text="Total Tax Amount" Margin="4" Width="auto" HorizontalAlignment="Right" Grid.Row="0" Grid.Column="6"></TextBlock>
                                <TextBox x:Name="txtTTaxAmt" DataContext="{Binding}" Text="{Binding TotalTaxAmount,StringFormat=0.000}" TextAlignment="Right" IsReadOnly="True" Margin="4" Grid.Column="7" Grid.Row="0" Grid.ColumnSpan="2" HorizontalAlignment="Stretch"  ></TextBox>

                                <TextBlock Text="Net Amount" Margin="4" Width="auto" HorizontalAlignment="Right" Grid.Row="1" Grid.Column="2"></TextBlock>
                                <TextBox x:Name="txtNetAmt" DataContext="{Binding}" Text="{Binding NetAmount,StringFormat=0.000}" TextAlignment="Right" IsReadOnly="True" Margin="4" Grid.Column="3" Grid.Row="1"  HorizontalAlignment="Stretch" ></TextBox>

                            </Grid>
                        </Grp:GroupBox>
                    </toolkit:DockPanel>
                    <toolkit:DockPanel LastChildFill="True" x:Name="dpItemList">
                        <toolkit:DockPanel x:Name="dpSearch" toolkit:DockPanel.Dock="Top" LastChildFill="True">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*"/>
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Grp:GroupBox Header="Expired Return Details" Margin ="4"  Grid.Column="0" HorizontalAlignment="Stretch">
                                    <Grid >
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="auto"></ColumnDefinition>
                                            <ColumnDefinition ></ColumnDefinition>
                                            <ColumnDefinition Width="auto"></ColumnDefinition>
                                            <ColumnDefinition ></ColumnDefinition>

                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="auto"></RowDefinition>
                                            <RowDefinition Height="auto"></RowDefinition>
                                        </Grid.RowDefinitions>

                                        <TextBlock x:Name="EINumber" Text="Return Number" Margin="4" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Right" Width="auto"></TextBlock>
                                        <TextBox x:Name="txtSANumber" IsReadOnly="True"  Grid.Column="1" Margin="4" VerticalAlignment="Center" Grid.ColumnSpan="1" DataContext="{Binding}" Text="{Binding ExpiryReturnNo,Mode=TwoWay}"></TextBox>
                                        <TextBlock x:Name="ReturnDate" Text="Return Date" Margin="4" Grid.Row="0" Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Right"></TextBlock>
                                        <controls:DatePicker x:Name="dpreturnDt" Grid.Row="0" Grid.Column="3" Margin="4"  VerticalAlignment="Center"   ></controls:DatePicker>
                                        <TextBlock x:Name="supplier" Text="Supplier" Margin="4" Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Right"></TextBlock>
                                        <inputcombo:AutoCompleteComboBox  x:Name="cmbSupplier" SelectedItemBinding="{Binding MasterListItem, Mode=TwoWay}" SelectedValuePath="ID" DataContext="{Binding}" Grid.Row="1" Grid.Column="1"  Margin="4" HorizontalAlignment="Stretch" ></inputcombo:AutoCompleteComboBox >
                                        <!--<ToggleButton x:Name="txtGetItems"  Content="Get Items" Grid.Row="1" Grid.Column="4"  Background="#000000" Margin="4" Click="txtGetItems_Click" HorizontalAlignment="left" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" />-->

                                    </Grid>
                                </Grp:GroupBox>

                                <Grp:GroupBox Header="Item Search" Margin ="4"  Grid.Column="1" HorizontalAlignment="Stretch">
                                    <Grid >
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="auto"></ColumnDefinition>
                                            <ColumnDefinition ></ColumnDefinition>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="auto"></RowDefinition>
                                            <RowDefinition Height="auto"></RowDefinition>
                                        </Grid.RowDefinitions>
                                        <TextBlock x:Name="Clinic" Text="Store" Margin="4" VerticalAlignment="Center" HorizontalAlignment="Right"></TextBlock>
                                        <inputcombo:AutoCompleteComboBox x:Name="cmbStore" SelectedItemBinding="{Binding clsStoreVO, Mode=TwoWay}" SelectedValuePath="StoreId" DataContext="{Binding}" Grid.Row="0" Grid.Column="1"  Margin="4" HorizontalAlignment="Stretch" SelectionChanged="cmbStore_SelectionChanged"></inputcombo:AutoCompleteComboBox>
                                        <ToggleButton x:Name="cmdGetItems"  Content="Get Items" Grid.Row="1" Grid.Column="4"  Background="#000000" Margin="4" Click="cmdGetItems_Click" HorizontalAlignment="left" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" />
                                    </Grid>
                                </Grp:GroupBox>
                            </Grid>
                        </toolkit:DockPanel>
                        <toolkit:DockPanel LastChildFill="True" x:Name="dpItemListHeader">
                            <data:DataGrid Visibility="Visible" Height="auto" Grid.ColumnSpan="10" HorizontalAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto"  AlternatingRowBackground="Silver" AutoGenerateColumns="false"  x:Name="dgexpItem" Grid.Column="0"  Margin="4" CellEditEnded="dgexpItem_CellEditEnded" CanUserSortColumns="False" >
                                <data:DataGrid.Columns>
                                    <data:DataGridTextColumn Binding="{Binding ReceivedNo}" Header="Received No." IsReadOnly="True"/>
                                    <data:DataGridTextColumn Binding="{Binding ItemName}" Header="Item Name" IsReadOnly="True"/>
                                    <data:DataGridTextColumn Binding="{Binding ItemCode}" Header="Item Code" IsReadOnly="True"/>
                                    <data:DataGridTextColumn Binding="{Binding BatchCode}" Header="Batch Code" IsReadOnly="True"/>
                                    <data:DataGridTextColumn Binding="{Binding BatchExpiryDate,Converter={StaticResource DateConverter},ConverterParameter={StaticResource ExpiryDateDisplayFormat}}"  Header="Expiry Date" IsReadOnly="True"/>
                                    <data:DataGridTextColumn Binding="{Binding ReceivedQty,StringFormat=0.00}" Header="Received Qty" IsReadOnly="True">
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>
                                    <data:DataGridTextColumn Binding="{Binding ReceivedQtyUOM}" Header="UOM"  IsReadOnly="True"/>
                                    <data:DataGridTextColumn Binding="{Binding AvailableStock,StringFormat=0.00}" Header="Available Stock" IsReadOnly="True">
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>
                                    <data:DataGridTextColumn Binding="{Binding StockUOM}" Header="UOM"  IsReadOnly="True"/>

                                    <data:DataGridTextColumn Binding="{Binding PurchaseRate,StringFormat=0.000}" Header="Cost Price" IsReadOnly="True"  Visibility="Collapsed">
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>

                                    <data:DataGridTextColumn Binding="{Binding TotalPurchaseRate,StringFormat=0.000}" Header="Total Cost Price" IsReadOnly="True"  Visibility="Collapsed">
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>

                                    <data:DataGridTextColumn Binding="{Binding ReturnQty,Mode=TwoWay,StringFormat=0.00}" Header="Return Quantity" IsReadOnly="True">
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>
                                    <data:DataGridTemplateColumn Header="UOM" IsReadOnly="True">
                                        <data:DataGridTemplateColumn.CellEditingTemplate>
                                            <DataTemplate>
                                                <HyperlinkButton IsEnabled="False" Content="{Binding SelectedUOM.Description,Mode=TwoWay}"  Click="HyperlinkButton_Click" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="4"></HyperlinkButton>
                                            </DataTemplate>
                                        </data:DataGridTemplateColumn.CellEditingTemplate>
                                    </data:DataGridTemplateColumn>

                                    <!--Added By Ashish-->
                                    <data:DataGridTextColumn Binding="{Binding PurchaseRate, Mode=TwoWay,StringFormat=0.00}" Header="Cost Price" IsReadOnly="True">
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>

                                    <data:DataGridTextColumn Binding="{Binding TotalPurchaseRate,StringFormat=0.00, Mode=OneWay}" Header="Cost Amount" IsReadOnly="True" />

                                    <data:DataGridTextColumn Binding="{Binding MRP, Mode=TwoWay,StringFormat=0.00}" Header="MRP" IsReadOnly="True">
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>

                                    <data:DataGridTextColumn Binding="{Binding AbatedMRP, Mode=TwoWay,StringFormat=0.00}" Header="Abated MRP" IsReadOnly="True" Visibility="Collapsed">
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>

                                    <data:DataGridTextColumn IsReadOnly="True"  Binding="{Binding MRPAmount, Mode=TwoWay,StringFormat=0.00}" Header="Amount" >
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>

                                    <data:DataGridTextColumn  Binding="{Binding ItemTax, Mode=TwoWay,StringFormat=0.00}" Header="Item Tax %" IsReadOnly="True">
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>

                                    <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding TaxAmount, Mode=TwoWay,StringFormat=0.00}" Header="Item Tax Amount" >
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>

                                    <data:DataGridTextColumn Binding="{Binding VATPercentage,StringFormat=0.00, Mode=TwoWay}"  Header="VAT%" IsReadOnly="True">
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>

                                    <data:DataGridTextColumn Binding="{Binding VATAmount, Mode=TwoWay,StringFormat=0.00}" Header="VAT Amount" IsReadOnly="True">
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>

                                    <data:DataGridTextColumn IsReadOnly="True"  Binding="{Binding NetAmount, Mode=TwoWay,StringFormat=0.00}" Header="Net Amount" >
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>
                                    <!--Ended By Ashish-->





                                    <data:DataGridTextColumn  IsReadOnly="True"  Binding="{Binding ConversionFactor, StringFormat=0.00000, Mode=TwoWay}" Header="Conversion Factor" Visibility="Collapsed" >
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>

                                    <data:DataGridTextColumn x:Name="dgrdtxtReturnRate" Binding="{Binding ReturnRate,Mode=TwoWay,StringFormat=0.000}" Header="Return Rate" Visibility="Collapsed" >
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                        <data:DataGridTextColumn.EditingElementStyle>
                                            <Style TargetType="TextBox">
                                                <Setter Property="MaxLength" Value="8"></Setter>
                                            </Style>
                                        </data:DataGridTextColumn.EditingElementStyle>
                                    </data:DataGridTextColumn>
                                    <data:DataGridTextColumn Binding="{Binding Amount,StringFormat=0.000}" Header="Amount" IsReadOnly="True" Visibility="Collapsed" >
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>
                                    <data:DataGridTextColumn Binding="{Binding VATPercentage,Mode=TwoWay,StringFormat=0.000}" Header="VAT%" Visibility="Collapsed" >
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>
                                    <data:DataGridTextColumn Binding="{Binding VATAmount,StringFormat=0.000}" Header="VAT Amount" IsReadOnly="True" Visibility="Collapsed" >
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>
                                    <data:DataGridTextColumn Binding="{Binding TaxPercentage,StringFormat=0.00}" Header=" Tax %" IsReadOnly="True" Visibility="Collapsed" >
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>
                                    <data:DataGridTextColumn Binding="{Binding TaxAmount,StringFormat=0.000}" Header="Tax Amount" IsReadOnly="True" Visibility="Collapsed" >
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>


                                    <data:DataGridTextColumn Binding="{Binding NetAmount,StringFormat=0.000}" Header="Net Amount" IsReadOnly="True" Visibility="Collapsed" >
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>
                                    <data:DataGridTemplateColumn>
                                        <data:DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <HyperlinkButton VerticalAlignment="Center" FontFamily="Webdings" Content="r"  Padding="5,0,5,0" IsTabStop="False" Click="cmdDeleteexpItem_Click"  x:Name="cmdDeleteexpItem" ToolTipService.ToolTip="Delete"></HyperlinkButton>
                                            </DataTemplate>
                                        </data:DataGridTemplateColumn.CellTemplate>
                                    </data:DataGridTemplateColumn>

                                    <data:DataGridTextColumn  IsReadOnly="True"  Binding="{Binding BaseConversionFactor, StringFormat=0.00000, Mode=TwoWay}" Header="Base Conversion Factor" Visibility="Collapsed" >
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>




                                    <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding BaseQuantity, StringFormat=0.00, Mode=TwoWay}" Header="Base Quantity" Visibility="Collapsed" >
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>


                                    <data:DataGridTextColumn IsReadOnly="True"  Binding="{Binding BaseRate, StringFormat=0.00, Mode=TwoWay}" Header="Base Cost Price" Visibility="Collapsed">
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>


                                    <data:DataGridTextColumn IsReadOnly="True"  Binding="{Binding BaseMRP, StringFormat=0.00, Mode=TwoWay}" Header="Base MRP" Visibility="Collapsed">
                                        <data:DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextAlignment" Value="Right"/>
                                            </Style>
                                        </data:DataGridTextColumn.ElementStyle>
                                    </data:DataGridTextColumn>





                                </data:DataGrid.Columns>
                            </data:DataGrid>
                        </toolkit:DockPanel>
                    </toolkit:DockPanel>
                </toolkit:DockPanel>
            </toolkit:DockPanel>
        </Grid>
    </toolkit:DockPanel>

</UserControl>
