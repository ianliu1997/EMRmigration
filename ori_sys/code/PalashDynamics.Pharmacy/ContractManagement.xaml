<UserControl x:Class="PalashDynamics.Pharmacy.ContractManagement"
    xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"  
       xmlns:Grp="clr-namespace:Groupbox;assembly=Groupbox"    
       xmlns:WMT="clr-namespace:PalashDynamics;assembly=PalashDynamics.WaterMarkTextBox"      
   xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit"
   xmlns:input="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Input" 
   xmlns:controlsToolkit="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Toolkit"
   xmlns:data="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"  
   xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls" 
   xmlns:inputcombo="clr-namespace:PalashDynamics.Controls;assembly=PalashDynamics.Controls.AutoCompleteComboBox"
   xmlns:local="clr-namespace:PalashDynamics.Converters;assembly=PalashDynamics.Converters" 
   xmlns:Controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Toolkit"
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  
    Width="Auto" Height="AUTO" Loaded="UserControl_Loaded">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/PalashDynamics;component/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <local:DateTimeConverter x:Key="DateConverter" />
            <local:VisiblilityConverter x:Key="VisiblilityConverter"/>

        </ResourceDictionary>
    </UserControl.Resources>
    <Grid Height="auto" Width="auto">

        <toolkit:DockPanel x:Name="MainDockPanel" LastChildFill="True" >

            <toolkit:DockPanel toolkit:DockPanel.Dock="Bottom" >
                <StackPanel x:Name="Footer" Orientation="Horizontal" VerticalAlignment="Center"   Margin="0,3,5,3" HorizontalAlignment="Right" Background="Transparent">
                    <StackPanel Orientation="Horizontal"  Margin="1" HorizontalAlignment="Right"  >

                        <ToggleButton x:Name="cmdNew" Content="New"   Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" Click="cmdNew_Click"></ToggleButton>
                        <ToggleButton x:Name="cmdSave" Content="Save"   Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" Click="cmdSave_Click"></ToggleButton>
                        <ToggleButton x:Name="cmdClose" Content="Close"   Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" Click="cmdClose_Click"></ToggleButton>

                    </StackPanel>
                </StackPanel>
            </toolkit:DockPanel>

            <Grid x:Name="PageContainer" >

                <Grid x:Name="FrontPanel" Background="White" Visibility="Collapsed" >
                    <controlsToolkit:DockPanel Margin="4" LastChildFill="True">
                        <Border  controlsToolkit:DockPanel.Dock="Top" BorderBrush="{StaticResource TabControlDarkerBorder}"   BorderThickness="1" CornerRadius="3,3,0,0" Background="Transparent">
                            <ContentControl VerticalAlignment="Center" Grid.ColumnSpan="4" FontSize="12" Content="List of Contract" Margin="-1" Style="{StaticResource Header}"     HorizontalAlignment="Stretch" />
                        </Border>
                        <Border BorderBrush="{StaticResource TabControlDarkerBorder}"  Margin="0,-1,0,0" BorderThickness="1" CornerRadius="0,0,3,3" Background="Transparent">
                            <controlsToolkit:DockPanel Margin="4" LastChildFill="True">
                                <Grid controlsToolkit:DockPanel.Dock="Top" >
                                    <Grid.RowDefinitions>
                                        <RowDefinition></RowDefinition>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition  />
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition  />
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition  />
                                        <ColumnDefinition Width="Auto"/>
                                       
                                        <!--<ColumnDefinition/>-->
                                    </Grid.ColumnDefinitions>


                                    <TextBlock Text="From Date" VerticalAlignment="Center" Margin="4" Grid.Row="0"></TextBlock>
                                    <controls:DatePicker x:Name="dtpFromDate" Grid.Column="1" Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Center" ></controls:DatePicker>

                                    <TextBlock Text="To Date" Grid.Column="2" VerticalAlignment="Center" Margin="4"></TextBlock>
                                    <controls:DatePicker x:Name="dtpToDate" Grid.Column="3" Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Center" ></controls:DatePicker>
                                    

                                    <Button  x:Name="cmdSearch" Click="cmdSearch_Click" ToolTipService.ToolTip="Search Goods" Grid.Column="6"  Grid.Row="0" Margin="4">
                                        <Image Source="/PalashDynamics;component/Icons/Search_b.JPG" Margin="4" Width="20" ></Image>
                                    </Button>
                                    <TextBlock Margin="4" Text="Supplier" VerticalAlignment="Center" Grid.Row="0" Grid.Column="4" />
                                    <inputcombo:AutoCompleteComboBox x:Name="cmbSearchSupplier" Grid.Column="5"  Grid.Row="0"  Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Center"></inputcombo:AutoCompleteComboBox>
                                </Grid>

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition></RowDefinition>
                                        <RowDefinition></RowDefinition>
                                        <RowDefinition Height="Auto"></RowDefinition>
                                    </Grid.RowDefinitions>

                                    <ToggleButton x:Name="CmdPrintBarcode" Content="Print Item Barcode"  Grid.Row="2" Background="#000000" Margin="4" Width="145" HorizontalAlignment="Right" Style="{StaticResource ToggleButtonStyle}" Visibility="Collapsed" Click="CmdPrintBarcode_Click"/>

                                    <controlsToolkit:DockPanel Margin="4" LastChildFill="True" Grid.Row="0">
                                        <data:DataPager x:Name="dgDataPager" controlsToolkit:DockPanel.Dock="Bottom" 
                                                        DisplayMode="FirstLastPreviousNext"  IsEnabled="True"                       
                                                        Source="{Binding}" 
                                                        AutoEllipsis="False" IsTotalItemCountFixed="False"  />
                                        <data:DataGrid  x:Name="dgGRNList" Margin="0,0,0,1" ItemsSource="{Binding}"  AutoGenerateColumns="False"  SelectionChanged="dgGRNList_SelectionChanged" CanUserSortColumns="False">
                                            <data:DataGrid.Columns >

                                                <data:DataGridTemplateColumn>
                                                    <data:DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <HyperlinkButton x:Name="Update" TabIndex="0" Padding="5,0,5,0"  Content="View" VerticalAlignment="Center" Click="Update_Click"  ></HyperlinkButton>
                                                        </DataTemplate>
                                                    </data:DataGridTemplateColumn.CellTemplate>
                                                </data:DataGridTemplateColumn>

                                                
                                                <data:DataGridTextColumn Binding="{Binding SupplierName,Mode=OneWay}"  Header="Supplier" IsReadOnly="True" />
                                                <data:DataGridTextColumn Binding="{Binding ServiceAgent,Mode=OneWay}"  Header="Service Agent" Visibility="Visible"  IsReadOnly="True" />
                                                <data:DataGridTextColumn Binding="{Binding ContractExpiryDate,Mode=OneWay, Converter ={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}"  Header="Contract Expiry Date" Visibility="Visible"  IsReadOnly="True" />
                                                <data:DataGridTextColumn Binding="{Binding SerialNo,Mode=OneWay}"  Header="Serial Number" IsReadOnly="True" />
                                                <data:DataGridTextColumn Binding="{Binding FromDate,Mode=OneWay, Converter ={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}"  Header="From Date" Visibility="Visible"  IsReadOnly="True" />
                                                <data:DataGridTextColumn Binding="{Binding EndDate,Mode=OneWay, Converter ={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}"  Header="End Date" Visibility="Visible"  IsReadOnly="True" />
                                               
                                            </data:DataGrid.Columns>
                                        </data:DataGrid>
                                    </controlsToolkit:DockPanel>
                                    <controlsToolkit:DockPanel Margin="4" LastChildFill="True" Grid.Row="1">
                                        <Border  controlsToolkit:DockPanel.Dock="Top" BorderBrush="{StaticResource TabControlDarkerBorder}"   BorderThickness="1" CornerRadius="3,3,0,0" Background="Transparent">
                                            <ContentControl VerticalAlignment="Center" Grid.ColumnSpan="4" FontSize="12" Content="Contract Items Details" Margin="0" Style="{StaticResource Header}"     HorizontalAlignment="Stretch" />
                                        </Border>
                                        <data:DataGrid  controlsToolkit:DockPanel.Dock="Bottom" x:Name="dgGRNItems" Margin="0,0,0,1"  ItemsSource="{Binding}"  AutoGenerateColumns="False" CanUserSortColumns="False">
                                            <data:DataGrid.Columns >
                                                <data:DataGridTextColumn IsReadOnly="True"  Header="Item Code"  Binding="{Binding ItemCode,Mode=TwoWay}"></data:DataGridTextColumn>
                                                <data:DataGridTextColumn  IsReadOnly="True"  Header="Item Name"  Binding="{Binding ItemName,Mode=TwoWay}"></data:DataGridTextColumn>



                                            </data:DataGrid.Columns>
                                        </data:DataGrid>
                                    </controlsToolkit:DockPanel>

                                </Grid>
                            </controlsToolkit:DockPanel>
                        </Border>
                    </controlsToolkit:DockPanel>
                </Grid>

                <Grid x:Name="BackPanel" Background="White" Visibility="Visible">
                    <controlsToolkit:DockPanel Margin="4" LastChildFill="True">
                        <Border  controlsToolkit:DockPanel.Dock="Top" BorderBrush="{StaticResource TabControlDarkerBorder}"   BorderThickness="1" CornerRadius="3,3,0,0" Background="Transparent">
                            <ContentControl VerticalAlignment="Center" Grid.ColumnSpan="4" FontSize="12" Content="List of Contract" Margin="-1" Style="{StaticResource Header}"     HorizontalAlignment="Stretch" />
                        </Border>
                        <Border BorderBrush="{StaticResource TabControlDarkerBorder}"  Margin="0,-1,0,0" BorderThickness="1" CornerRadius="0,0,3,3" Background="Transparent">
                            <controlsToolkit:DockPanel Margin="4" LastChildFill="True">

                                <Grid controlsToolkit:DockPanel.Dock="Top"   >
                                    <Grid.RowDefinitions>
                                        <RowDefinition></RowDefinition>
                                    </Grid.RowDefinitions>

                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition  />
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition  />
                                        <ColumnDefinition Width="Auto"/>

                                        <ColumnDefinition />
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>


                                    <TextBlock Text="From Date" VerticalAlignment="Center" Margin="4" Grid.Row="0"></TextBlock>
                                    <controls:DatePicker x:Name="gdtpFromDate" Grid.Column="1" Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Center" ></controls:DatePicker>

                                    <TextBlock Text="To Date" Grid.Column="2" VerticalAlignment="Center" Margin="4"></TextBlock>
                                    <controls:DatePicker x:Name="gdtpToDate" Grid.Column="3" Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Center" ></controls:DatePicker>

                                    <TextBlock Text="Store" Grid.Column="4" VerticalAlignment="Center" Margin="4"></TextBlock>
                                    <inputcombo:AutoCompleteComboBox x:Name="cmbStore" Grid.Column="5"  Grid.Row="0"  Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Center" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID"></inputcombo:AutoCompleteComboBox>

                                    <TextBlock Text="Supplier" Grid.Column="6" VerticalAlignment="Center" Margin="4"></TextBlock>
                                    <inputcombo:AutoCompleteComboBox x:Name="cmbSupplier" Grid.Column="7"  Grid.Row="0"  Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Center" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID"></inputcombo:AutoCompleteComboBox>

                                    <ToggleButton  x:Name="cmdGetGRN" Grid.Column="8"  Content="Get GRN"  Background="#000000" Margin="4" HorizontalAlignment="Right" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible"   VerticalAlignment="Center" Click="cmdGetGRN_Click" />
                                </Grid>


                                <controlsToolkit:DockPanel Margin="4" LastChildFill="True" controlsToolkit:DockPanel.Dock="Bottom" >
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>

                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                                            <ColumnDefinition></ColumnDefinition>
                                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                                            <ColumnDefinition></ColumnDefinition>
                                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                                            <ColumnDefinition></ColumnDefinition>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Service Agent" Margin="2" ></TextBlock>
                                        <TextBox Margin="2" Grid.Row="0" Grid.Column="1" MaxLength="10" x:Name="txtServiceAgent" ></TextBox>

                                        <!--<TextBlock Grid.Row="0" Grid.Column="2" Text="Total VAT Amount" Margin="2" ></TextBlock>
                            <TextBox Margin="2"  Grid.Row="0" Grid.Column="3 " MaxLength="50" IsReadOnly="True" x:Name="txtTotalVAT"></TextBox>-->

                                        <TextBlock Grid.Row="0" Grid.Column="2" Text="Contract Expiry Date" Margin="2" ></TextBlock>
                                        <controls:DatePicker x:Name="dpContractExpiryDate" Margin="2" Grid.Row="0" Grid.Column="3"  HorizontalAlignment="Stretch" ></controls:DatePicker>

                                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Start Date" Margin="2" ></TextBlock>
                                        <sdk:DatePicker Margin="2"  Grid.Row="1" Grid.Column="1 " x:Name="dpStartDate" />
                                        <TextBlock Grid.Row="0" Grid.Column="4" Text="Serial No." Margin="2" ></TextBlock>
                                        <TextBox Margin="2" Grid.Row="0" Grid.Column="5"  x:Name="txtSerialNo"  TextAlignment="Right" ></TextBox>
                                        <TextBlock Margin="4" Text="End Date" Grid.Column="2" Grid.Row="1" />
                                        <sdk:DatePicker Margin="2"  Grid.Row="1" Grid.Column="3 " x:Name="dpEndDate" />
                                        <CheckBox Content="Finalise Contract" Height="16" HorizontalAlignment="Left" Margin="0,4,0,0" x:Name="IsFinalised" VerticalAlignment="Top" Grid.Column="5" Grid.Row="1" />
                                    </Grid>
                                </controlsToolkit:DockPanel>

                                <controlsToolkit:DockPanel Margin="4" LastChildFill="True" >
                                    <Border  controlsToolkit:DockPanel.Dock="Top" BorderBrush="{StaticResource TabControlDarkerBorder}"   BorderThickness="1" CornerRadius="3,3,0,0" Background="Transparent">
                                        <ContentControl VerticalAlignment="Center" Grid.ColumnSpan="4" FontSize="12" Content="Contract Items Selected" Margin="0" Style="{StaticResource Header}"     HorizontalAlignment="Stretch" />
                                    </Border>
                                    <data:DataGrid  controlsToolkit:DockPanel.Dock="Bottom" x:Name="dgCAGRNItems" Margin="0,0,0,1"  ItemsSource="{Binding}"  AutoGenerateColumns="False" CanUserSortColumns="False">
                                        <data:DataGrid.Columns >
                                            <!--<data:DataGridTemplateColumn>
                                            <data:DataGridTemplateColumn.CellTemplate>
                                               
                                                <DataTemplate>
                                                    <HyperlinkButton VerticalAlignment="Center"  Content="View"  Padding="5,0,5,0" Click="Edit_Click"  x:Name="hlbDeleteSponsor"></HyperlinkButton>
                                                </DataTemplate>
                                            </data:DataGridTemplateColumn.CellTemplate>
                                        </data:DataGridTemplateColumn>-->
                                            <data:DataGridTextColumn Binding="{Binding ItemName, Mode=OneWay}" Header="Item Name" IsReadOnly="True"/>
                                            <data:DataGridTextColumn Binding="{Binding ItemCode,Mode=OneWay}"  Header="Item Code" IsReadOnly="True" />
                                            <data:DataGridTemplateColumn>
                                                <data:DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <HyperlinkButton VerticalAlignment="Center" FontFamily="Webdings" Content="r"  Padding="5,0,5,0" IsTabStop="False" Click ="cmdDelete_Click"  x:Name="cmdDelete" ToolTipService.ToolTip="Delete"></HyperlinkButton>
                                                    </DataTemplate>
                                                </data:DataGridTemplateColumn.CellTemplate>
                                            </data:DataGridTemplateColumn>


                                        </data:DataGrid.Columns>
                                    </data:DataGrid>
                                </controlsToolkit:DockPanel>





                            </controlsToolkit:DockPanel>
                        </Border>

                    </controlsToolkit:DockPanel>

                </Grid>


            </Grid>
        </toolkit:DockPanel>
    </Grid>
</UserControl>
