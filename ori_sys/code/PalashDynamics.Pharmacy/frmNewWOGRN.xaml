<UserControl x:Class="PalashDynamics.Pharmacy.frmNewWOGRN"
        xmlns:Grp="clr-namespace:Groupbox;assembly=Groupbox"    
       xmlns:WMT="clr-namespace:PalashDynamics;assembly=PalashDynamics.WaterMarkTextBox"      
   xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit"
   xmlns:input="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Input" 
   xmlns:controlsToolkit="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Toolkit"
   xmlns:data="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"  
   xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls" 
   xmlns:inputcombo="clr-namespace:PalashDynamics.Controls;assembly=PalashDynamics.Controls.AutoCompleteComboBox"
             xmlns:local="clr-namespace:PalashDynamics.Converters;assembly=PalashDynamics.Converters" 
             xmlns:Controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Toolkit"
  xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"  
           xmlns:Converter="clr-namespace:PalashDynamics.Converters;assembly=PalashDynamics.Converters" 
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  
    Width="auto" Height="AUTO" Loaded="UserControl_Loaded"  >
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/PalashDynamics;component/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <local:DateTimeConverter x:Key="DateConverter" />
            <local:VisiblilityConverter x:Key="VisiblilityConverter"/>
<Converter:ToggleBooleanValueConverter x:Key="NegateValueConverter"/>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid Height="auto" Width="auto">

        <toolkit:DockPanel x:Name="MainDockPanel" LastChildFill="True" >

            <toolkit:DockPanel toolkit:DockPanel.Dock="Bottom" >
                <StackPanel x:Name="Footer" Orientation="Horizontal" VerticalAlignment="Center"   Margin="0,3,5,3" HorizontalAlignment="Right" Background="Transparent">
                    <StackPanel Orientation="Horizontal"  Margin="1" HorizontalAlignment="Right"  >

                        <ToggleButton x:Name="cmdNew" Content="New" Click="cmdNew_Click"  Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" ></ToggleButton>
                        <ToggleButton x:Name="cmdPrint" Content="Print" Click="cmdPrint_Click"  Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" ></ToggleButton>
                        <ToggleButton x:Name="cmdSave" Content="Save" Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}"  Click="cmdSave_Click"></ToggleButton>
                        <ToggleButton x:Name="cmdDraft" Content="Save as Draft" Width="100" Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}"  Click="cmdDraft_Click"></ToggleButton>
                        <ToggleButton Content="Cancel" x:Name="cmdCancel" Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}"  Click="cmdCancel_Click"></ToggleButton>
                    </StackPanel>
                </StackPanel>
            </toolkit:DockPanel>

            <Grid x:Name="PageContainer" >

                <Grid x:Name="LayoutRoot1" Background="White" Visibility="Visible">
                    <controlsToolkit:DockPanel Margin="4" LastChildFill="True">
                        <Border  controlsToolkit:DockPanel.Dock="Top" BorderBrush="{StaticResource TabControlDarkerBorder}"   BorderThickness="1" CornerRadius="3,3,0,0" Background="Transparent">
                            <ContentControl VerticalAlignment="Center" Grid.ColumnSpan="4" FontSize="12" Content="List of GRN" Margin="-1" Style="{StaticResource Header}"     HorizontalAlignment="Stretch" />
                        </Border>
                        <Border BorderBrush="{StaticResource TabControlDarkerBorder}"  Margin="0,-1,0,0" BorderThickness="1" CornerRadius="0,0,3,3" Background="Transparent">
                            <controlsToolkit:DockPanel Margin="4" LastChildFill="True">

                                <!--<Grid controlsToolkit:DockPanel.Dock="Top">
                                    <Grid.RowDefinitions>
                                        <RowDefinition></RowDefinition>
                                    </Grid.RowDefinitions>

                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <Grp:GroupBox Header="Date" Margin="2" Grid.Row="0" Grid.Column="0">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition></RowDefinition>
                                            </Grid.RowDefinitions>

                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition />
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition/>

                                            </Grid.ColumnDefinitions>

                                            <TextBlock Text="From Date" Grid.Column="0" VerticalAlignment="Center" Margin="4"></TextBlock>
                                            <controls:DatePicker x:Name="dtpFromDate" Grid.Column="1" Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Center" ></controls:DatePicker>

                                            <TextBlock Text="To Date" Grid.Column="2" VerticalAlignment="Center" Margin="4"></TextBlock>
                                            <controls:DatePicker x:Name="dtpToDate" Grid.Column="3" Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Center" ></controls:DatePicker>

                                        </Grid>


                                    </Grp:GroupBox>

                                    <Grp:GroupBox Header="Supplier" Margin="2" Grid.Row="0" Grid.Column="1" Width="300">
                                        <Grid >
                                            <Grid.RowDefinitions>
                                                <RowDefinition></RowDefinition>
                                            </Grid.RowDefinitions>

                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>

                                            <TextBlock Text="Supplier" Grid.Column="0" VerticalAlignment="Center" Margin="4"></TextBlock>
                                            <inputcombo:AutoCompleteComboBox x:Name="cmbSearchSupplier"   Grid.Row="0"  Grid.Column="1"  HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="4"></inputcombo:AutoCompleteComboBox>

                                        </Grid>
                                    </Grp:GroupBox>
                                    <StackPanel HorizontalAlignment="Left" VerticalAlignment="Bottom" Grid.Row="0" Grid.Column="2" Margin="4"  Orientation="Horizontal">
                                        <Button  x:Name="cmdSearch" Click="cmdSearch_Click" ToolTipService.ToolTip="Search Goods Received Note">
                                            <Image Source="/PalashDynamics;component/Icons/Search_b.JPG" Margin="4" Width="20" ></Image>
                                        </Button>
                                    </StackPanel>


                                </Grid>-->

                                <Grid controlsToolkit:DockPanel.Dock="Top">
                                    <Grid.RowDefinitions>
                                        <RowDefinition></RowDefinition>
                                    </Grid.RowDefinitions>

                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition/>
                                        <ColumnDefinition Width="Auto"/>
                                        
                                    </Grid.ColumnDefinitions>


                                    <TextBlock Text="From Date" Grid.Column="0" VerticalAlignment="Center" Margin="4"></TextBlock>
                                    <controls:DatePicker x:Name="dtpFromDate" Grid.Column="1" Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Center" SelectedDateChanged="dtpFromDate_SelectedDateChanged" ></controls:DatePicker>

                                    <TextBlock Text="To Date" Grid.Column="2" VerticalAlignment="Center" Margin="4"></TextBlock>
                                    <controls:DatePicker x:Name="dtpToDate" Grid.Column="3" Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Center" SelectedDateChanged="dtpToDate_SelectedDateChanged" ></controls:DatePicker>

                                    <TextBlock Text="Supplier" Grid.Column="4" VerticalAlignment="Center" Margin="4"></TextBlock>
                                    <inputcombo:AutoCompleteComboBox x:Name="cmbSearchSupplier"   Grid.Row="0"  Grid.Column="5"  Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Center" SelectionChanged="cmbSearchSupplier_SelectionChanged"></inputcombo:AutoCompleteComboBox>

                                    <TextBlock  VerticalAlignment="Center" HorizontalAlignment="Right" Text="GRN Number" Margin="2" Grid.Row="0" Grid.Column="6"></TextBlock>
                                    <!--<sdk:AutoCompleteBox Grid.Row="0" Grid.Column="7"  x:Name="txtGRNNo" Text="{Binding Path=Description, Mode=TwoWay}" Margin="4" HorizontalAlignment="Stretch"  KeyDown="txtAutocompleteText_KeyDown" TextChanged="txtAutocompleteText_TextChanged"/>-->


                                    <sdk:AutoCompleteBox x:Name="txtGRNNo"   Grid.Row="0" Grid.Column="7"  Margin="4"  FilterMode="StartsWith"  ValueMemberPath="Description" KeyUp="cmbItemName_KeyUp">
                                        <sdk:AutoCompleteBox.ItemTemplate>
                                            <DataTemplate>
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="200" ></ColumnDefinition>
                                                    </Grid.ColumnDefinitions>
                                                    <TextBlock VerticalAlignment="Center" HorizontalAlignment="Left" Text="{Binding Path=Description,Mode=OneWay}" Margin="4"  Grid.Column="0"></TextBlock>
                                                </Grid>
                                            </DataTemplate>
                                        </sdk:AutoCompleteBox.ItemTemplate>
                                    </sdk:AutoCompleteBox>
                                    
                                    <Button  x:Name="cmdSearch" Click="cmdSearch_Click" ToolTipService.ToolTip="Search Goods Received Note" Grid.Column="8">
                                        <Image Source="/PalashDynamics;component/Icons/Search_b.JPG" Margin="4" Width="20" ></Image>
                                    </Button>

                                </Grid>

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition></RowDefinition>
                                        <RowDefinition></RowDefinition>
                                        <RowDefinition Height="Auto"></RowDefinition>
                                    </Grid.RowDefinitions>

                                    <ToggleButton x:Name="CmdPrintBarcode" Content="Print Item Barcode"  Grid.Row="2" Background="#000000" Margin="4" Width="145" HorizontalAlignment="Right" Style="{StaticResource ToggleButtonStyle}" Visibility="Collapsed" Click="CmdPrintBarcode_Click"/>

                                    <controlsToolkit:DockPanel Margin="4" LastChildFill="True" Grid.Row="0">
                                        <data:DataPager x:Name="dgDataPager" controlsToolkit:DockPanel.Dock="Bottom" 
                                                        DisplayMode="FirstLastPreviousNext"  IsEnabled="True"                       
                                                        Source="{Binding}" 
                                                        AutoEllipsis="False" IsTotalItemCountFixed="False"  />
                                        <data:DataGrid  x:Name="dgGRNList" Margin="0,0,0,1" ItemsSource="{Binding}"  AutoGenerateColumns="False"  SelectionChanged="dgGRNList_SelectionChanged" CanUserSortColumns="False">
                                            <data:DataGrid.Columns >

                                                <data:DataGridTemplateColumn>
                                                    <data:DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <HyperlinkButton x:Name="Update" TabIndex="0" Padding="5,0,5,0"  Content="View" VerticalAlignment="Center" Click="Update_Click"  ></HyperlinkButton>
                                                        </DataTemplate>
                                                    </data:DataGridTemplateColumn.CellTemplate>
                                                </data:DataGridTemplateColumn>

                                                <data:DataGridTextColumn Binding="{Binding Date,Mode=OneWay,Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}"  Header="Date" IsReadOnly="True" />
                                                <data:DataGridTextColumn Binding="{Binding GRNNO, Mode=OneWay}" Header="GRN No." IsReadOnly="True"/>
                                                <data:DataGridTextColumn Binding="{Binding GRNTypeName,Mode=OneWay}"  Header="GRN Type" IsReadOnly="True" />
                                                <data:DataGridTextColumn Binding="{Binding StoreName,Mode=OneWay}"  Header="Store" IsReadOnly="True" />
                                                <data:DataGridTextColumn Binding="{Binding SupplierName,Mode=OneWay}"  Header="Supplier" IsReadOnly="True" />
                                                <!--<data:DataGridTextColumn Binding="{Binding SupplierName,Mode=OneWay}"  Header="Supplier" Visibility="Visible"  IsReadOnly="True" />-->
                                                <!--<data:DataGridTextColumn Binding="{Binding PONO,Mode=OneWay}"  Header="PONo" Visibility="Visible"  IsReadOnly="True" />
                                                <data:DataGridTextColumn Binding="{Binding PODate,Mode=OneWay, Converter ={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}"  Header="PODate" Visibility="Visible"  IsReadOnly="True" />-->
                                                <data:DataGridTextColumn Binding="{Binding PONowithDate,Mode=OneWay}"  Header="WO No. - Date" Visibility="Visible"  IsReadOnly="True" />
                                                <data:DataGridTextColumn Binding="{Binding IndentNowithDate,Mode=OneWay}"  Header="Purchase Requisition No. - Date" Visibility="Visible"  IsReadOnly="True" />
                                                <data:DataGridTemplateColumn>
                                                    <data:DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <HyperlinkButton x:Name="ViewAttachment" VerticalAlignment="Center" Content="View" Padding="5,0,5,0" Visibility="{Binding FileAttached,Mode=TwoWay}" Click="ViewAttachment_Click"></HyperlinkButton>
                                                        </DataTemplate>
                                                    </data:DataGridTemplateColumn.CellTemplate>
                                                </data:DataGridTemplateColumn>

                                                <sdk:DataGridTemplateColumn Header="Freeze GRN">
                                                    <sdk:DataGridTemplateColumn.CellEditingTemplate>
                                                        <DataTemplate>
                                                            <!--<CheckBox x:Name="Freez" VerticalAlignment="Center" HorizontalAlignment="Center" IsChecked="{Binding Freezed,Mode=TwoWay}" IsEnabled="{Binding  IsEnabledFreezed,Mode=TwoWay}"  ></CheckBox>-->
                                                            <CheckBox x:Name="Freez" VerticalAlignment="Center" HorizontalAlignment="Center" IsChecked="{Binding Freezed,Mode=TwoWay}" IsEnabled='False' ></CheckBox>
                                                        </DataTemplate>
                                                    </sdk:DataGridTemplateColumn.CellEditingTemplate>
                                                </sdk:DataGridTemplateColumn>

                                                <!--<data:DataGridCheckBoxColumn Binding="{Binding Status}" Header="Status" Width="70"  />-->
                                                <!--<data:DataGridTemplateColumn Header="Status" IsReadOnly="True">
                                                    <data:DataGridTemplateColumn.CellTemplate >
                                                        <DataTemplate >
                                                            <CheckBox Margin="10,2,10,2"  x:Name="chkStatus" IsChecked="{Binding Status,Mode=TwoWay}" VerticalAlignment="Center" HorizontalAlignment="Center" IsEnabled="False"></CheckBox >
                                                        </DataTemplate>
                                                    </data:DataGridTemplateColumn.CellTemplate>
                                                </data:DataGridTemplateColumn>-->
                                            </data:DataGrid.Columns>
                                        </data:DataGrid>
                                    </controlsToolkit:DockPanel>
                                    <controlsToolkit:DockPanel Margin="4" LastChildFill="True" Grid.Row="1">
                                        <Border  controlsToolkit:DockPanel.Dock="Top" BorderBrush="{StaticResource TabControlDarkerBorder}"   BorderThickness="1" CornerRadius="3,3,0,0" Background="Transparent">
                                            <ContentControl VerticalAlignment="Center" Grid.ColumnSpan="4" FontSize="12" Content="GRN Items Details" Margin="0" Style="{StaticResource Header}"     HorizontalAlignment="Stretch" />
                                        </Border>
                                        <data:DataGrid  controlsToolkit:DockPanel.Dock="Bottom" x:Name="dgGRNItems" Margin="0,0,0,1"  ItemsSource="{Binding}"  AutoGenerateColumns="False" CanUserSortColumns="False">
                                            <data:DataGrid.Columns >
                                                <!--<data:DataGridTemplateColumn>
                                            <data:DataGridTemplateColumn.CellTemplate>
                                               
                                                <DataTemplate>
                                                    <HyperlinkButton VerticalAlignment="Center"  Content="View"  Padding="5,0,5,0" Click="Edit_Click"  x:Name="hlbDeleteSponsor"></HyperlinkButton>
                                                </DataTemplate>
                                            </data:DataGridTemplateColumn.CellTemplate>
                                        </data:DataGridTemplateColumn>-->
                                                <data:DataGridTextColumn Binding="{Binding ItemName, Mode=OneWay}" Header="Item Name" IsReadOnly="True"/>
                                                <data:DataGridTextColumn Binding="{Binding BatchCode,Mode=OneWay}"  Header="Batch Code" IsReadOnly="True" />
                                                <!--Batch Code-->
                                                <data:DataGridTextColumn Binding="{Binding ExpiryDate,Mode=OneWay, Converter={StaticResource DateConverter},ConverterParameter={StaticResource ExpiryDateDisplayFormat}}"  Header="Expiry Date" IsReadOnly="True" />
                                                <data:DataGridTextColumn Binding="{Binding WONO,Mode=OneWay}"  Header="" Visibility="Collapsed" />
                                                <data:DataGridTextColumn Binding="{Binding TotalItemQuantity,StringFormat=0.00, Mode=OneWay}"  Header="Quantity" IsReadOnly="True" >
                                                    <data:DataGridTextColumn.ElementStyle>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="TextAlignment" Value="Right"/>
                                                        </Style>
                                                    </data:DataGridTextColumn.ElementStyle>
                                                </data:DataGridTextColumn>
                                                <data:DataGridTextColumn Binding="{Binding Rate,Mode=OneWay, StringFormat=0.000}"  Header="Rate" IsReadOnly="True" >
                                                    <data:DataGridTextColumn.ElementStyle>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="TextAlignment" Value="Right"/>
                                                        </Style>
                                                    </data:DataGridTextColumn.ElementStyle>
                                                </data:DataGridTextColumn>
                                                <data:DataGridTextColumn Binding="{Binding NetAmount,Mode=OneWay, StringFormat=0.000}"  Header="Net Amount" IsReadOnly="True" >
                                                    <data:DataGridTextColumn.ElementStyle>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="TextAlignment" Value="Right"/>
                                                        </Style>
                                                    </data:DataGridTextColumn.ElementStyle>
                                                </data:DataGridTextColumn>
                                                <!--<data:DataGridTextColumn Binding="{Binding BarCode,Mode=TwoWay}" IsReadOnly="True" Header="BarCode"></data:DataGridTextColumn>-->
                                                <data:DataGridTextColumn Binding="{Binding UnitRate,Mode=TwoWay}" IsReadOnly="True" Header="UnitRate" Visibility="Collapsed"></data:DataGridTextColumn>
                                                <data:DataGridTextColumn Binding="{Binding UnitMRP,Mode=TwoWay}" IsReadOnly="True" Header="UnitMRP" Visibility="Collapsed"></data:DataGridTextColumn>
                                            </data:DataGrid.Columns>
                                        </data:DataGrid>
                                    </controlsToolkit:DockPanel>

                                </Grid>
                            </controlsToolkit:DockPanel>
                        </Border>
                    </controlsToolkit:DockPanel>
                </Grid>

                <Grid x:Name="LayoutRoot2" Visibility="Collapsed" Background="White" Grid.Row="1">

                    <toolkit:DockPanel LastChildFill="True">

                        <toolkit:DockPanel toolkit:DockPanel.Dock="Top" LastChildFill="True">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition></RowDefinition>
                                    <RowDefinition></RowDefinition>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*"></ColumnDefinition>
                                    <ColumnDefinition ></ColumnDefinition>
                                    <ColumnDefinition ></ColumnDefinition>
                                </Grid.ColumnDefinitions>

                                <Grp:GroupBox Header="GRN Details" Margin ="4"   Grid.Column="0" HorizontalAlignment="Stretch">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width ="Auto"></ColumnDefinition>
                                            <ColumnDefinition ></ColumnDefinition>
                                            <ColumnDefinition Width ="Auto"></ColumnDefinition>
                                            <ColumnDefinition ></ColumnDefinition>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock x:Name="GRNO" HorizontalAlignment="Right" VerticalAlignment="Center"  Grid.Column="0" Grid.Row="0" Text="GRN No." Margin="4" ></TextBlock>
                                        <TextBox x:Name="txtgrno" VerticalAlignment="Center"  HorizontalAlignment="Stretch"  Grid.Column="1" Grid.Row="0" Margin="4" IsReadOnly="True" IsTabStop="False" Text="{Binding GRNNO, Mode=TwoWay}" ></TextBox>

                                        <TextBlock x:Name="date" HorizontalAlignment="right" VerticalAlignment="Center"  Grid.Column="2" Grid.Row="0" Text="Date" Margin="4" ></TextBlock>
                                        <controls:DatePicker x:Name="dpgrDt" Grid.Row="0" Grid.Column="3" Margin="4" HorizontalAlignment="Stretch" IsEnabled="False" VerticalAlignment="Center" SelectedDate="{Binding Date, Mode=TwoWay}"></controls:DatePicker>

                                        <TextBlock x:Name="Store" HorizontalAlignment="right" VerticalAlignment="Center" Grid.Column="0" Grid.Row="1" Text="Store" Margin="4" ></TextBlock>
                                        <inputcombo:AutoCompleteComboBox x:Name="cmbStore"  HorizontalAlignment="Stretch" VerticalAlignment="Center" Grid.Column="1" Grid.Row="1" Margin="4" SelectionChanged="cmbStore_SelectionChanged" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID" ></inputcombo:AutoCompleteComboBox>

                                        <TextBlock x:Name="Supplier" HorizontalAlignment="Right"  Grid.Column="2" Grid.Row="1" Text="Supplier" Margin="4" VerticalAlignment="Center"></TextBlock>
                                        <inputcombo:AutoCompleteComboBox x:Name="cmbSupplier"   Grid.Row="1"  Grid.Column="3"  Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Center" SelectedItemBinding="{Binding MasterListItem, Mode=TwoWay}" SelectedValuePath="ID" SelectionChanged="cmbSupplier_SelectionChanged"></inputcombo:AutoCompleteComboBox>

                                        <!--<Grp:GroupBox  Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Height="auto" Width="auto" Header="Pay Mode"  HorizontalAlignment="Stretch" Margin="4,2,0,0">
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition ></ColumnDefinition>
                                                                <ColumnDefinition ></ColumnDefinition>
                                                          </Grid.ColumnDefinitions>-->
                                        <TextBlock HorizontalAlignment="Right"  Grid.Column="0" Grid.Row="2" Text="Pay Mode" Margin="4" VerticalAlignment="Center"></TextBlock>
                                        <StackPanel Orientation="Horizontal"  Grid.Column="1" Grid.Row="2">
                                            <RadioButton Grid.Column="1" Grid.Row="2" x:Name="rdbCashMode" HorizontalAlignment="Stretch" Content="GRC "  Margin="0"  VerticalAlignment="Center" GroupName="PMode" IsChecked="{Binding GRNType, Mode=TwoWay}" Click="rbPayMode_Click" ></RadioButton>
                                            <RadioButton Grid.Column="2" Grid.Row="2" x:Name="rdbCreditMode" HorizontalAlignment="Stretch"  Content="Credit"  Margin="0"    VerticalAlignment="Center" GroupName="PMode" Click="rbPayMode_Click"  IsChecked="{Binding GRNType, Mode=TwoWay}"></RadioButton>
                                        </StackPanel>
                                        <!--</Grid>
                                                    </Grp:GroupBox>-->

                                        <TextBlock x:Name="GateEntryNo" HorizontalAlignment="Right"  VerticalAlignment="Center" Grid.Column="2" Grid.Row="2" Text="Gate Entry No" Margin="0,4,4,4"></TextBlock>
                                        <TextBox x:Name="txtGateEntryNo"  HorizontalAlignment="Stretch"  VerticalAlignment="Center"    Grid.Column="3" Grid.Row="2" Margin="4" Text="{Binding GatePassNo, Mode=TwoWay}"  ></TextBox>

                                    </Grid>


                                </Grp:GroupBox>

                                <Grp:GroupBox Header="Invoice Details" Margin ="2,4"  Grid.Column="1" HorizontalAlignment="Stretch">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                                            <ColumnDefinition></ColumnDefinition>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock x:Name="InvoiceNo" HorizontalAlignment="Center"  Grid.Column="0" Grid.Row="1" Text="Invoice No." Margin="4" VerticalAlignment="Center"></TextBlock>
                                        <TextBox x:Name="txtinvno" VerticalAlignment="Center" HorizontalAlignment="Stretch"    Grid.Column="2" Grid.Row="1" Margin="4" Text="{Binding InvoiceNo, Mode=TwoWay}" ></TextBox>

                                        <TextBlock x:Name="InvoiceDt" HorizontalAlignment="Right" Grid.Column="0" Grid.Row="0" Text="Invoice Date" Margin="4"  VerticalAlignment="Center"></TextBlock>
                                        <controls:DatePicker x:Name="dpInvDt" Grid.Row="0" Grid.Column="1" Margin="4" HorizontalAlignment="Stretch"  VerticalAlignment="Center" SelectedDate="{Binding InvoiceDate, Mode=TwoWay}"></controls:DatePicker>

                                        <!--Added By Ashish Thombre-->
                                        <ToggleButton  x:Name="cmdAddAttachment" Grid.Column="1" Grid.Row="2" Content="Attach Invoice" Width="110" Background="#000000" Margin="4" HorizontalAlignment="Left" Style="{StaticResource ToggleButtonStyle}" Click="cmdAddAttachment_Click"/>

                                    </Grid>
                                </Grp:GroupBox>

                                <Grp:GroupBox  Header="Get Items" Margin="2,4" Grid.Column="2" HorizontalAlignment="Stretch">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <!--<RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>-->
                                            <RowDefinition Height="Auto"></RowDefinition>
                                        </Grid.RowDefinitions>

                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                                            <ColumnDefinition></ColumnDefinition>
                                        </Grid.ColumnDefinitions>


                                        <!--<RadioButton Grid.Column="0" x:Name="rdbDirectPur" Content="Direct Purchase" Visibility="Collapsed" Margin="4"    GroupName="PType" VerticalAlignment="Center" IsChecked="True" HorizontalAlignment="Stretch"></RadioButton>-->

                                        <RadioButton Grid.Column="0" Grid.Row="1" x:Name="rdbPo" Content="Against WO"  Margin="4"   GroupName="PType"  Checked="rbGRNType_Checked" VerticalAlignment="Center" HorizontalAlignment="Stretch" ></RadioButton>

                                        <TextBox x:Name="txtPONO" Grid.Column="1" Grid.Row="1" HorizontalAlignment="Stretch"  VerticalAlignment="Center"  Margin="1" IsReadOnly="True" IsTabStop="False" Text="{Binding PONO, Mode=TwoWay}" AcceptsReturn="true" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" TextWrapping="Wrap" Height="50" ></TextBox>
                                        <RadioButton Grid.Column="0" x:Name="rdbDirectPur" Content="Direct Purchase"  Margin="4"   IsChecked="True"  GroupName="PType" Checked="rbGRNType_Checked" VerticalAlignment="Center"  HorizontalAlignment="Stretch" Visibility="Visible"></RadioButton>
                                        <ToggleButton  x:Name="cmdGetItem" Grid.Column="1" Grid.Row="2" Content="Get Items"  Background="#000000" Margin="4" HorizontalAlignment="Right" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible"  Click="lnkAddItems_Click" VerticalAlignment="Center" Grid.RowSpan="2" />
                                        <CheckBox Grid.Row="2" Grid.Column="0" Content="Consignment" Margin="4" IsChecked="{Binding IsConsignment}" x:Name="chkConsignment" Visibility="Collapsed" Click="chkConsignment_Click"></CheckBox>
                                    </Grid>

                                </Grp:GroupBox>


                                <Grp:GroupBox x:Name="BdrItemSearch" Header="Items Search" Margin="2,4" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3" HorizontalAlignment="Stretch">
                                    <StackPanel x:Name="ItemSearchStackPanel"></StackPanel>
                                </Grp:GroupBox>

                            </Grid>

                        </toolkit:DockPanel>

                        <toolkit:DockPanel toolkit:DockPanel.Dock="Bottom">
                            <Border BorderBrush="{StaticResource TabControlDarkerBorder}" Height="auto"  BorderThickness="1" CornerRadius="3,3,3,3" Margin="4"  Background="Transparent">
                                <Grid Margin="4">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="auto"></ColumnDefinition>
                                        <ColumnDefinition></ColumnDefinition>
                                        <ColumnDefinition Width="auto"></ColumnDefinition>
                                        <ColumnDefinition ></ColumnDefinition>
                                        <ColumnDefinition Width="auto"></ColumnDefinition>
                                        <ColumnDefinition ></ColumnDefinition>
                                        <ColumnDefinition Width="auto"></ColumnDefinition>
                                        <ColumnDefinition></ColumnDefinition>
                                        <ColumnDefinition Width="auto"></ColumnDefinition>
                                        <ColumnDefinition></ColumnDefinition>

                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition></RowDefinition>
                                        <RowDefinition></RowDefinition>

                                    </Grid.RowDefinitions>

                                    <TextBlock Text="VAT Amount" Width="Auto" HorizontalAlignment="Left"  Height="auto" Grid.Column="0" Grid.Row="1" VerticalAlignment="Center" x:Name="Vatamt" Margin="4"></TextBlock>
                                    <TextBox x:Name="txtVatamt" Margin="4" Grid.Column="1" Grid.Row="1" HorizontalAlignment="Stretch" TextAlignment="Right"  IsReadOnly="True" IsTabStop="False" Text="{Binding TotalVAT, Mode=TwoWay, StringFormat=0.000}" ></TextBox>

                                    <TextBlock Text="C.Disc. Amount" Grid.Row="0" Grid.Column="2" Width="auto" Height="20" VerticalAlignment="Center" x:Name="cdiscamt" Margin="4"></TextBlock>
                                    <TextBox x:Name="txtcdiscamt"  HorizontalAlignment="Stretch" Margin="4"  Grid.Row="0" Grid.Column="3" TextAlignment="Right"  IsReadOnly="True" IsTabStop="False" Text="{Binding TotalCDiscount, Mode=TwoWay, StringFormat=0.00}"></TextBox>

                                    <TextBlock Text="Sch.Disc. Amount" Grid.Column="4" Width="auto" Height="auto" VerticalAlignment="Center" x:Name="schdiscamt" Margin="4"></TextBlock>
                                    <TextBox x:Name="txthdiscamt" Grid.Column="5" HorizontalAlignment="Stretch"  Margin="4" TextAlignment="Right"  IsReadOnly="True" IsTabStop="False" Text="{Binding TotalSchDiscount, Mode=TwoWay, StringFormat=0.00}"></TextBox>

                                    <TextBlock Text="Total Amount" Width="auto" Grid.Column="0" Grid.Row="0" Height="auto" VerticalAlignment="Center" x:Name="totamt" Margin="4"></TextBlock>
                                    <TextBox x:Name="txttotcamt" Margin="4" Grid.Column="1" Grid.Row="0" HorizontalAlignment="Stretch" TextAlignment="Right"  IsReadOnly="True" IsTabStop="False" Text="{Binding TotalAmount, Mode=TwoWay, StringFormat=0.000}"></TextBox>

                                    <TextBlock Text="Net Amount" Width="auto" Height="auto" Grid.Column="2" Grid.Row="1" VerticalAlignment="Center" x:Name="Netamt" Margin="4"></TextBlock>
                                    <TextBox x:Name="txtNetamt" Margin="4" Grid.Column="3"  Grid.Row="1" HorizontalAlignment="Stretch" IsReadOnly="True" IsTabStop="False" TextAlignment="Right"  Text="{Binding NetAmount, Mode=TwoWay, StringFormat=0.000}"></TextBox>

                                    <TextBlock Text="Received By"  Grid.Column="4" Grid.Row="1" VerticalAlignment="Center" x:Name="taxReceivedByr" HorizontalAlignment="Left"  Margin="4"></TextBlock>
                                    <inputcombo:AutoCompleteComboBox x:Name="cmbReceivedBy"    Grid.Row="1"  Grid.ColumnSpan="1" Grid.Column="5"  Margin="4" HorizontalAlignment="Stretch"></inputcombo:AutoCompleteComboBox>
                                    <CheckBox x:Name="chkIsFinalized"  Content="Is Finalize" IsChecked="{Binding IsFinalized,Mode=TwoWay}"  Grid.Row="1" Grid.Column="7" Margin="4" VerticalAlignment="Center" HorizontalAlignment="Right" IsEnabled="False"></CheckBox>
                                    <TextBlock Text="Item Tax Amount" Width="auto" Height="auto" Grid.Column="6" Grid.Row="0" VerticalAlignment="Center" x:Name="taxamount" Margin="4"></TextBlock>
                                    <TextBox x:Name="txttaxamount" Margin="4" Grid.Column="7"  Grid.Row="0" HorizontalAlignment="Stretch" IsReadOnly="True" IsTabStop="False" TextAlignment="Right"  Text="{Binding TotalTAxAmount, Mode=TwoWay, StringFormat=0.000}"></TextBox>

                                    <TextBlock Text="Remarks" Grid.Column="8"   Grid.Row="0" VerticalAlignment="Center"   x:Name="taxRmarksBy" Margin="4" ></TextBlock>
                                    <TextBox x:Name="txtremarks" Margin="4"   Grid.Column="9" HorizontalAlignment="Stretch" AcceptsReturn="True" VerticalScrollBarVisibility="Auto" Text="{Binding Remarks, Mode=TwoWay}" Height="53" Grid.RowSpan="2"></TextBox>
                                </Grid>
                            </Border>
                        </toolkit:DockPanel>
                        <toolkit:DockPanel LastChildFill="True">
                            <toolkit:DockPanel  toolkit:DockPanel.Dock="Bottom" x:Name="AddingDock" >
                                <Grid Height="auto" Width="auto">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="auto"></ColumnDefinition>
                                        <ColumnDefinition></ColumnDefinition>
                                    </Grid.ColumnDefinitions>
                                    <HyperlinkButton x:Name="lnkAddItems" FontSize="12" Content="Add Items" VerticalAlignment="Center" Margin="20,4"  Foreground="DarkBlue" Click="lnkAddItems_Click" Visibility="Collapsed"></HyperlinkButton>
                                </Grid>
                            </toolkit:DockPanel>
                            <toolkit:DockPanel toolkit:DockPanel.Dock="Top" VerticalAlignment="Stretch">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="auto"></RowDefinition>
                                        <RowDefinition Height="auto"></RowDefinition>
                                    </Grid.RowDefinitions>
                                </Grid>
                              
                                <data:DataGrid Grid.Row="0" Margin="4"  Width="auto"  HorizontalAlignment="Stretch" GotFocus="dgAddGRNItems_GotFocus"  ScrollViewer.HorizontalScrollBarVisibility="Visible" ScrollViewer.VerticalScrollBarVisibility="Visible"  AlternatingRowBackground="Silver" AutoGenerateColumns="false" x:Name="dgAddGRNItems" ItemsSource="{Binding }" CanUserSortColumns="False">
                                    <data:DataGrid.Columns>
                                        <data:DataGridTemplateColumn>
                                            <data:DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <HyperlinkButton VerticalAlignment="Center" Content="Assign Batch"  Padding="5,0,5,0" IsTabStop="False" Click="AddBatch_Click"  x:Name="cmdAssignBatch" ToolTipService.ToolTip="Assign Batch"></HyperlinkButton>
                                                </DataTemplate>
                                            </data:DataGridTemplateColumn.CellTemplate>
                                        </data:DataGridTemplateColumn>
                                        <data:DataGridTextColumn Binding="{Binding ItemName}" Header="Item Name" IsReadOnly="True"/>
                                        <!--<data:DataGridTemplateColumn Header="Batch Code" Width="100" >
                                            <data:DataGridTemplateColumn.CellTemplate >
                                                <DataTemplate >
                                                    <input:AutoCompleteBox x:Name="txtBatchCode" Text="{Binding BatchCode, Mode=TwoWay}" LostFocus="txtBatchCode_LostFocus" IsEnabled="{Binding IsBatchRequired,Mode=OneWay}" Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Center"/>
                                                </DataTemplate>
                                            </data:DataGridTemplateColumn.CellTemplate>
                                        </data:DataGridTemplateColumn>-->
                                        <!--<data:DataGridTextColumn Binding="{Binding BatchCode}" Header="Batch Code"/>-->

                                        <data:DataGridTemplateColumn Header="Batch Code" >
                                            <data:DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding BatchCode,Mode=TwoWay}" Margin="4" VerticalAlignment="Center" HorizontalAlignment="Center" TextAlignment="Right" />
                                                </DataTemplate>
                                            </data:DataGridTemplateColumn.CellTemplate>
                                            <data:DataGridTemplateColumn.CellEditingTemplate>
                                                <DataTemplate>
                                                    <TextBox Text="{Binding BatchCode,Mode=TwoWay}" IsEnabled="{Binding IsReadOnly,Converter={StaticResource NegateValueConverter}}" TextAlignment="Right"/>
                                                </DataTemplate>
                                            </data:DataGridTemplateColumn.CellEditingTemplate>
                                        </data:DataGridTemplateColumn>
                                        
                                        
                                        <data:DataGridTemplateColumn Header="Expiry Date">
                                            <data:DataGridTemplateColumn.CellTemplate >
                                                <DataTemplate>
                                                    <TextBlock 
                                                                        Text="{Binding ExpiryDate, 
                                                                        Converter={StaticResource DateConverter},ConverterParameter={StaticResource ExpiryDateDisplayFormat}}" 
                                                                        Margin="2" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" />
                                                </DataTemplate>
                                            </data:DataGridTemplateColumn.CellTemplate>
                                            <data:DataGridTemplateColumn.CellEditingTemplate>
                                                <DataTemplate>
                                                    <controls:DatePicker SelectedDate="{Binding ExpiryDate, Mode=TwoWay}"  IsEnabled="{Binding IsBatchRequired}"  />
                                                </DataTemplate>
                                            </data:DataGridTemplateColumn.CellEditingTemplate>
                                        </data:DataGridTemplateColumn>
                                        <data:DataGridTextColumn  Binding="{Binding BarCode,Mode=TwoWay}" Header="Bar Code"></data:DataGridTextColumn>
                                        <data:DataGridTextColumn Binding="{Binding WOQuantity}" Header="WO Quantity" IsReadOnly="True"/>
                                        <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding WOPendingQuantity, Mode=TwoWay,StringFormat=0.00}" Header="WO Pending Quantity" >
                                            <data:DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                </Style>
                                            </data:DataGridTextColumn.ElementStyle>
                                        </data:DataGridTextColumn>
                                        <data:DataGridTextColumn Binding="{Binding Quantity, Mode=TwoWay,StringFormat=0.00}" Header="Quantity">
                                            <data:DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                </Style>
                                            </data:DataGridTextColumn.ElementStyle>
                                        </data:DataGridTextColumn>
                                        <data:DataGridTextColumn Binding="{Binding FreeQuantity, Mode=TwoWay,StringFormat=0.00}"  Header="Free Quantity" >
                                            <data:DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                </Style>
                                            </data:DataGridTextColumn.ElementStyle>
                                        </data:DataGridTextColumn>
                                        <data:DataGridTextColumn Binding="{Binding ConversionFactor, Mode=TwoWay,StringFormat=0.00}"  Header="Conversion Factor" >
                                            <data:DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                </Style>
                                            </data:DataGridTextColumn.ElementStyle>
                                        </data:DataGridTextColumn>

                                        <data:DataGridTextColumn  Binding="{Binding TotalQuantity,Mode=TwoWay}" Header="Total Quantity" IsReadOnly="True"></data:DataGridTextColumn>
                                        <data:DataGridTextColumn IsReadOnly="True"  Binding="{Binding AvailableQuantity, Mode=TwoWay,StringFormat=0.00}" Header="Available Stock" >
                                            <data:DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                </Style>
                                            </data:DataGridTextColumn.ElementStyle>
                                        </data:DataGridTextColumn>
                                        <data:DataGridTextColumn Binding="{Binding Rate, Mode=TwoWay,StringFormat=0.000}" Header="Cost Price" >
                                            <data:DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                </Style>
                                            </data:DataGridTextColumn.ElementStyle>
                                        </data:DataGridTextColumn>
                                        <data:DataGridTextColumn Binding="{Binding MRP, Mode=TwoWay,StringFormat=0.000}" Header="MRP" >
                                            <data:DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                </Style>
                                            </data:DataGridTextColumn.ElementStyle>
                                        </data:DataGridTextColumn>
                                        <data:DataGridTextColumn IsReadOnly="True"  Binding="{Binding Amount, Mode=TwoWay,StringFormat=0.000}" Header="Amount" >
                                            <data:DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                </Style>
                                            </data:DataGridTextColumn.ElementStyle>
                                        </data:DataGridTextColumn>
                                        <data:DataGridTextColumn Binding="{Binding CDiscountPercent, Mode=TwoWay,StringFormat=0.00}" Header="C.Disc. %" >
                                            <data:DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                </Style>
                                            </data:DataGridTextColumn.ElementStyle>
                                        </data:DataGridTextColumn>
                                        <data:DataGridTextColumn Binding="{Binding CDiscountAmount, Mode=TwoWay,StringFormat=0.000}" Header="C.Disc. Amount" >
                                            <data:DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                </Style>
                                            </data:DataGridTextColumn.ElementStyle>
                                        </data:DataGridTextColumn>
                                        <data:DataGridTextColumn Binding="{Binding SchDiscountPercent, Mode=TwoWay,StringFormat=0.00}" Header="Sch.Disc. %" >
                                            <data:DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                </Style>
                                            </data:DataGridTextColumn.ElementStyle>
                                        </data:DataGridTextColumn>
                                        <data:DataGridTextColumn Binding="{Binding SchDiscountAmount, Mode=TwoWay,StringFormat=0.000}" Header="Sch.Disc. Amount" >
                                            <data:DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                </Style>
                                            </data:DataGridTextColumn.ElementStyle>
                                        </data:DataGridTextColumn>
                                        <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding ItemTax, Mode=TwoWay,StringFormat=0.00}" Header="Item Tax %" >
                                            <data:DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                </Style>
                                            </data:DataGridTextColumn.ElementStyle>
                                        </data:DataGridTextColumn>
                                        <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding TaxAmount, Mode=TwoWay,StringFormat=0.000}" Header="Item Tax Amount" >
                                            <data:DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                </Style>
                                            </data:DataGridTextColumn.ElementStyle>
                                        </data:DataGridTextColumn>
                                        <data:DataGridTextColumn Binding="{Binding VATPercent,StringFormat=0.00, Mode=TwoWay}"  Header="VAT%" IsReadOnly="True" >
                                            <data:DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                </Style>
                                            </data:DataGridTextColumn.ElementStyle>
                                        </data:DataGridTextColumn>
                                        <data:DataGridTextColumn Binding="{Binding VATAmount, Mode=TwoWay,StringFormat=0.000}" Header="VAT Amount" IsReadOnly="True">
                                            <data:DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                </Style>
                                            </data:DataGridTextColumn.ElementStyle>
                                        </data:DataGridTextColumn>
                                        <data:DataGridTextColumn IsReadOnly="True"  Binding="{Binding NetAmount, Mode=TwoWay,StringFormat=0.000}" Header="Net Amount" >
                                            <data:DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                </Style>
                                            </data:DataGridTextColumn.ElementStyle>
                                        </data:DataGridTextColumn>
                                        <data:DataGridTextColumn IsReadOnly="True"  Binding="{Binding AssignSupplier}" Header="Assign Supplier" Visibility ="Collapsed">
                                            <data:DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                </Style>
                                            </data:DataGridTextColumn.ElementStyle>
                                        </data:DataGridTextColumn>
                                        <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding PurchaseUOM}" Header="Purchase UOM"></data:DataGridTextColumn>
                                        <data:DataGridTextColumn IsReadOnly="True" Binding="{Binding StockUOM}" Header="Stock UOM"></data:DataGridTextColumn>
                                       
                                        <data:DataGridTemplateColumn Header="">
                                            <data:DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <HyperlinkButton VerticalAlignment="Center" FontFamily="Webdings" Content="r"  Padding="5,0,5,0" IsTabStop="False" Click="cmdDeleteItem_Click"  x:Name="cmdDeleteItem" ToolTipService.ToolTip="Delete" Visibility="Visible"></HyperlinkButton>
                                                </DataTemplate>
                                            </data:DataGridTemplateColumn.CellTemplate>
                                        </data:DataGridTemplateColumn>
                                        <data:DataGridTemplateColumn Header="">
                                            <data:DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <HyperlinkButton VerticalAlignment="Center" Content="Add Item"  Padding="5,0,5,0" IsTabStop="False" Click="AddItem_Click" x:Name="cmdAddItem" ToolTipService.ToolTip="Add Item" Visibility="{Binding IsBatchRequired,Converter={StaticResource VisiblilityConverter}}"></HyperlinkButton>
                                                </DataTemplate>
                                            </data:DataGridTemplateColumn.CellTemplate>
                                        </data:DataGridTemplateColumn>
                                    </data:DataGrid.Columns>
                                </data:DataGrid>
                            </toolkit:DockPanel>
                        </toolkit:DockPanel>
                    </toolkit:DockPanel>
                </Grid>
            </Grid>
        </toolkit:DockPanel>
    </Grid>
</UserControl>
