<UserControl x:Class="PalashDynamics.Radiology.ReportUploadTest"
    xmlns:GroupBox="clr-namespace:Groupbox;assembly=Groupbox"
    xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit"  
    xmlns:controlsToolkit="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Toolkit" 
    xmlns:data="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"   
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"
    xmlns:dataInput="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data.Input"
    xmlns:input="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Input"
    xmlns:inputcombo="clr-namespace:PalashDynamics.Controls;assembly=PalashDynamics.Controls.AutoCompleteComboBox"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"  
    xmlns:local="clr-namespace:PalashDynamics.Converters;assembly=PalashDynamics.Converters"   
    xmlns:my="clr-namespace:PalashDynamics;assembly=PalashDynamics.WaterMarkTextBox"  
    xmlns:vsm="clr-namespace:System.Windows;assembly=System.Windows"
    xmlns:Grp="clr-namespace:Groupbox;assembly=Groupbox"
             xmlns:c1="http://schemas.componentone.com/winfx/2006/xaml"
    Height="Auto" Width="Auto" Loaded="ResultEntry_Loaded">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/PalashDynamics;component/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <local:DateTimeConverter x:Key="DateConverter" />
            <local:VisiblilityConverter x:Key="VisiblilityConverter"/>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot" Background="White"  Margin="2">
        <controlsToolkit:DockPanel LastChildFill="True">
            <controlsToolkit:DockPanel x:Name="docFooter" controlsToolkit:DockPanel.Dock="Bottom" Grid.Row="2" >
                <controlsToolkit:DockPanel Margin="2" controlsToolkit:DockPanel.Dock="Top">

                    <Grp:GroupBox Header="Color Code" Margin ="0"  Grid.Row="0" Grid.Column="0"  HorizontalAlignment="Left">
                        <StackPanel x:Name="ColorCode" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Left" Width="Auto"  Background="Transparent">
                            <Grid x:Name="Color" HorizontalAlignment="Stretch" >
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                </Grid.RowDefinitions>
                                <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center"  Margin="4" Text="Color Code  :" Visibility="Collapsed" Grid.Row="0" Grid.Column="0"/>
                                <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center"  Margin="4" Text="New WorkOrder"  Grid.Row="0" Grid.Column="1"/>
                                <TextBox Grid.Row="0" Grid.Column="2" x:Name="txtFirstLevel" Height="13" Width="13"  VerticalAlignment="Center" HorizontalAlignment="Stretch" Margin ="4"  IsTabStop="False" Background="DarkGray"/>

                                <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center"  Margin="4" Text="InProcess"  Grid.Row="0" Grid.Column="3"/>
                                <TextBox Grid.Row="0" Grid.Column="4" x:Name="txtSecondLevel" Height="13" Width="13" VerticalAlignment="Center" HorizontalAlignment="Stretch" Margin ="4"  IsTabStop="False" Background="Cyan" />

                                <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center"  Margin="4" Text="Completed"  Grid.Row="0" Grid.Column="5" Visibility="Visible"/>
                                <TextBox Grid.Row="0" Grid.Column="6" x:Name="txtThirdLevel" Height="13" Width="13" VerticalAlignment="Center" HorizontalAlignment="Stretch" Margin ="4"  IsTabStop="False"  Visibility="Visible" Background="Green" />


                                <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center"  Margin="4" Text="Cancelled"  Grid.Row="0" Grid.Column="7" Visibility="Visible"/>
                                <TextBox Grid.Row="0" Grid.Column="8" x:Name="txtThirdLevel1" Height="13" Width="13" VerticalAlignment="Center" HorizontalAlignment="Stretch" Margin ="4"  IsTabStop="False"  Visibility="Visible" Background="Red" />

                                <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center"  Margin="4" Text="Checked Results"  Grid.Row="0" Grid.Column="7"  Visibility="Collapsed"/>
                                <TextBox Grid.Row="0" Grid.Column="8" x:Name="txtCheckedResults" Height="13" Width="13" VerticalAlignment="Center" HorizontalAlignment="Stretch" Margin ="4"  IsTabStop="False" Background="#00FFFF"  Visibility="Collapsed" />

                                <!--<StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Grid.Row="0" Grid.Column="8" Visibility="Collapsed">
                                                            <TextBlock HorizontalAlignment="Right" Text="Number Of Work Orders" VerticalAlignment="Center" Margin="1,0,1,0"></TextBlock>
                                                            <TextBox x:Name="txtTotalCountRecords" TextAlignment="Right" VerticalAlignment="Center" IsReadOnly="True"  Margin="1,0,4,4" Width="70" ></TextBox>
                                                        </StackPanel>-->
                                

                            </Grid>
                        </StackPanel>
                    </Grp:GroupBox>
                    <StackPanel x:Name="Footer11" Orientation="Horizontal" VerticalAlignment="Center"   Margin="0,3,5,3" HorizontalAlignment="Right" Background="Transparent">
                        <StackPanel x:Name="SaveCommandPanel"   Margin="0,0,0,0" HorizontalAlignment="Right" >
                            <ToggleButton x:Name="CmdUpload"  Grid.Row="4"   Content="Upload" MinWidth="50"  Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" Click="CmdUpload_Click" />
                            <ToggleButton x:Name="CmdClose"  Grid.Row="4" Visibility="Collapsed" Content="Close" MinWidth="50" Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}"  />
                        </StackPanel>
                    </StackPanel>
                </controlsToolkit:DockPanel>
            </controlsToolkit:DockPanel>


            <Border BorderBrush="{StaticResource TabControlDarkerBorder}" Visibility="Collapsed"  Margin="4" controlsToolkit:DockPanel.Dock="Bottom" BorderThickness="1" CornerRadius="3,3,3,3" Background="Transparent" >
                <StackPanel x:Name="Footer1" Orientation="Horizontal" VerticalAlignment="Center"   Margin="0,3,5,3" HorizontalAlignment="Left" Background="Transparent">
                    <StackPanel Orientation="Horizontal"  Margin="1" HorizontalAlignment="Left"  >
                        <Grid >
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="txtTechEntryDone" Height="15" Width="15" Grid.Column="0" Margin="5,5,8,3" IsReadOnly="True" ></TextBox>
                            <TextBlock Text="Technician Entry Done" Grid.Column="1" Margin="1,5,8,5"></TextBlock>

                            <TextBox x:Name="txtResultEntryDone" Height="15" Width="15" Grid.Column="2" Margin="5,5,8,3" IsReadOnly="True" ></TextBox>
                            <TextBlock Text="Result Entry Done" Grid.Column="3" Margin="1,5,8,5"></TextBlock>

                            <TextBox x:Name="txtReportDelivered" Height="15" Width="15" Grid.Column="4" Margin="5,5,8,3" IsReadOnly="True" ></TextBox>
                            <TextBlock Text="Report Delivered" Grid.Column="5" Margin="1,5,8,5"></TextBlock>

                            <TextBox x:Name="txtTestCancelled" Height="15" Width="15" Grid.Column="6" Margin="5,5,8,3" IsReadOnly="True" ></TextBox>
                            <TextBlock Text="Cancelled" Grid.Column="7" Margin="1,5,8,5"></TextBlock>
                        </Grid>
                    </StackPanel>
                    <StackPanel x:Name="Footer15" Orientation="Horizontal" VerticalAlignment="Center" Margin="700,3,1,3" HorizontalAlignment="Right" Background="Transparent">
                        <StackPanel Orientation="Horizontal"  Margin="1" HorizontalAlignment="Right">
                            <ToggleButton x:Name="CmdComapare" Content="Comapare Study"   Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" Click="CmdComapare_Click" Width="Auto"></ToggleButton>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </Border>
            <controlsToolkit:DockPanel LastChildFill="True">
                <Grid x:Name="PageContainer" >

                    <Grid Height="AUTO" Visibility="Visible" Width="auto" x:Name="FrontPanel" Grid.Row="0">
                        <controlsToolkit:DockPanel x:Name="docSample"  LastChildFill="True"  controlsToolkit:DockPanel.Dock="Top">
                            <controlsToolkit:DockPanel x:Name="docContent" controlsToolkit:DockPanel.Dock="Top" LastChildFill="True">
                                <Border BorderBrush="{StaticResource TabControlDarkerBorder}" BorderThickness="1" CornerRadius="3,3,0,0" Margin="4,4,4,4" Background="Transparent">
                                    <controlsToolkit:DockPanel controlsToolkit:DockPanel.Dock="Top">
                                        <controlsToolkit:DockPanel x:Name="docHeader" controlsToolkit:DockPanel.Dock="Top">
                                            <Grid Width="Auto"  Margin="0" controlsToolkit:DockPanel.Dock="Top" DataContext="{Binding BizActionObject}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition />
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition />
                                                    <ColumnDefinition  Width="Auto"/>
                                                    <ColumnDefinition />
                                                    <ColumnDefinition  Width="Auto"/>
                                                    <ColumnDefinition />
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition />
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>
                                                <TextBlock  HorizontalAlignment="Right" VerticalAlignment="Center" Text="From Date" Grid.Row="0" Grid.Column="0"  Margin="4,10,4,4" />
                                                <controls:DatePicker SelectedDate="{Binding FromDate,Mode=TwoWay}"  x:Name="dtpFromDate" Margin="4,10,4,4" Grid.Row="0" Grid.Column="1"  HorizontalAlignment="Stretch" VerticalAlignment="Center" />

                                                <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center" Text="To Date" Grid.Row="0" Grid.Column="2"  Margin="4,10,4,4" />
                                                <controls:DatePicker SelectedDate="{Binding ToDate,Mode=TwoWay}"  x:Name="dtpToDate" Margin="4,10,4,4" Grid.Row="0" Grid.Column="3" HorizontalAlignment="Stretch" VerticalAlignment="Center"/>

                                                <TextBlock  HorizontalAlignment="Right" VerticalAlignment="Center" Text="First Name" Grid.Row="0" Grid.Column="4"  Margin="4,10,4,4" />
                                                <TextBox x:Name="txtFrontFirstName" Margin="4,10,4,4" Grid.Row="0" Grid.Column="5" MaxLength="50" LostFocus="txtFrontFirstName_LostFocus" KeyUp="txtFrontFirstName_KeyUp" KeyDown="txtFrontFirstName_KeyDown" TextChanged="txtFrontFirstName_TextChanged"></TextBox>

                                                <TextBlock  HorizontalAlignment="Right" VerticalAlignment="Center" Text="Last Name" Grid.Row="0" Grid.Column="6" Margin="4,10,4,4" />
                                                <TextBox x:Name="txtFrontLastName" Margin="4,10,4,4" Grid.Row="0" MaxLength="50" Grid.Column="7" LostFocus="txtFrontLastName_LostFocus" KeyUp="txtFrontLastName_KeyUp" KeyDown="txtFrontLastName_KeyDown" SelectionChanged="txtFrontLastName_SelectionChanged"></TextBox>

                                                <TextBlock  HorizontalAlignment="Right" VerticalAlignment="Center" Text="Mr No." Grid.Row="1" Grid.Column="0"  Margin="4" />
                                                <TextBox x:Name="txtFrontMRNO" Margin="4" Height="25"  Grid.Row="1" Grid.Column="1"   HorizontalAlignment="Stretch" KeyUp="txtFrontMRNO_KeyUp" LostFocus="txtFrontMRNO_LostFocus"></TextBox>

                                                <TextBlock  HorizontalAlignment="Right" VerticalAlignment="Center" Text="Clinic" Grid.Row="0" Grid.Column="8" Margin="4" />
                                                <inputcombo:AutoCompleteComboBox  Margin="4" x:Name="cmbclinic" Grid.Row="0" Grid.Column="9" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID" VerticalAlignment="Center" ></inputcombo:AutoCompleteComboBox>


                                                <TextBlock VerticalAlignment="Center" Text="OPD NO." Grid.Row="1" Grid.Column="2"  Margin="16,4,4,4" Width="49" />
                                                <TextBox x:Name="txtFrontOPDNO" Margin="4" Height="25"  Grid.Row="1" Grid.Column="3"   HorizontalAlignment="Stretch"  KeyUp="txtFrontOPDNO_KeyUp"></TextBox>

                                                <TextBlock  HorizontalAlignment="Right" VerticalAlignment="Center" Text="IPD NO." Grid.Row="1" Grid.Column="4"  Margin="4" />
                                                <TextBox x:Name="txtFrontIPDNO" Margin="4" Height="25"  Grid.Row="1" Grid.Column="5"   HorizontalAlignment="Stretch"  KeyUp="txtFrontIPDNO_KeyUp"></TextBox>

                                             

                                                <TextBlock  HorizontalAlignment="Right" VerticalAlignment="Center" Text="Modality" Grid.Row="1" Grid.Column="6" Margin="4" />
                                                <inputcombo:AutoCompleteComboBox  Margin="4" x:Name="cmbModality1" Grid.Row="1" Grid.Column="7" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID" VerticalAlignment="Center" ></inputcombo:AutoCompleteComboBox>

                                                <TextBlock Text="Radiologist" Grid.Row="1" Grid.Column="8" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="4"></TextBlock>
                                                <inputcombo:AutoCompleteComboBox x:Name="cmbRadiologist"  ItemsSource="{Binding}" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID"   Grid.Row="1" Grid.Column="9" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="4" TabIndex="6" SelectionChanged="cmbRadiologist_SelectionChanged"></inputcombo:AutoCompleteComboBox>

                                               
                                                <TextBlock  HorizontalAlignment="Right" VerticalAlignment="Center" Text="Delivery Status" Grid.Row="2" Grid.Column="0"  Margin="4" />

                                                <inputcombo:AutoCompleteComboBox  Margin="0" x:Name="cmbDeliveryStatus" Grid.Row="2" Grid.Column="1"  SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID" VerticalAlignment="Center" ></inputcombo:AutoCompleteComboBox>

                                             

                                                <!--<Grp:GroupBox Grid.Row="2" Grid.Column="4" Grid.ColumnSpan="2" Margin="4" Header="Result Entry Status"  HorizontalAlignment="Stretch" VerticalAlignment="Center" Visibility="Collapsed">
                                                
                                            </Grp:GroupBox>-->

                                                <TextBlock  HorizontalAlignment="Right" VerticalAlignment="Center" Text="Result Entry Status" Grid.Row="2" Grid.Column="2"  Margin="4" />
                                                <inputcombo:AutoCompleteComboBox  Margin="0" x:Name="cmbResultEntryStatus"  SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" Grid.Row="2" Grid.Column="3" SelectedValuePath="ID" VerticalAlignment="Center"  ></inputcombo:AutoCompleteComboBox>














                                                <TextBlock  HorizontalAlignment="Right" VerticalAlignment="Center" Visibility="Collapsed"  Text="Modality" Grid.Row="1" Grid.Column="9" Margin="4" />
                                                <inputcombo:AutoCompleteComboBox  Margin="4" x:Name="cmbModality" Visibility="Collapsed" Grid.Row="1" Grid.Column="5" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID" VerticalAlignment="Center" ></inputcombo:AutoCompleteComboBox>

                                                <!--<Grp:GroupBox Grid.Row="1" Grid.Column="2" Grid.ColumnSpan="2" Margin="4" Visibility="Collapsed" Header="Result Entry Status"  HorizontalAlignment="Stretch" VerticalAlignment="Center">
                                                    <inputcombo:AutoCompleteComboBox  Margin="0" x:Name="cmbResultEntryStatus" Visibility="Collapsed" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID" VerticalAlignment="Center"  ></inputcombo:AutoCompleteComboBox>
                                                </Grp:GroupBox>-->
                                                <ToggleButton x:Name="SearchButton" Grid.Row="2" Height="30" Background="#000000" Margin="4" HorizontalAlignment="Left" VerticalAlignment="Center" Visibility="Visible" Grid.Column="4" Click="SearchButton_Click" >
                                                    <Image  Source="/PalashDynamics;component/Icons/Search_b.JPG" ToolTipService.ToolTip="Search Order" />
                                                </ToggleButton>
                                            </Grid >
                                        </controlsToolkit:DockPanel>


                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition></RowDefinition>
                                                <RowDefinition></RowDefinition>
                                                <RowDefinition Height="Auto"></RowDefinition>
                                            </Grid.RowDefinitions>
                                            <controlsToolkit:DockPanel x:Name="docOrderList" controlsToolkit:DockPanel.Dock="Top" Grid.Row="0">
                                                <Border controlsToolkit:DockPanel.Dock="Top"  BorderBrush="{StaticResource TabControlDarkerBorder}"   BorderThickness="1" CornerRadius="3,3,0,0"  Background="Transparent">
                                                    <ContentControl VerticalAlignment="Center" FontSize="12" Content="List Of Work Orders" Margin="-1" Style="{StaticResource Header}"     HorizontalAlignment="Stretch" />
                                                </Border>
                                                <data:DataPager x:Name="DataPager" controlsToolkit:DockPanel.Dock="Bottom" 
                                                        DisplayMode="FirstLastPreviousNext"  IsEnabled="True"                       
                                                        Source="{Binding}" 
                                                        AutoEllipsis="False" IsTotalItemCountFixed="True"   />
                                                <data:DataGrid x:Name="dgOrdertList" AutoGenerateColumns="False" ItemsSource="{Binding}" VerticalScrollBarVisibility="Visible" IsReadOnly="True" Margin="2" HorizontalAlignment="Stretch"  CanUserSortColumns="False" SelectionChanged="dgOrdertList_SelectionChanged" LoadingRow="dgOrdertList_LoadingRow">
                                                    <data:DataGrid.Columns>
                                                        <data:DataGridTemplateColumn Width="Auto" Header="Select" Visibility="Collapsed">
                                                            <data:DataGridTemplateColumn.CellTemplate>
                                                                <DataTemplate>
                                                                    <CheckBox x:Name="chkOrder" Click="chkOrder_Click" VerticalAlignment="Center" HorizontalAlignment="Center" HorizontalContentAlignment="Center"/>
                                                                </DataTemplate>
                                                            </data:DataGridTemplateColumn.CellTemplate>
                                                        </data:DataGridTemplateColumn>
                                                        <data:DataGridTextColumn Binding="{Binding Date,Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}" Header="Order Date" IsReadOnly="False"></data:DataGridTextColumn>
                                                        <data:DataGridTextColumn Header="Order Time" Binding="{Binding Date, StringFormat=t}" IsReadOnly="True" Width="Auto" />
                                                        <data:DataGridTextColumn Binding="{Binding BillDate,Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}" Header="Bill Date" IsReadOnly="False"></data:DataGridTextColumn>
                                                        <data:DataGridTextColumn Binding="{Binding UnitName}" Header="Clinic" IsReadOnly="True" ></data:DataGridTextColumn>
                                                        <data:DataGridTextColumn Binding="{Binding MRNo}" Header="MR No." IsReadOnly="True" ></data:DataGridTextColumn>
                                                        <data:DataGridTextColumn Binding="{Binding PatientName}" Header="Patient Name" IsReadOnly="True" ></data:DataGridTextColumn>
                                                        <data:DataGridTextColumn Binding="{Binding BillNo }" Header="Bill No." IsReadOnly="False"></data:DataGridTextColumn>

                                                        <data:DataGridTextColumn Binding="{Binding OPDNO }" Header="OPD NO." IsReadOnly="False"></data:DataGridTextColumn>
                                                        <data:DataGridTextColumn Binding="{Binding GenderName }" Header="Sex" IsReadOnly="False"></data:DataGridTextColumn>
                                                        <data:DataGridTextColumn Binding="{Binding AgeINDDMMYYYY }" Header="Age" IsReadOnly="False"></data:DataGridTextColumn>
                                                        <data:DataGridTextColumn Binding="{Binding ContactNO }" Header="Contact No." IsReadOnly="False"></data:DataGridTextColumn>
                                                        <data:DataGridTextColumn Binding="{Binding ReferredDoctor }" Header="Referred By" IsReadOnly="False"></data:DataGridTextColumn>

                                                        <data:DataGridTextColumn Binding="{Binding TotalAmount,StringFormat=0.00,Mode=OneWay}" Header="Total Amount" Visibility="Collapsed" >
                                                            <data:DataGridTextColumn.ElementStyle>
                                                                <Style TargetType="TextBlock">
                                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                                </Style>
                                                            </data:DataGridTextColumn.ElementStyle>
                                                        </data:DataGridTextColumn>

                                                        <data:DataGridTextColumn Binding="{Binding CompanyAmount,StringFormat=0.00,Mode=OneWay}" Header="Company Amount" Visibility="Collapsed" >
                                                            <data:DataGridTextColumn.ElementStyle>
                                                                <Style TargetType="TextBlock">
                                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                                </Style>
                                                            </data:DataGridTextColumn.ElementStyle>
                                                        </data:DataGridTextColumn>

                                                        <data:DataGridTextColumn Binding="{Binding PatientAmount,StringFormat=0.00,Mode=OneWay}" Header="Patient Amount" Visibility="Collapsed" >
                                                            <data:DataGridTextColumn.ElementStyle>
                                                                <Style TargetType="TextBlock">
                                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                                </Style>
                                                            </data:DataGridTextColumn.ElementStyle>
                                                        </data:DataGridTextColumn>

                                                        <data:DataGridTextColumn Binding="{Binding PaidAmount,StringFormat=0.00,Mode=OneWay}" Header="Patient Paid Bill Amount" Visibility="Collapsed">
                                                            <data:DataGridTextColumn.ElementStyle>
                                                                <Style TargetType="TextBlock">
                                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                                </Style>
                                                            </data:DataGridTextColumn.ElementStyle>
                                                        </data:DataGridTextColumn>

                                                        <data:DataGridTextColumn Binding="{Binding Balance,StringFormat=0.00,Mode=OneWay}" Header="Patient Balance Amount" IsReadOnly="False" Visibility="Collapsed" >
                                                            <data:DataGridTextColumn.ElementStyle>
                                                                <Style TargetType="TextBlock">
                                                                    <Setter Property="TextAlignment" Value="Right"/>
                                                                </Style>
                                                            </data:DataGridTextColumn.ElementStyle>
                                                        </data:DataGridTextColumn>



                                                    </data:DataGrid.Columns>
                                                </data:DataGrid>
                                            </controlsToolkit:DockPanel>

                                            <controlsToolkit:DockPanel x:Name="docTest" Grid.Row="1">
                                                <Border  controlsToolkit:DockPanel.Dock="Top" BorderBrush="{StaticResource TabControlDarkerBorder}"   BorderThickness="1" CornerRadius="3,3,0,0" Background="Transparent">
                                                    <ContentControl VerticalAlignment="Center" FontSize="12" Content="List of Test" Margin="-1" Style="{StaticResource Header}"     HorizontalAlignment="Stretch" />
                                                </Border>


                                                <data:DataGrid  x:Name="dgTest" Margin="2" ItemsSource="{Binding}" IsReadOnly="True"  AutoGenerateColumns="False" VerticalScrollBarVisibility="Visible" CanUserSortColumns="False" LoadingRow="dgTest_LoadingRow">
                                                    <data:DataGrid.Columns>
                                                        <data:DataGridTemplateColumn Visibility="Collapsed">
                                                            <data:DataGridTemplateColumn.CellTemplate >

                                                                <DataTemplate>
                                                                    <HyperlinkButton VerticalAlignment="Center"  Content="Edit"  Padding="5,0,5,0" Click="Edit_Click"></HyperlinkButton>
                                                                </DataTemplate>
                                                            </data:DataGridTemplateColumn.CellTemplate>
                                                        </data:DataGridTemplateColumn>
                                                        <data:DataGridTemplateColumn>
                                                            <data:DataGridTemplateColumn.CellTemplate>

                                                                <DataTemplate>
                                                                    <HyperlinkButton Background="White"  VerticalAlignment="Center" Padding="5,0,5,0" IsTabStop="False" Click="btnPrint_Click"   x:Name="btnPrint" >
                                                                        <Image  Height="16" Stretch="Fill" Source="/PalashDynamics;component/Icons/Print_32.png"  Visibility="{Binding IsUpload, Converter={StaticResource VisiblilityConverter}}"    />
                                                                    </HyperlinkButton>
                                                                    <!--<HyperlinkButton VerticalAlignment="Center"  Content="View"  Padding="5,0,5,0" Click="HyperlinkButton_Click"></HyperlinkButton>-->
                                                                </DataTemplate>
                                                            </data:DataGridTemplateColumn.CellTemplate>
                                                        </data:DataGridTemplateColumn>
                                                        <data:DataGridTextColumn Binding="{Binding TestCode }" Header="Test/Profile Code" ></data:DataGridTextColumn>
                                                        <data:DataGridTextColumn Binding="{Binding TestName }" Header="Test/Profile Name" ></data:DataGridTextColumn>
                                                        <data:DataGridTextColumn Binding="{Binding ServiceName }" Header="Service" ></data:DataGridTextColumn>
                                                        <data:DataGridTextColumn Binding="{Binding Modality }" Header="Modality" ></data:DataGridTextColumn>

                                                        <data:DataGridTextColumn Binding="{Binding ReferredBy }" Header="Prescribing Doctor" ></data:DataGridTextColumn>

                                                        <data:DataGridTextColumn Binding="{Binding Radiologist }" Header="Radiologist" ></data:DataGridTextColumn>

                                                        <data:DataGridTextColumn Binding="{Binding Modality }" Header="No. of Film Used" Visibility="Collapsed" ></data:DataGridTextColumn>

                                                        <data:DataGridTemplateColumn  Width="Auto" Header="Sedation" Visibility="Collapsed" IsReadOnly="True">
                                                            <data:DataGridTemplateColumn.CellTemplate >
                                                                <DataTemplate >
                                                                    <Image  Source="{Binding Path=SedationGivenImage}" Height="20" ></Image>
                                                                </DataTemplate>
                                                            </data:DataGridTemplateColumn.CellTemplate>
                                                        </data:DataGridTemplateColumn>

                                                        <data:DataGridTemplateColumn  Width="Auto" Header="Contrast Given" IsReadOnly="True" Visibility="Collapsed">
                                                            <data:DataGridTemplateColumn.CellTemplate >
                                                                <DataTemplate >
                                                                    <Image  Source="{Binding Path=ContrastGivenImage}" Height="20" ></Image>
                                                                </DataTemplate>
                                                            </data:DataGridTemplateColumn.CellTemplate>
                                                        </data:DataGridTemplateColumn>

                                                        <data:DataGridTextColumn Binding="{Binding ContrastDetails }" Header="Contrast Quantity (ml)" Visibility="Collapsed" IsReadOnly="True"></data:DataGridTextColumn>

                                                        



                                                        <data:DataGridTemplateColumn  Width="Auto" Header="Technician Entry" IsReadOnly="True">
                                                            <data:DataGridTemplateColumn.CellTemplate >
                                                                <DataTemplate >
                                                                    <Image  Source="{Binding Path=TechnicianEntryImage}" Height="20" ></Image>
                                                                </DataTemplate>
                                                            </data:DataGridTemplateColumn.CellTemplate>
                                                        </data:DataGridTemplateColumn>
                                                        <data:DataGridTextColumn Binding="{Binding RadiologistEntryDate, StringFormat='{}{0:dd/MM/yyyy  h:mm tt}'}" Header="Technician Entry (Time)" >
                                                           
                                                        </data:DataGridTextColumn>




                                                        <data:DataGridTemplateColumn  Width="Auto" Header="Finalized by Doctor" IsReadOnly="True" >
                                                            <data:DataGridTemplateColumn.CellTemplate >
                                                                <DataTemplate >
                                                                    <Image  Source="{Binding Path=TechnicianEntryFinalImage}" Height="20" ></Image>
                                                                </DataTemplate>
                                                            </data:DataGridTemplateColumn.CellTemplate>
                                                        </data:DataGridTemplateColumn>

                                                       


                                                        <data:DataGridTextColumn Binding="{Binding FinalizedByDoctorTime, StringFormat='{}{0:dd/MM/yyyy  h:mm tt}'}" Header="Finalized by Doctor (Time)" >

                                                        </data:DataGridTextColumn>



                                                        <data:DataGridTemplateColumn  Width="Auto" Header="Report Upload" IsReadOnly="True">
                                                            <data:DataGridTemplateColumn.CellTemplate >
                                                                <DataTemplate >
                                                                    <Image  Source="{Binding Path=ReportUploadImage}" Height="20" ></Image>
                                                                </DataTemplate>
                                                            </data:DataGridTemplateColumn.CellTemplate>
                                                        </data:DataGridTemplateColumn>

                                                        <data:DataGridTextColumn  Width="Auto" Header="Report Upload (Time)"  Binding="{Binding ReportUploadDateTime, StringFormat='{}{0:dd/MM/yyyy a\\t h:mm tt}'}">
                                                            
                                                        </data:DataGridTextColumn>

                                                        <data:DataGridTemplateColumn  Width="Auto" Header="Result Entry" IsReadOnly="True" Visibility="Collapsed">
                                                            <data:DataGridTemplateColumn.CellTemplate >
                                                                <DataTemplate >
                                                                    <Image  Source="{Binding Path=ResultEntryImage}" Height="20" ></Image>
                                                                </DataTemplate>
                                                            </data:DataGridTemplateColumn.CellTemplate>
                                                        </data:DataGridTemplateColumn>

                                                        <data:DataGridTemplateColumn  Width="Auto" Header="Finalized" IsReadOnly="True" Visibility="Collapsed">
                                                            <data:DataGridTemplateColumn.CellTemplate >
                                                                <DataTemplate >
                                                                    <Image  Source="{Binding Path=ResultEntryFinalImage}" Height="20" ></Image>
                                                                </DataTemplate>
                                                            </data:DataGridTemplateColumn.CellTemplate>
                                                        </data:DataGridTemplateColumn>

                                                        <data:DataGridTemplateColumn  Width="Auto" Header="Report Delivery" IsReadOnly="True">
                                                            <data:DataGridTemplateColumn.CellTemplate >
                                                                <DataTemplate >
                                                                    <Image  Source="{Binding Path=ReportDeliveredImage}" Height="20" ></Image>
                                                                </DataTemplate>
                                                            </data:DataGridTemplateColumn.CellTemplate>
                                                        </data:DataGridTemplateColumn>

                                                        <!--<data:DataGridTemplateColumn  Width="Auto" Header="Report Delivery (Time)" IsReadOnly="True">
                                                            <data:DataGridTemplateColumn.CellTemplate >
                                                                <DataTemplate >-->
                                                                    <!--<Image  Source="{Binding Path=ReportDeliveryedImage}" Height="20" ></Image>-->
                                                                <!--</DataTemplate>
                                                            </data:DataGridTemplateColumn.CellTemplate>
                                                        </data:DataGridTemplateColumn>-->

                                                        <data:DataGridTextColumn Binding="{Binding DeliveryReportDateTime, StringFormat='{}{0:dd/MM/yyyy  h:mm tt}'}" Header="Report Delivery (Time)" >

                                                        </data:DataGridTextColumn>

                                                        <data:DataGridTemplateColumn  Width="Auto" Header="Test Cancellation" IsReadOnly="True">
                                                            <data:DataGridTemplateColumn.CellTemplate >
                                                                <DataTemplate >
                                                                    <Image  Source="{Binding Path=TestCancelImage}" Height="20" ></Image>
                                                                </DataTemplate>
                                                            </data:DataGridTemplateColumn.CellTemplate>
                                                        </data:DataGridTemplateColumn>


                                                        <data:DataGridTextColumn  Width="Auto" Header="Test Cancel (Time)"  Binding="{Binding CancelledDateTime, StringFormat='{}{0:dd/MM/yyyy h:mm tt}'}">

                                                        </data:DataGridTextColumn>

                                                        <!--<data:DataGridTemplateColumn  Width="Auto" Header="Technician Entry" IsReadOnly="True">
                                                            <data:DataGridTemplateColumn.CellTemplate >
                                                                <DataTemplate >
                                                                    <Image  Source="{Binding Path=TechnicianEntryImage}" Height="20" ></Image>
                                                                </DataTemplate>
                                                            </data:DataGridTemplateColumn.CellTemplate>
                                                        </data:DataGridTemplateColumn>
                                                        <data:DataGridTextColumn Binding="{Binding RadiologistEntryDate, StringFormat='{}{0:dd/MM/yyyy  h:mm tt}'}" Header="Technician Entry (Time)" >
                                                         
                                                        </data:DataGridTextColumn>-->




                                                        <data:DataGridTemplateColumn  Width="Auto" Header="Radiographer Entry" IsReadOnly="True" Visibility="Collapsed">
                                                            <data:DataGridTemplateColumn.CellTemplate >
                                                                <DataTemplate >
                                                                    <Image  Source="{Binding Path=TechnicianEntryImage}" Height="20" ></Image>
                                                                </DataTemplate>
                                                            </data:DataGridTemplateColumn.CellTemplate>
                                                        </data:DataGridTemplateColumn>

                                                        <data:DataGridTextColumn Binding="{Binding RadiologistEntryDate, StringFormat='{}{0:dd/MM/yyyy  h:mm tt}'}" Header="Radiographer Entry (Time)" Visibility="Collapsed" >

                                                        </data:DataGridTextColumn>






                                                        <data:DataGridTemplateColumn Visibility="Collapsed">
                                                            <data:DataGridTemplateColumn.CellTemplate>
                                                                <DataTemplate>
                                                                    <HyperlinkButton Background="White"  VerticalAlignment="Center" Padding="5,0,5,0" IsTabStop="False" Click="btnPrint_Click"   x:Name="btnPrint" >
                                                                        <Image  Height="16" Stretch="Fill" Source="/PalashDynamics;component/Icons/Print_32.png"  Visibility="{Binding IsUpload, Converter={StaticResource VisiblilityConverter}}"    />
                                                                    </HyperlinkButton>
                                                                </DataTemplate>
                                                            </data:DataGridTemplateColumn.CellTemplate>

                                                        </data:DataGridTemplateColumn>

                                                    </data:DataGrid.Columns>
                                                </data:DataGrid>
                                            </controlsToolkit:DockPanel>

                                           

                                             
                                           

                                        </Grid>
                                    </controlsToolkit:DockPanel>
                                </Border>
                            </controlsToolkit:DockPanel>
                        </controlsToolkit:DockPanel>

                       

                        






                    </Grid>

                    <Grid  Height="AUTO" Width="auto" x:Name="BackPanel" Visibility="Collapsed" Grid.Row="1">
                        <controlsToolkit:DockPanel x:Name="Content" controlsToolkit:DockPanel.Dock="top" LastChildFill="true"  >
                            <Border BorderBrush="{StaticResource TabControlDarkerBorder}"   BorderThickness="1" CornerRadius="3,3,0,0" Margin="4,4,4,4"  Background="Transparent">
                                <controlsToolkit:DockPanel controlsToolkit:DockPanel.Dock="Top" LastChildFill="True">
                                    <controlsToolkit:DockPanel x:Name="docHeader1" controlsToolkit:DockPanel.Dock="Top" HorizontalAlignment="Stretch">
                                        <Grid controlsToolkit:DockPanel.Dock="Bottom">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"></RowDefinition>
                                                <RowDefinition ></RowDefinition>
                                            </Grid.RowDefinitions>
                                            <CheckBox controlsToolkit:DockPanel.Dock="Top" x:Name="chkIsFinalized" Content="Is Finalized" IsChecked="{Binding IsFinalized,Mode=OneWay}"  Grid.Row="0" Margin="4" VerticalAlignment="Center" HorizontalAlignment="Left" ></CheckBox>
                                            <Border Grid.Row="1" BorderBrush="{StaticResource TabControlDarkerBorder}"  Margin="4" controlsToolkit:DockPanel.Dock="Bottom" BorderThickness="1" CornerRadius="3,3,3,3" Background="Transparent" >
                                                <StackPanel x:Name="Footer" Orientation="Horizontal" VerticalAlignment="Center"   Margin="0,3,5,3" HorizontalAlignment="Right" Background="Transparent">
                                                    <StackPanel Orientation="Horizontal"  Margin="1" HorizontalAlignment="Right"  >
                                                        <ToggleButton x:Name="cmdSave" Content="Save" Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}"   TabIndex="12" Click="cmdSave_Click"></ToggleButton>
                                                        <ToggleButton Content="Cancel" x:Name="cmdCancel" Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}"  Click="cmdCancel_Click" TabIndex="13"></ToggleButton>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Border>
                                        </Grid>
                                        <controls:TabControl Padding="0"  BorderBrush="{StaticResource TabControlDarkerBorder}"  x:Name="TabControlMain" Margin="4,-4,4,4">
                                            <controls:TabItem x:Name="TabTestDetails" Style="{StaticResource TabItemStyle}"  Padding="0" Margin="0" Header="Test Details" >
                                                <controlsToolkit:DockPanel x:Name="DocMain1" controlsToolkit:DockPanel.Dock="Top" LastChildFill="True">
                                                    <controlsToolkit:DockPanel x:Name="docContet2" controlsToolkit:DockPanel.Dock="Top" LastChildFill="True">
                                                        <controlsToolkit:DockPanel x:Name="docContet3" controlsToolkit:DockPanel.Dock="Top">
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                                    <ColumnDefinition ></ColumnDefinition>
                                                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                                    <ColumnDefinition ></ColumnDefinition>
                                                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                                    <ColumnDefinition ></ColumnDefinition>
                                                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                                    <ColumnDefinition ></ColumnDefinition>
                                                                </Grid.ColumnDefinitions>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>
                                                                <TextBlock Text="Test Name" Grid.Row="0" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="4,10,4,4"></TextBlock>
                                                                <inputcombo:AutoCompleteComboBox x:Name="cmbTestName"  ItemsSource="{Binding}" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID"   Grid.Row="0" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="4,10,4,4" TabIndex="6" IsEnabled="False"></inputcombo:AutoCompleteComboBox>

                                                                <TextBlock Text="Patient Name" Grid.Row="0" Grid.Column="2" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="4,10,4,4"></TextBlock>
                                                                <TextBox x:Name="txtPatientName" IsReadOnly="True" Text="{Binding PatientFullName, Mode=TwoWay}"  Grid.Row="0" Grid.Column="3"  Margin="4,10,4,4" HorizontalAlignment="Stretch" VerticalAlignment="Center"   MaxLength="3"  TabIndex="2" ></TextBox>

                                                                <TextBlock  HorizontalAlignment="Right" VerticalAlignment="Center" Text="Radiologist " Grid.Row="0" Grid.Column="4"  Margin="4,10,4,4" />
                                                                <inputcombo:AutoCompleteComboBox  Margin="4" x:Name="cmbTreatingDr" Grid.Row="0" Grid.Column="5" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID" VerticalAlignment="Center" ></inputcombo:AutoCompleteComboBox>

                                                             

                                                                <TextBlock Text="Gender" Grid.Row="0" Grid.Column="6" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="4"></TextBlock>
                                                                <inputcombo:AutoCompleteComboBox x:Name="cmbGender"  ItemsSource="{Binding}" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID"   Grid.Row="0" Grid.Column="7" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="4" TabIndex="6" IsEnabled="False"></inputcombo:AutoCompleteComboBox>


                                                                <TextBlock Text="Film" Grid.Row="0" Grid.Column="2" Visibility="Collapsed" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="4,10,4,4"></TextBlock>
                                                                <inputcombo:AutoCompleteComboBox x:Name="cmbFilm" Visibility="Collapsed"  ItemsSource="{Binding}" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID"   Grid.Row="0" Grid.Column="3" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="4,10,4,4"  TabIndex="6" ></inputcombo:AutoCompleteComboBox>

                                                                <TextBlock Text="No. Of Films" Grid.Row="0" Grid.Column="4" Visibility="Collapsed" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="4,10,4,4"></TextBlock>
                                                                <TextBox x:Name="txtNoOfFilms" Text="{Binding NoOfFilms, Mode=TwoWay}" Visibility="Collapsed" Grid.Row="0" Grid.Column="5"  Margin="4,10,4,4" HorizontalAlignment="Stretch" VerticalAlignment="Center"   MaxLength="3"  TabIndex="7" TextChanged="txtNumber_TextChanged"  KeyDown="txtNumber_KeyDown"></TextBox>

                                                               
                                                                <TextBlock Text="Referred By" Grid.Row="1" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="4"></TextBlock>
                                                                <input:AutoCompleteBox Grid.Row="1" Grid.Column="1"  x:Name="txtReferenceDoctor" Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Center"  TabIndex="10" GotFocus="txtReferenceDoctor_GotFocus" />

                                                                <CheckBox Name="ChkReferDoctorSignature"  Grid.Row="1" Grid.Column="2" Grid.ColumnSpan="2" IsEnabled="{Binding IsChecked}" ToolTipService.ToolTip="Referal Doctor Signature"  Margin="4">For Doctor Digital Signature</CheckBox>
                                                            </Grid>
                                                        </controlsToolkit:DockPanel>
                                                    </controlsToolkit:DockPanel>

                                                    <controlsToolkit:DockPanel x:Name="docContet1" controlsToolkit:DockPanel.Dock="Bottom">

                                                        <!--<GroupBox:GroupBox IsTabStop="False" x:Name="grpTestInformation" Header="Template Details" Height="Auto"  Margin="4">-->

                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                                <ColumnDefinition ></ColumnDefinition>
                                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                                <ColumnDefinition ></ColumnDefinition>
                                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                                <ColumnDefinition ></ColumnDefinition>
                                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                                <ColumnDefinition ></ColumnDefinition>
                                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                            </Grid.ColumnDefinitions>
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="Auto"></RowDefinition>
                                                                <RowDefinition ></RowDefinition>
                                                                <RowDefinition Height="Auto"></RowDefinition>
                                                            </Grid.RowDefinitions>

                                                            <TextBlock Text="Radiologist" Grid.Row="0" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="4" Visibility="Collapsed"></TextBlock>
                                                            <inputcombo:AutoCompleteComboBox x:Name="cmbTempRadiologist"  ItemsSource="{Binding}" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" Visibility="Collapsed" SelectedValuePath="ID"   Grid.Row="0" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="4" TabIndex="6" IsEnabled="False"></inputcombo:AutoCompleteComboBox>

                                                          
                                                            <TextBlock Text="Result" Grid.Row="0" Grid.Column="4" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="4"></TextBlock>
                                                            <inputcombo:AutoCompleteComboBox x:Name="cmbResult"  ItemsSource="{Binding}" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID"   Grid.Row="0" Grid.Column="5" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="4" TabIndex="6" SelectionChanged="cmbResult_SelectionChanged"></inputcombo:AutoCompleteComboBox>

                                                            <TextBlock Text="Template" Grid.Row="0" Grid.Column="6" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="4"></TextBlock>
                                                            <inputcombo:AutoCompleteComboBox x:Name="cmbTemplate"  ItemsSource="{Binding}" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID"   Grid.Row="0" Grid.Column="7" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="4" TabIndex="6"></inputcombo:AutoCompleteComboBox>

                                                            <ToggleButton Content="Add Template" x:Name="cmdAdd" Background="#000000" Margin="4" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" TabIndex="8"  Grid.Column="8" Width="100" Click="cmdAddTemplate_Click"></ToggleButton>

                                                            <TextBlock Text="Template Description" Grid.Row="1" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="4"></TextBlock>

                                                            <controlsToolkit:DockPanel x:Name="dpC1RTB" Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="8" Margin ="4">
                                                                <c1:C1TabControl Grid.Row="0" Grid.Column="0"  SelectionChanged="OnSelectionChanged" TabStripPlacement="Bottom" Padding="0 0 0 2" c1:C1NagScreen.Nag="True" >
                                                                    <c1:C1TabItem Header="RichTextBox" Name="richTextBoxTab" c1:C1NagScreen.Nag="True" >
                                                                        <Grid>
                                                                            <Grid.Resources>
                                                                                <DataTemplate x:Name="printTemplate">
                                                                                    <Grid Height="{Binding ViewManager.PresenterInfo.Height}" Width="{Binding ViewManager.PresenterInfo.Width}">
                                                                                        <c1:C1RichTextPresenter Source="{Binding}" Margin="{Binding ViewManager.PresenterInfo.Padding}" c1:C1NagScreen.Nag="True" />
                                                                                    </Grid>
                                                                                </DataTemplate>
                                                                            </Grid.Resources>
                                                                            <Grid.RowDefinitions>
                                                                                <RowDefinition Height="Auto" />
                                                                                <RowDefinition />
                                                                            </Grid.RowDefinitions>
                                                                            <c1:C1RichTextBoxToolbar x:Name="richToolbar" RichTextBox="{Binding ElementName=richTextBox}" Margin="-1" c1:C1NagScreen.Nag="True" IsTabStop="False" />
                                                                            <c1:C1RichTextBox  x:Name="richTextBox" Grid.Row="1" BorderThickness="0" c1:C1NagScreen.Nag="True" Margin="0" ViewMode="Draft" VerticalContentAlignment="Top" IsTabStop="True">
                                                                                <c1:C1RichTextBox.PrintTemplate >
                                                                                    <DataTemplate x:Name="HeaderTemplate">
                                                                                        <Grid Margin="4" x:Name="gp">
                                                                                            <Grid.Resources>
                                                                                                <c1:ZoomToScaleTransformConverter x:Key="zoomConverter" />
                                                                                            </Grid.Resources>
                                                                                            <!--<Border Background="#19000000" Margin="4,4,-4,-4" CornerRadius="2" />
                                                                                            <Border Background="#19000000" Margin="3,3,-3,-3" CornerRadius="2" />
                                                                                            <Border Background="#19000000" Margin="2,2,-2,-2" CornerRadius="2" />
                                                                                            <Border Background="#19000000" Margin="1,1,-1,-1" CornerRadius="2" />
                                                                                            <Border BorderThickness="1" BorderBrush="#FF858585" Background="{Binding ViewManager.PresenterInfo.Background}"/>-->


                                                                                            <c1:C1LayoutTransformer Margin="30,135,0,0"  LayoutTransform="{Binding ViewManager.PresenterInfo.Zoom, Converter={StaticResource zoomConverter}}" c1:C1NagScreen.Nag="True">
                                                                                                <!--<Grid Height="{Binding ViewManager.PresenterInfo.Height}" Width="{Binding ViewManager.PresenterInfo.Width}">-->
                                                                                                <!--<Grid Height="{Binding ViewManager.PresenterInfo.Height}" Width="{Binding ViewManager.PresenterInfo.Width}">-->
                                                                                                <Grid Height="Auto" Width="Auto">
                                                                                                    <!--<c1:C1RichTextPresenter Source="{Binding}" Margin="{Binding ViewManager.PresenterInfo.Padding}"/>-->
                                                                                                    <c1:C1RichTextPresenter Source="{Binding}" Margin="30,135,20,180" c1:C1NagScreen.Nag="True" />
                                                                                                </Grid>
                                                                                            </c1:C1LayoutTransformer>

                                                                                            <TextBlock Text="Header" Visibility="Collapsed" x:Name="header" Margin="10" HorizontalAlignment="Center" >

                                                                                            </TextBlock>
                                                                                            <!--<TextBox x:Name="header" Text="{Binding Path=PatientName,Mode=TwoWay}" Margin="10" HorizontalAlignment="Center" />-->
                                                                                            <!-- This is the added header and footer. The rest of the template was taken from the default C1RichTextBox control template. -->



                                                                                            <Grid x:Name="PatientDetails" Visibility="Visible">

                                                                                                <Grid.RowDefinitions>
                                                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                                                </Grid.RowDefinitions>
                                                                                                <Grid.ColumnDefinitions>

                                                                                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                                                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                                                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                                                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                                                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                                                                    <ColumnDefinition ></ColumnDefinition>

                                                                                                </Grid.ColumnDefinitions>

                                                                                                <TextBlock Text="PATIENT NAME :"  Grid.Row="0" Grid.Column="0"  Margin="90,130,4,4" HorizontalAlignment="Left" FontWeight="Bold"  FontSize="12" />
                                                                                                <TextBlock Text="{Binding PatientName,Mode=TwoWay}"  Grid.Row="0" Grid.Column="1" Margin="30,130,4,4" HorizontalAlignment="Left"  FontSize="12" />
                                                                                                <TextBlock Text="AGE         :"  Grid.Row="0" Grid.Column="2" Margin="25,130,0,4" HorizontalAlignment="Left" FontWeight="Bold" FontSize="12" />
                                                                                                <TextBlock Text="{Binding Age,Mode=TwoWay}" Grid.Row="0" Grid.Column="3" Margin="30,130,20,4" HorizontalAlignment="Left"  FontSize="12"/>
                                                                                                <TextBlock Text="GENDER :"  Grid.Row="0" Grid.Column="4" HorizontalAlignment="Left" Margin="90,130,0,4" FontWeight="Bold" FontSize="12" />
                                                                                                <TextBlock Text="{Binding Gender,Mode=TwoWay}" Grid.Row="0" Grid.Column="5" Margin="10,130,0,4" HorizontalAlignment="Left"  FontSize="12"/>
                                                                                                <TextBlock Text="PATIENT ID      :"  Grid.Row="1" Grid.Column="0" Margin="90,0,4,4" HorizontalAlignment="Left" FontWeight="Bold" FontSize="12" />
                                                                                                <TextBlock Text="{Binding MRNo,Mode=TwoWay}" Grid.Row="1" Grid.Column="1" Margin="30,0,4,4" HorizontalAlignment="Left"  FontSize="12" />
                                                                                                <TextBlock Text="BILL NO. :"  Grid.Row="1"  Margin="25,0,0,4" Grid.Column="2"  HorizontalAlignment="Left" FontWeight="Bold" FontSize="12" />
                                                                                                <TextBlock Text="{Binding BillNo,Mode=TwoWay}" Grid.Row="1" Grid.Column="3" Margin="30,0,5,4" HorizontalAlignment="Left"  FontSize="12" />
                                                                                                <TextBlock Text="DATE                 :"  Grid.Row="2"  Margin="90,0,4,4" Grid.Column="0"  HorizontalAlignment="Left" FontWeight="Bold" FontSize="12" />
                                                                                                <TextBlock Text="{Binding OrderDate,Mode=TwoWay}" Grid.Row="2" Grid.Column="1" Margin="30,0,4,4" HorizontalAlignment="Left"  FontSize="12"/>
                                                                                                <TextBlock Text="REF BY    :"  Grid.Row="2"  Margin="25,0,0,4" Grid.Column="2"  HorizontalAlignment="Left"  FontWeight="Bold" FontSize="12" />
                                                                                                <TextBlock Text="{Binding ReferredDoctor,Mode=TwoWay}" Grid.Row="2" Grid.Column="3" Margin="30,0,5,4" Grid.ColumnSpan="6" HorizontalAlignment="Left"  FontSize="12"/>
                                                                                                <Border Grid.Row="3" Margin="30,0,20,4"  Grid.ColumnSpan="7"  BorderBrush="Black"  BorderThickness="1" ></Border>

                                                                                                <TextBlock Text="{Binding TestNAme,Mode=TwoWay}" Grid.Row="4"  Margin="300,0,0,4"  Grid.ColumnSpan="7"  FontWeight="Bold" FontSize="18"/>
                                                                                                <Border  Margin="30,0,20,4" Grid.Row="5"  Grid.ColumnSpan="7"  BorderBrush="Black"  BorderThickness="1" ></Border>

                                                                                            </Grid>



                                                                                            <!--<TextBlock Text="Priyanka" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="10">

                                        </TextBlock>-->


                                                                                        </Grid>
                                                                                    </DataTemplate>
                                                                                </c1:C1RichTextBox.PrintTemplate>
                                                                            </c1:C1RichTextBox>
                                                                        </Grid>
                                                                    </c1:C1TabItem>
                                                                    <c1:C1TabItem Header="Html" Name="htmlTab" c1:C1NagScreen.Nag="True" Visibility="Collapsed">
                                                                        <c1:C1RichTextBox x:Name="htmlBox" BorderThickness="0" c1:C1NagScreen.Nag="True" />
                                                                    </c1:C1TabItem>

                                                                    <c1:C1TabItem Header="Rtf" Name="rtfTab" c1:C1NagScreen.Nag="True" Visibility="Collapsed">
                                                                        <c1:C1RichTextBox x:Name="rtfBox" BorderThickness="0" c1:C1NagScreen.Nag="True" />
                                                                    </c1:C1TabItem>
                                                                </c1:C1TabControl>

                                                            </controlsToolkit:DockPanel>

                                                            <!--<myRich:RichTextEditor Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="8" Margin ="4"  x:Name="richTextEditor"  TabIndex="5" />-->

                                                            <!--<controlsToolkit:DockPanel x:Name="dprtb" Grid.Column="1" Grid.Row="2" Grid.ColumnSpan="8"></controlsToolkit:DockPanel>-->
                                                            <!--<Button x:Name="btn" Click="btn_Click" Grid.Column="1" Grid.Row="2" Grid.ColumnSpan="8" Content="View Teamplate"></Button>-->

                                                        </Grid>
                                                        <!--</GroupBox:GroupBox>-->


                                                    </controlsToolkit:DockPanel>
                                                </controlsToolkit:DockPanel>
                                            </controls:TabItem>

                                            <controls:TabItem x:Name="TabItemDetails" Style="{StaticResource TabItemStyle}" Visibility="Collapsed"  Padding="0" Margin="0" Header="Item Details" >
                                                <controlsToolkit:DockPanel x:Name="DocMain2" controlsToolkit:DockPanel.Dock="Top" LastChildFill="True">

                                                    <controlsToolkit:DockPanel x:Name="docContet4" controlsToolkit:DockPanel.Dock="Top" LastChildFill="True">
                                                        <controlsToolkit:DockPanel x:Name="docContet5" controlsToolkit:DockPanel.Dock="Top">
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                                    <ColumnDefinition ></ColumnDefinition>
                                                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                                    <ColumnDefinition ></ColumnDefinition>
                                                                    <ColumnDefinition Width="Auto"></ColumnDefinition>

                                                                </Grid.ColumnDefinitions>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>

                                                                </Grid.RowDefinitions>

                                                                <TextBlock Text="Store" Grid.Row="0" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="4,10,4,4"></TextBlock>
                                                                <inputcombo:AutoCompleteComboBox x:Name="cmbStore"  ItemsSource="{Binding}" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID"   Grid.Row="0" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="4,10,4,4" TabIndex="6" IsEnabled="False"></inputcombo:AutoCompleteComboBox>

                                                                <!--<TextBlock Text="Item" Grid.Row="0" Grid.Column="2" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="4,10,4,4"></TextBlock>
                                                            <inputcombo:AutoCompleteComboBox x:Name="cmbItem"  ItemsSource="{Binding}" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID"   Grid.Row="0" Grid.Column="3" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="4,10,4,4" TabIndex="6"></inputcombo:AutoCompleteComboBox>

                                                            <TextBlock Text="Quantity" Grid.Row="0" Grid.Column="4" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="4,10,4,4"></TextBlock>
                                                            <TextBox x:Name="txtQuantity"  Grid.Row="0" Grid.Column="5"  Margin="4,10,4,4" HorizontalAlignment="Stretch" VerticalAlignment="Center"   MaxLength="100"  TabIndex="7"></TextBox>-->

                                                                <ToggleButton Content="Add" x:Name="cmdAddItem" Background="#000000" Margin="4,10,4,4" HorizontalAlignment="Left" Style="{StaticResource ToggleButtonStyle}" TabIndex="8"  Click="cmdAddItem_Click" Grid.Column="2"></ToggleButton>

                                                            </Grid>
                                                        </controlsToolkit:DockPanel>
                                                    </controlsToolkit:DockPanel>

                                                    <controlsToolkit:DockPanel x:Name="docContet6" controlsToolkit:DockPanel.Dock="Bottom">
                                                        <Border  controlsToolkit:DockPanel.Dock="Top" BorderBrush="{StaticResource TabControlDarkerBorder}"  Margin="-1,10,-1,-1" BorderThickness="1" CornerRadius="3,3,0,0" Background="Transparent">
                                                            <ContentControl VerticalAlignment="Center" FontSize="12" Content="Item Details" Margin="-1" Style="{StaticResource Header}"     HorizontalAlignment="Stretch" />
                                                        </Border>
                                                        <data:DataGrid x:Name="dgItemDetailsList" AutoGenerateColumns="False" ItemsSource="{Binding}" VerticalScrollBarVisibility="Visible" Margin="0" HorizontalAlignment="Stretch"  TabIndex="12" >
                                                            <data:DataGrid.Columns>
                                                                <!--<data:DataGridTextColumn Binding="{Binding ItemCode}"  Header="Item Code"  IsReadOnly="True"></data:DataGridTextColumn>-->
                                                                <data:DataGridTextColumn Binding="{Binding ItemName}"  Header="Item Name"   IsReadOnly="True"></data:DataGridTextColumn>
                                                                <data:DataGridTextColumn Binding="{Binding BatchCode}"  Header="Batch Code"  IsReadOnly="True"></data:DataGridTextColumn>

                                                                <data:DataGridTextColumn Binding="{Binding BalanceQuantity,StringFormat=0.00,Mode=OneWay}" Header="Bal. Qty"  IsReadOnly="True">
                                                                    <data:DataGridTextColumn.ElementStyle>
                                                                        <Style TargetType="TextBlock">
                                                                            <Setter Property="TextAlignment" Value="Right"/>
                                                                        </Style>
                                                                    </data:DataGridTextColumn.ElementStyle>
                                                                </data:DataGridTextColumn>

                                                                <data:DataGridTemplateColumn Header="Expiry Date" IsReadOnly="True">
                                                                    <data:DataGridTemplateColumn.CellTemplate >
                                                                        <DataTemplate>
                                                                            <TextBlock 
                                                                        Text="{Binding ExpiryDate, 
                                                                        Converter={StaticResource DateConverter},ConverterParameter={StaticResource ExpiryDateDisplayFormat}}" 
                                                                        Margin="2" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" />
                                                                        </DataTemplate>
                                                                    </data:DataGridTemplateColumn.CellTemplate>
                                                                </data:DataGridTemplateColumn>

                                                                <data:DataGridTextColumn Binding="{Binding Quantity,StringFormat=0.00,Mode=OneWay}" Header="Ideal Qty"  IsReadOnly="True">
                                                                    <data:DataGridTextColumn.ElementStyle>
                                                                        <Style TargetType="TextBlock">
                                                                            <Setter Property="TextAlignment" Value="Right"/>
                                                                        </Style>
                                                                    </data:DataGridTextColumn.ElementStyle>
                                                                </data:DataGridTextColumn>

                                                                <data:DataGridTextColumn Binding="{Binding ActualQantity,StringFormat=0.00,Mode=OneWay}" Header="Actual Qty" >
                                                                    <data:DataGridTextColumn.ElementStyle>
                                                                        <Style TargetType="TextBlock">
                                                                            <Setter Property="TextAlignment" Value="Right"/>
                                                                        </Style>
                                                                    </data:DataGridTextColumn.ElementStyle>
                                                                </data:DataGridTextColumn>


                                                                <data:DataGridTemplateColumn>
                                                                    <data:DataGridTemplateColumn.CellTemplate>

                                                                        <DataTemplate>
                                                                            <HyperlinkButton VerticalAlignment="Center" x:Name="AddBatch"  Content="Asign Batch"  Padding="5,0,5,0" Click="AddBatch_Click" ></HyperlinkButton>
                                                                        </DataTemplate>
                                                                    </data:DataGridTemplateColumn.CellTemplate>
                                                                </data:DataGridTemplateColumn>

                                                                <data:DataGridTemplateColumn>
                                                                    <data:DataGridTemplateColumn.CellTemplate>
                                                                        <DataTemplate>
                                                                            <HyperlinkButton VerticalAlignment="Center" FontFamily="Webdings" Content="r"  Padding="5,0,5,0" IsTabStop="False" Click="cmdDelete_Click"  x:Name="cmdDelete" ToolTipService.ToolTip="Delete"></HyperlinkButton>
                                                                        </DataTemplate>
                                                                    </data:DataGridTemplateColumn.CellTemplate>
                                                                </data:DataGridTemplateColumn>

                                                                <data:DataGridTextColumn Binding="{Binding BalanceQuantity,StringFormat=0.00,Mode=OneWay}" Header="Bal. Qty"  IsReadOnly="True">
                                                                    <data:DataGridTextColumn.ElementStyle>
                                                                        <Style TargetType="TextBlock">
                                                                            <Setter Property="TextAlignment" Value="Right"/>
                                                                        </Style>
                                                                    </data:DataGridTextColumn.ElementStyle>
                                                                </data:DataGridTextColumn>


                                                            </data:DataGrid.Columns>
                                                        </data:DataGrid>
                                                    </controlsToolkit:DockPanel>
                                                </controlsToolkit:DockPanel>
                                            </controls:TabItem>
                                        </controls:TabControl>
                                    </controlsToolkit:DockPanel>
                                </controlsToolkit:DockPanel>
                            </Border>
                        </controlsToolkit:DockPanel>
                    </Grid>

                </Grid>


            </controlsToolkit:DockPanel>

           

        </controlsToolkit:DockPanel>
      
    </Grid>
    
   

</UserControl>
