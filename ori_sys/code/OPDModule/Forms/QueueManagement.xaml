<UserControl x:Class="CIMS.Forms.QueueManagement"
   xmlns:controlsToolkit="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Toolkit"  
   xmlns:data="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"  
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
   xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"
   xmlns:dataInput="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data.Input"
   xmlns:input="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Input"
   xmlns:inputcombo="clr-namespace:PalashDynamics.Controls;assembly=PalashDynamics.Controls.AutoCompleteComboBox" 
   xmlns:Converter="clr-namespace:PalashDynamics.Converters;assembly=PalashDynamics.Converters"
   xmlns:radiantq="clr-namespace:CIMS" 
   Height="auto" Width="auto" >
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/PalashDynamics;component/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <Converter:DateTimeConverter x:Key="DateConverter"></Converter:DateTimeConverter>
            <Converter:ToggleBooleanValueConverter x:Key="NegateValueConverter"/>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid x:Name="LayoutRoot" Margin="2">

        <controlsToolkit:DockPanel   Name="docMain" LastChildFill="True">
            <Border controlsToolkit:DockPanel.Dock= "Top"  BorderBrush="#FF788678"   Width="auto" BorderThickness="1" CornerRadius="3,3,3,3" Grid.ColumnSpan="2"  Grid.Row="0" Grid.Column="0" Margin="4">
                <Grid x:Name="LayoutRoot1" Background="White" Margin="4" HorizontalAlignment="Stretch"  >
                    
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition ></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition ></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition ></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition ></ColumnDefinition>
                    

                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <TextBlock  HorizontalAlignment="Right" VerticalAlignment="Center" Text="From Date" Grid.Row="0" Grid.Column="0"  Margin="4" />
                    <controls:DatePicker   x:Name="dtpFromDate" Margin="4"  KeyUp="txtFirstName_KeyUp" Grid.Row="0" Grid.Column="1" HorizontalAlignment="Stretch"  TabIndex="0" ToolTipService.ToolTip="Please Enter FromDate"/>

                    <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center" Text="To Date" Grid.Row="0" Grid.Column="2"  Margin="4" />
                    <controls:DatePicker   x:Name="dtpToDate" Margin="4"  KeyUp="txtFirstName_KeyUp" Grid.Row="0" Grid.Column="3" HorizontalAlignment="Stretch" TabIndex="1" ToolTipService.ToolTip="Please Enter ToDate"/>
                    <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center"  Margin="4" Text="Visit Status"  Grid.Row="2" Grid.Column="4"/>
                    <!--<TextBlock HorizontalAlignment="Right" VerticalAlignment="Center"  Margin="4" Text="Current Visit Status"  Grid.Row="3" Grid.Column="0"/>-->
                    <inputcombo:AutoCompleteComboBox  x:Name="cmbCurrentVisit"  KeyUp="txtFirstName_KeyUp"  Grid.Row="2" Grid.Column="5" Margin="4" VerticalAlignment="Center" ItemsSource="{Binding}" HorizontalAlignment="Stretch"  SelectedValuePath="ID" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" TabIndex="11" ToolTipService.ToolTip="Please Select Visit Status" ></inputcombo:AutoCompleteComboBox>

<TextBlock HorizontalAlignment="Right" VerticalAlignment="Center" Text="MR No." Grid.Row="1"  Grid.Column="2" Margin="4" />
                    <TextBox x:Name="txtMRNO"  Grid.Column="3" Grid.Row="1"  KeyUp="txtFirstName_KeyUp" Text="{Binding MrNo, Mode=TwoWay, ValidatesOnExceptions=true, NotifyOnValidationError=true}" Margin="4" HorizontalAlignment="Stretch" MaxLength="50" TabIndex="6" Height="25" ToolTipService.ToolTip="PLease Enter MRNo."/>
<TextBlock HorizontalAlignment="Right" VerticalAlignment="Center" Text="Contact No" Grid.Row="2"  Grid.Column="0" Margin="4" />
                    <TextBox x:Name="txtContactNo"  Grid.Column="1" Grid.Row="2"  KeyUp="txtFirstName_KeyUp" Text="{Binding MrNo, Mode=TwoWay, ValidatesOnExceptions=true, NotifyOnValidationError=true}" Margin="4" HorizontalAlignment="Stretch" MaxLength="50" TabIndex="9" Height="25" TextChanged="txtContactNo_TextChanged" KeyDown="txtContactNo_KeyDown" ToolTipService.ToolTip="PLease Enter Contact No."/>
                    <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center" Text="Token No" Grid.Row="2"  Grid.Column="2" Margin="4" />
                    <TextBox x:Name="txtTokenNo"  Grid.Column="3" Grid.Row="2"  KeyUp="txtFirstName_KeyUp" Text="{Binding MrNo, Mode=TwoWay, ValidatesOnExceptions=true, NotifyOnValidationError=true}" Margin="4" HorizontalAlignment="Stretch" MaxLength="50" TabIndex="10" Height="25" ToolTipService.ToolTip="PLease Enter Token No."/>

                    <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center"  Margin="4" Text="Department"  Grid.Row="0" Grid.Column="6"/>
                    <inputcombo:AutoCompleteComboBox  x:Name="cmbDepartment"  KeyUp="txtFirstName_KeyUp" Grid.Row="0" Grid.Column="7" Margin="4" VerticalAlignment="Center" ItemsSource="{Binding}" HorizontalAlignment="Stretch"   SelectedValuePath="ID" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectionChanged= "cmbDepartment_SelectionChanged" TabIndex="4" ToolTipService.ToolTip="PLease Select Department"></inputcombo:AutoCompleteComboBox>
                    <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center"  Margin="4" Text="Doctor"  Grid.Row="1" Grid.Column="0"/>
                    <inputcombo:AutoCompleteComboBox  x:Name="cmbDoctor"  KeyUp="txtFirstName_KeyUp" Grid.Row="1" Grid.Column="1" Margin="4" VerticalAlignment="Center"  ItemsSource="{Binding}" HorizontalAlignment="Stretch" SelectedValuePath="ID" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" TabIndex="5" ToolTipService.ToolTip="PLease Select Doctor"></inputcombo:AutoCompleteComboBox>
                    
                    <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center" Text="Clinic" Grid.Row="0" Grid.Column="4" Margin="4"/>
                    <inputcombo:AutoCompleteComboBox x:Name="cmbUnit" Grid.Row="0" Grid.Column="5"  KeyUp="txtFirstName_KeyUp" Margin="4" VerticalAlignment="Center" ItemsSource="{Binding}" HorizontalAlignment="Stretch" SelectedValuePath="ID" SelectedItemBinding="{Binding  MasterListItem,Mode=OneWay}" SelectionChanged="cmbUnit_SelectionChanged" TabIndex="3"  ToolTipService.ToolTip="Please Select Clinic"></inputcombo:AutoCompleteComboBox> 

                    <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center" Text="First Name" Grid.Row="1"  Grid.Column="4" Margin="4" />
                    <TextBox x:Name="txtSearchCriteria"  Grid.Column="5" Grid.Row="1"  KeyUp="txtFirstName_KeyUp" Text="{Binding FirstName, Mode=TwoWay, ValidatesOnExceptions=true, NotifyOnValidationError=true}" Margin="4" HorizontalAlignment="Stretch"  LostFocus="txtSearchCriteria_LostFocus" MaxLength="50" TabIndex="7"  Height="25" TextChanged="txtSearchCriteria_TextChanged" KeyDown="txtSearchCriteria_KeyDown" ToolTipService.ToolTip="PLease Enter First Name"/>
                    
                    <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center" Text="Last Name" Grid.Row="1"  Grid.Column="6" Margin="4" />
                    <TextBox x:Name="txtLastName"  Grid.Column="7" Grid.Row="1"  KeyUp="txtFirstName_KeyUp" Text="{Binding LastName, Mode=TwoWay, ValidatesOnExceptions=true, NotifyOnValidationError=true}" Margin="4" HorizontalAlignment="Stretch" LostFocus="txtLastName_LostFocus" MaxLength="50" TabIndex="8" Height="25" TextChanged="txtSearchCriteria_TextChanged" ToolTipService.ToolTip="PLease Enter Last Name"/>

                    <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center" Text="Special Registration" Grid.Row="2"  Grid.Column="6" Margin="4" />
                    <inputcombo:AutoCompleteComboBox   x:Name="cmbSpRegistration" SelectedValuePath="ID" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" Grid.Row="2" Grid.Column="7"  Margin="4" HorizontalAlignment="Stretch" TabIndex="12" IsEnabled="True" />


                    <!--<ToggleButton Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible"  Content="Search"   x:Name="cmdSearch" Click="cmdSearch_Click"  Grid.Row="1" Grid.Column="4" Height="20"></ToggleButton>-->
                    <StackPanel Grid.Column="6" Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Grid.ColumnSpan="2" >
                        <Button x:Name="cmdSearch" Click="cmdSearch_Click" Margin="4" ToolTipService.ToolTip="Search Patient"  Grid.Row="2" Grid.Column="4" TabIndex="13" >
                             <Image Source="/PalashDynamics;component/Icons/xmag.png" Margin="2" Width="20" ></Image>
                        </Button>
                        
                        <Button x:Name="cmdMoveUp" Grid.Row="2" Margin="4" Click="cmdMoveUp_Click" Visibility="Collapsed" TabIndex="11" >
                            <Button.Content>
                                <TextBlock Text="5" FontSize="18" FontFamily="Webdings" ToolTipService.ToolTip="Move Up"></TextBlock>
                            </Button.Content>
                        </Button>
                        <Button Grid.Column="6" Margin="4" x:Name="cmdMoveDown" Grid.Row="2" Click="cmdMoveDown_Click" Visibility="Collapsed" TabIndex="12" >
                            <Button.Content>
                                <TextBlock Text="6" FontSize="18" FontFamily="Webdings" ToolTipService.ToolTip="Move Down"></TextBlock>
                            </Button.Content>
                        </Button>
                    </StackPanel>
                       

                        <!--<Image Source="/PalashDynamics;component/Icons/Search_b.JPG"  HorizontalAlignment="Left"  Grid.Column="4" Grid.Row="1" Margin="4,4,4,4" Width="20"  ></Image>-->
                        <!--<CheckBox x:Name="chkCancelled" Content="Cancelled" Grid.Column="2" Margin="4"></CheckBox>-->
                 
                     
                 
                </Grid>
            </Border>
            <controlsToolkit:DockPanel  controlsToolkit:DockPanel.Dock="Right"  Name="doc3" LastChildFill="True" Margin="2">
                <controlsToolkit:DockPanel  controlsToolkit:DockPanel.Dock="Bottom"   Name="doc4" LastChildFill="True" Margin="2">
                    <controlsToolkit:DockPanel  controlsToolkit:DockPanel.Dock="Bottom">
                        <Grid >
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>                                
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="852*" />
                                <!--<ColumnDefinition />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>-->
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition/>
                            </Grid.RowDefinitions>

                            <ToggleButton Content="Call Patient" x:Name="cmdCallPatient" Width ="150" Height="23" Grid.Row="0" Grid.Column="0" Background="#000000" Margin="4,0,5,0" HorizontalAlignment="Right" Style="{StaticResource ToggleButtonStyle}"   Click="cmdCallPatient_Click"></ToggleButton>
                            <ToggleButton Content="Token Display" x:Name="TokenDisplay" Width ="150" Height="23" Grid.Row="0" Grid.Column="1"  Background="#000000" Margin="4,0,5,0" HorizontalAlignment="Right" Style="{StaticResource ToggleButtonStyle}" Click="TokenDisplay_Click"></ToggleButton>
                            <ToggleButton Content="Add Followup" x:Name="AddFollowup" Width="150" Height="23" Grid.Row="0" Grid.Column="2" Background="#000000" Margin="4,0,5,0" HorizontalAlignment="Right" Style="{StaticResource ToggleButtonStyle}" Click="AddFollowup_Click"/>
                            <StackPanel Grid.Column="4" Orientation="Horizontal" HorizontalAlignment="Right"></StackPanel>
                            <ToggleButton x:Name="cmdPrint" Content="Print" Background="#000000" Margin="4,0,5,0" Grid.Column="4" HorizontalAlignment="Right" Visibility="Visible" Style="{StaticResource ToggleButtonStyle}" Click="cmdPrint_Click" />
                            <CheckBox x:Name="chkExcel" Content="Export To Excel" Grid.Column="4" Background="#000000" Margin="4,3,90,0" Width="122" HorizontalAlignment="Right"></CheckBox>
                            <!--<Image Source="/PalashDynamics;component/Icons/Search_b.JPG"  HorizontalAlignment="Left"  Grid.Column="4" Margin="4,4,4,4" Width="20"  ></Image>-->
                            <!--<CheckBox x:Name="chkCancelled" Content="Cancelled" Grid.Column="2" Margin="4"></CheckBox>-->
                            <!--<Button x:Name="cmdMoveUp" Grid.Column="5" Margin="4" Click="cmdMoveUp_Click" >
                                <Button.Content>
                                    <TextBlock Text="5" FontSize="18" FontFamily="Webdings"></TextBlock>
                                </Button.Content>
                            </Button>
                            <Button Grid.Column="6" Margin="4" x:Name="cmdMoveDown" Click="cmdMoveDown_Click" >
                                <Button.Content>
                                    <TextBlock Text="6" FontSize="18" FontFamily="Webdings"></TextBlock>
                                </Button.Content>
                            </Button>-->
                        </Grid>
                    </controlsToolkit:DockPanel>

                    <Border BorderBrush="{StaticResource TabControlDarkerBorder}"  Margin="0,-1,0,0" BorderThickness="1" CornerRadius="0,0,3,3" Background="Transparent">
                        <radiantq:DataGridMovableRows RowsMoved="dataGrid1_RowsMoved" BeforeMovingRows="dataGrid1_BeforeMovingRows" x:Name="dgQueueList" Margin="2"  AutoGenerateColumns="False" ItemsSource="{Binding}" HorizontalAlignment="Stretch" VerticalScrollBarVisibility="Visible" VerticalAlignment="Stretch" SelectionChanged="dgQueueList_SelectionChanged" IsReadOnly="True" TabIndex="13">
                            <data:DataGrid.Columns>
                                <!--<data:DataGridTemplateColumn>
                                    <data:DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button>
                                                <Button.Content>
                                                    <TextBlock Text="5" FontSize="18" FontFamily="Webdings"></TextBlock>
                                                </Button.Content>
                                            </Button>
                                        </DataTemplate>
                                    </data:DataGridTemplateColumn.CellTemplate>
                                </data:DataGridTemplateColumn>
                                <data:DataGridTemplateColumn>
                                    <data:DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button>
                                                <Button.Content>
                                                    <TextBlock Text="6" FontSize="18" FontFamily="Webdings"></TextBlock>
                                                </Button.Content>
                                            </Button>
                                        </DataTemplate>
                                    </data:DataGridTemplateColumn.CellTemplate>
                                </data:DataGridTemplateColumn>-->
                                <data:DataGridTextColumn Binding="{Binding SortOrder}" Header="Token No.">
                                    <data:DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="TextAlignment" Value="Right"/>
                                        </Style>
                                    </data:DataGridTextColumn.ElementStyle>
                                </data:DataGridTextColumn>
                                <data:DataGridTextColumn Binding="{Binding MRNO}" Header="MR No." />
                                <data:DataGridTextColumn Binding="{Binding OPDNO}" Header="OPD No." />
                                <data:DataGridTextColumn Binding="{Binding PatientName}" Header="Patient Name" Width="150" />
                                <data:DataGridTextColumn Binding="{Binding ContactNo1}" Header="Contact No"/>
                                <data:DataGridTextColumn Binding="{Binding ServiceName}" Header="Service" Visibility="Collapsed" />
                                <data:DataGridTextColumn Binding="{Binding VisitType}" Header="Visit Type" />
                                <data:DataGridTextColumn Binding="{Binding VisitDate,Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}" Header="Visit Date" />

                                
                                <!--<data:DataGridTextColumn Binding="{Binding Remark}" Header="Remark" />-->
                                <data:DataGridTextColumn Binding="{Binding Complaints}" Header="Remark" />
                                <data:DataGridTextColumn Binding="{Binding UnitName}" Header="Clinic" />
                                <data:DataGridTextColumn Binding="{Binding Discription}" Header="Department" />
                                <data:DataGridTextColumn Binding="{Binding DoctorName}" Header="Doctor" />
                                <data:DataGridTextColumn Binding="{Binding DateTime, Converter={StaticResource DateConverter},ConverterParameter='hh:mm tt'}" Header="In Time" />
                                <data:DataGridTextColumn Binding="{Binding Complaints}" Header="Primary Symptoms" Visibility="Collapsed" />
                                <data:DataGridTextColumn Binding="{Binding ReferredDoctor}" Header="Reference Doctor"/>
                                <data:DataGridTextColumn Binding="{Binding Cabin}" Header="Cabin"/>
                                <data:DataGridTextColumn Binding="{Binding SpecialReg}" Header="Special Registration"/>
                                <data:DataGridTextColumn Binding="{Binding CrVisitStatus}" Header="Current Status"/>

                                <data:DataGridTemplateColumn Header="Health Package" Visibility="Collapsed" >
                                    <data:DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <CheckBox x:Name="chkIsHealthPackage" IsChecked="{Binding Path=IsHealthPackage,Mode=TwoWay}"  VerticalAlignment="Center" HorizontalAlignment="Center" Width="Auto" IsEnabled="False"></CheckBox>
                                        </DataTemplate>
                                    </data:DataGridTemplateColumn.CellTemplate>
                                </data:DataGridTemplateColumn>

                                <data:DataGridTemplateColumn Header="Close Visit">
                                    <data:DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <CheckBox x:Name="chkVisitClose" IsChecked="{Binding Path=CloseVisit,Mode=TwoWay}"   Click="chkVisitClose_Click"  VerticalAlignment="Center" HorizontalAlignment="Center" Width="Auto" ></CheckBox>
                                        </DataTemplate>
                                    </data:DataGridTemplateColumn.CellTemplate>
                                </data:DataGridTemplateColumn>
                               

                            </data:DataGrid.Columns>
                        </radiantq:DataGridMovableRows>
                    </Border>

                </controlsToolkit:DockPanel>

            </controlsToolkit:DockPanel>
        </controlsToolkit:DockPanel>


    </Grid>
</UserControl>