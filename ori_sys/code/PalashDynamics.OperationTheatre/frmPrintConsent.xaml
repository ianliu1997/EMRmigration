<controls:ChildWindow x:Class="PalashDynamics.OperationTheatre.frmPrintConsent"
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
           xmlns:controlsToolkit="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Toolkit"
           xmlns:c1="http://schemas.componentone.com/winfx/2006/xaml"
           xmlns:Converter="clr-namespace:PalashDynamics.Converters;assembly=PalashDynamics.Converters"
           xmlns:Localization="clr-namespace:PalashDynamic.Localization;assembly=PalashDynamic.Localization"
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
           xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls" Title="Print Consent">

    <controls:ChildWindow.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/PalashDynamics;component/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <Converter:DateTimeConverter x:Key="DateConverter"></Converter:DateTimeConverter>
            <Localization:Localized x:Key="locResource"></Localization:Localized>
        </ResourceDictionary>
    </controls:ChildWindow.Resources>

    <Grid x:Name="LayoutRoot" Margin="2">
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <controlsToolkit:DockPanel x:Name="dpC1RTB" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="8" Margin ="4">
            <c1:C1TabControl SelectionChanged="OnSelectionChanged" TabStripPlacement="Bottom" Padding="0 0 0 2" c1:C1NagScreen.Nag="True">
                <c1:C1TabItem Header="RichTextBox" Name="richTextBoxTab" c1:C1NagScreen.Nag="True">
                    <Grid>
                        <Grid.Resources>
                            <DataTemplate x:Name="printTemplate">
                                <Grid Height="{Binding ViewManager.PresenterInfo.Height}" Width="{Binding ViewManager.PresenterInfo.Width}">
                                    <c1:C1RichTextPresenter Source="{Binding}" Margin="{Binding ViewManager.PresenterInfo.Padding}" c1:C1NagScreen.Nag="True" />
                                </Grid>
                            </DataTemplate>
                        </Grid.Resources>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <!--<c1:C1RichTextBoxToolbar x:Name="richToolbar" RichTextBox="{Binding ElementName=richTextBox}" Margin="-1,-1,-1,0" c1:C1NagScreen.Nag="True" Visibility="Collapsed" />-->

                        <c1:C1RichTextBox Html="{Binding Consent}" x:Name="richTextBox" Grid.Row="1" BorderThickness="0" c1:C1NagScreen.Nag="True" >
                            <c1:C1RichTextBox.PrintTemplate >
                                <DataTemplate x:Name="HeaderTemplate">
                                    <Grid Margin="4" x:Name="gp">
                                        <Grid.Resources>
                                            <c1:ZoomToScaleTransformConverter x:Key="zoomConverter" />
                                        </Grid.Resources>
                                        <Border Background="#19000000" Margin="4,4,-4,-4" CornerRadius="2" />
                                        <Border Background="#19000000" Margin="3,3,-3,-3" CornerRadius="2" />
                                        <Border Background="#19000000" Margin="2,2,-2,-2" CornerRadius="2" />
                                        <Border Background="#19000000" Margin="1,1,-1,-1" CornerRadius="2" />
                                        <Border BorderThickness="1" BorderBrush="#FF858585" Background="{Binding ViewManager.PresenterInfo.Background}"/>

                                        <c1:C1LayoutTransformer Margin="0,115,4,100" LayoutTransform="{Binding ViewManager.PresenterInfo.Zoom, Converter={StaticResource zoomConverter}}">
                                            <Grid Height="{Binding ViewManager.PresenterInfo.Height}" Width="{Binding ViewManager.PresenterInfo.Width}">
                                                <c1:C1RichTextPresenter Source="{Binding}" Margin="{Binding ViewManager.PresenterInfo.Padding}"/>
                                            </Grid>
                                        </c1:C1LayoutTransformer>

                                        <TextBlock Text="Header" Visibility="Collapsed" x:Name="header" Margin="10" HorizontalAlignment="Center" >
                                        </TextBlock>

                                        <Grid x:Name="PatientDetails" Visibility="Collapsed" Margin="100">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"></RowDefinition>
                                                <RowDefinition Height="Auto"></RowDefinition>
                                                <RowDefinition Height="Auto"></RowDefinition>
                                                <RowDefinition Height="Auto"></RowDefinition>
                                                <RowDefinition Height="Auto"></RowDefinition>
                                                <RowDefinition Height="Auto"></RowDefinition>
                                                <RowDefinition Height="Auto"></RowDefinition>
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Text="MR. No." Grid.Row="1" Width="100" Grid.Column="0" Margin="4" HorizontalAlignment="left" FontWeight="Bold" FontSize="12" />
                                            <TextBlock Text=":" Grid.Row="1" Grid.Column="1" Margin="4" HorizontalAlignment="Right" FontWeight="Bold" FontSize="12" />
                                            <TextBlock Text="{Binding MRNo,Mode=TwoWay}" Grid.Row="1" Grid.Column="2" Margin="4" HorizontalAlignment="Left" FontWeight="Bold" FontSize="11" />

                                            <TextBlock Text="   Date" Grid.Row="1" Grid.Column="3" Width="70" Margin="4" HorizontalAlignment="left" FontWeight="Bold" FontSize="12"/>
                                            <TextBlock Text=":" Grid.Row="1" Grid.Column="4" Margin="4" HorizontalAlignment="Right" FontWeight="Bold" FontSize="12" />
                                            <TextBlock Text="{Binding Date,Mode=TwoWay}" Grid.Row="1" Grid.Column="5" Margin="4" HorizontalAlignment="Left" FontWeight="Bold" FontSize="11"/>

                                            <TextBlock Text="Patient Name"  Grid.Row="2" Width="100" Grid.Column="0" Margin="4" HorizontalAlignment="left"  FontWeight="Bold" FontSize="12"/>
                                            <TextBlock Text=":" Grid.Row="2" Grid.Column="1" Margin="4" HorizontalAlignment="Right" FontWeight="Bold" FontSize="12" />
                                            <TextBlock x:Name="txtPatienName"  Text="{Binding PatientName,Mode=TwoWay}"  Grid.Row="2" Grid.Column="2" Margin="4" HorizontalAlignment="Left" FontWeight="Bold" FontSize="11" />

                                            <TextBlock Text="   Age" Grid.Row="2" Grid.Column="3" Width="70" Margin="4" HorizontalAlignment="left" FontWeight="Bold" FontSize="12"/>
                                            <TextBlock Text=":" Grid.Row="2" Grid.Column="4" Margin="4" HorizontalAlignment="Right" FontWeight="Bold" FontSize="12" />
                                            <TextBlock Text="{Binding Age,Mode=TwoWay}" Grid.Row="2" Grid.Column="5" Margin="4" HorizontalAlignment="Left" FontWeight="Bold" FontSize="11"/>

                                            <TextBlock Text="Sex" Grid.Row="3" Width="100" Grid.Column="0" Margin="4" HorizontalAlignment="left" FontWeight="Bold" FontSize="12"/>
                                            <TextBlock Text=":" Grid.Row="3" Grid.Column="1" Margin="4" HorizontalAlignment="Right" FontWeight="Bold" FontSize="12" />
                                            <TextBlock  Text="{Binding Gender,Mode=TwoWay}" Grid.Row="3" Grid.Column="2" Margin="4" HorizontalAlignment="Left" FontWeight="Bold" FontSize="11"/>

                                            <TextBlock Text="Consent Name" Grid.Row="4" Width="100" Grid.Column="0" Margin="4" HorizontalAlignment="left" FontWeight="Bold" FontSize="12"/>
                                            <TextBlock Text=":" Grid.Row="4" Grid.Column="1" Margin="4" HorizontalAlignment="Right" FontWeight="Bold" FontSize="12" />
                                            <TextBlock  Text="{Binding Description,Mode=TwoWay}" Grid.Row="4" Grid.Column="2" Margin="4" HorizontalAlignment="Left" FontWeight="Bold" FontSize="11"/>

                                            <c1:C1RichTextBox x:Name="richTemplate" Html="{Binding Consent}" Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="6" BorderThickness="0" Margin="4"></c1:C1RichTextBox>


                                            <TextBlock Visibility="Collapsed" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="10">
                                            <Run Text="Footer - " />
                                            <Run Text="Page " />
                                            <Run Text="{Binding Index}" />
                                            </TextBlock>
                                        </Grid>
                                    </Grid>
                                </DataTemplate>
                            </c1:C1RichTextBox.PrintTemplate>
                        </c1:C1RichTextBox>
                    </Grid>
                </c1:C1TabItem>

                <c1:C1TabItem Header="Html" Name="htmlTab" c1:C1NagScreen.Nag="True" Visibility="Collapsed">
                    <c1:C1RichTextBox x:Name="htmlBox" BorderThickness="0" c1:C1NagScreen.Nag="True" />
                </c1:C1TabItem>

                <c1:C1TabItem Header="Rtf" Name="rtfTab" c1:C1NagScreen.Nag="True" Visibility="Collapsed">
                    <c1:C1RichTextBox x:Name="rtfBox" BorderThickness="0" c1:C1NagScreen.Nag="True" />
                </c1:C1TabItem>
            </c1:C1TabControl>


        </controlsToolkit:DockPanel>

        <StackPanel Grid.Row="2" HorizontalAlignment="Right" Orientation="Horizontal">
            <ToggleButton x:Name="cmdPrint" Content="{Binding btnPrint,Source={StaticResource locResource}}" Click="cmdPrint_Click" Width="Auto"  Margin="4"   Style="{StaticResource ToggleButtonStyle}" />
            <ToggleButton x:Name="cmdClose" Content="{Binding btnClose,Source={StaticResource locResource}}" Click="cmdClose_Click" Width="Auto"  Margin="4"   Style="{StaticResource ToggleButtonStyle}" />
        </StackPanel>

    </Grid>
   
</controls:ChildWindow>