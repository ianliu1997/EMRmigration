<controls:ChildWindow x:Class="PalashDynamics.OperationTheatre.PatientSearch"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"
    xmlns:my="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Toolkit"
    xmlns:data="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"
    xmlns:local="clr-namespace:PalashDynamics.Converters;assembly=PalashDynamics.Converters" 
xmlns:Localization="clr-namespace:PalashDynamic.Localization;assembly=PalashDynamic.Localization"
    Width="850" Height="550" Title="Patient Search">
    <controls:ChildWindow.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/PalashDynamics;component/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <local:DateTimeConverter x:Key="DateConverter" />
            <Localization:Localized x:Key="locResource"></Localization:Localized>
        </ResourceDictionary>
    </controls:ChildWindow.Resources>

    <Grid x:Name="Root" Background="White">

        <my:DockPanel LastChildFill="True" Margin="4">
            <Grid Height="Auto" Width="Auto" my:DockPanel.Dock="Bottom">
                <StackPanel Grid.Row="3" x:Name="Footer" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,3,5,3" HorizontalAlignment="Right" Background="Transparent">
                    <StackPanel x:Name="SavePAnel" Orientation="Horizontal"  Margin="0,0,0,0">

                        <ToggleButton  x:Name="cmdOK"  Grid.Row="4" Content="OK" MinWidth="50"  Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch"  Style="{StaticResource ToggleButtonStyle}" Click="cmdOK_Click" TabIndex="8"/>
                        <ToggleButton x:Name="CmdClose"  Grid.Row="4" Content="Cancel" MinWidth="50" Background="#000000" Margin="5,0,0,0" HorizontalAlignment="Stretch" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" Click="CmdClose_Click" TabIndex="9" />
                    </StackPanel>
                </StackPanel>
            </Grid>

            <!--<Grid Width="Auto"  Margin="0" my:DockPanel.Dock="Top" DataContext="{Binding BizActionObject}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition />
                    <ColumnDefinition  Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <TextBlock VerticalAlignment="Center" Grid.Column="0" Grid.Row="0"  Margin="4" Text="{Binding lblPatientName, Source={StaticResource locResource}}" HorizontalAlignment="Right"></TextBlock>
                <TextBox TabIndex="0" x:Name="txtPatientName" Text="{Binding FirstName,Mode=TwoWay}"  Grid.Row="0"  Grid.Column="1" Margin="4" KeyUp="txtPatientName_KeyUp" LostFocus="txtPatientName_LostFocus"  MaxLength="50" />

                <TextBlock Grid.Column="2" Grid.Row="0"  Margin="4" Text="{Binding lblFamilyName, Source={StaticResource locResource}}" VerticalAlignment="Center" HorizontalAlignment="Right"></TextBlock>
                <TextBox TabIndex="3" x:Name="txtFamilyName" Text="{Binding FamilyName,Mode=TwoWay}"  Grid.Row="0"  Grid.Column="3" Margin="4" KeyUp="txtPatientName_KeyUp" LostFocus="txtFamilyName_LostFocus" MaxLength="50" />

                <TextBlock x:Name="chkMrno"  VerticalAlignment="Center" Grid.Column="0" Grid.Row="1"  Margin="4" Text="{Binding lblMRNo, Source={StaticResource locResource}}" HorizontalAlignment="Right"></TextBlock>
                <TextBox TabIndex="4" x:Name="txtMrno" Text="{Binding MRNo,Mode=TwoWay}"  Grid.Row="1" Grid.Column="1" Margin="4" KeyUp="txtPatientName_KeyUp" MaxLength="10"/>

                <TextBlock Grid.Column="2" Grid.Row="1" Text="{Binding lblContactNo, Source={StaticResource locResource}}"  Margin="4" HorizontalAlignment="Right" VerticalAlignment="Center"></TextBlock>
                <TextBox Grid.Column="3" TabIndex="5" Grid.Row="1" x:Name="txtContactNo" Margin="4" Text="{Binding ContactNo, Mode=TwoWay}" KeyUp="txtPatientName_KeyUp" MaxLength="50"></TextBox>

                <StackPanel Grid.Row="1" Grid.Column="5" HorizontalAlignment="Right" VerticalAlignment="Bottom" x:Name="SaveCommandPanel" Orientation="Horizontal"  Margin="2">
                    <ToggleButton TabIndex="6" x:Name="SearchButton" Content="{Binding btnSearch, Source={StaticResource locResource}}" Width="auto" MinHeight="25" Background="#000000" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" Click="PatientSearchButton_Click" HorizontalAlignment="Right" />
                </StackPanel>
            </Grid >-->

            <Grid Width="Auto"  Margin="0" my:DockPanel.Dock="Top" DataContext="{Binding BizActionObject}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition />
                    <ColumnDefinition  Width="Auto"/>
                    <ColumnDefinition />
                    <ColumnDefinition  Width="Auto"/>
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock x:Name="chkMrno"  VerticalAlignment="Center" Grid.Column="0" Grid.Row="0"  Margin="4" Text="{Binding lblMRNo, Source={StaticResource locResource}}" HorizontalAlignment="Right"></TextBlock>
                <TextBox TabIndex="0" x:Name="txtMrno" Text="{Binding MRNo,Mode=TwoWay}"  Grid.Row="0" Grid.Column="1" Margin="4" KeyUp="txtPatientName_KeyUp" MaxLength="10"/>

                <TextBlock VerticalAlignment="Center" Grid.Column="2" Grid.Row="0"  Margin="4" Text="{Binding lblFirstName, Source={StaticResource locResource}}" HorizontalAlignment="Right"></TextBlock>
                <TextBox TabIndex="1" x:Name="txtPatientName" Text="{Binding FirstName,Mode=TwoWay}"  Grid.Row="0"  Grid.Column="3" Margin="4" KeyUp="txtPatientName_KeyUp" LostFocus="txtPatientName_LostFocus"  MaxLength="50" />

                <TextBlock VerticalAlignment="Center" Grid.Column="4" Grid.Row="0"  Margin="4" Text="{Binding lblLastName, Source={StaticResource locResource}}" HorizontalAlignment="Right"></TextBlock>
                <TextBox TabIndex="1" x:Name="txtLastName" Text="{Binding FirstName,Mode=TwoWay}"  Grid.Row="0"  Grid.Column="5" Margin="4" KeyUp="txtPatientName_KeyUp" LostFocus="txtPatientName_LostFocus"  MaxLength="50" />

                <TextBlock Grid.Column="6" Grid.Row="0"  Margin="4" Text="{Binding lblFamilyName, Source={StaticResource locResource}}" VerticalAlignment="Center" HorizontalAlignment="Right"></TextBlock>
                <TextBox TabIndex="2" x:Name="txtFamilyName" Text="{Binding FamilyName,Mode=TwoWay}"  Grid.Row="0"  Grid.Column="7" Margin="4" KeyUp="txtPatientName_KeyUp" LostFocus="txtFamilyName_LostFocus" MaxLength="50" />

                <Grid Grid.Row="1" Grid.Column="6" Grid.ColumnSpan="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition  Width="Auto"></ColumnDefinition>
                        <ColumnDefinition  Width="Auto"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <RadioButton x:Name="rbOPD" TabIndex="7" Grid.Column="1" Content="OPD" Margin="4"  GroupName="g" IsChecked="True" Checked="rbOPD_Checked"></RadioButton>
                    <RadioButton x:Name="rbIPD" TabIndex="6" Grid.Column="0" Content="IPD" Margin="4" GroupName="g" Checked="rbIPD_Checked"></RadioButton>
                    <RadioButton x:Name="rbAll" TabIndex="8" Grid.Column="2" Content="All" Margin="4" GroupName="g" Checked="rbAll_Checked"></RadioButton >
                </Grid>


                <TextBlock Grid.Column="0" Grid.Row="1" Text="{Binding lblContactNo, Source={StaticResource locResource}}"  Margin="4" HorizontalAlignment="Right" VerticalAlignment="Center"></TextBlock>
                <TextBox Grid.Column="1" TabIndex="3" Grid.Row="1" x:Name="txtContactNo" Margin="4" Text="{Binding ContactNo, Mode=TwoWay}" KeyUp="txtPatientName_KeyUp" MaxLength="50"></TextBox>

                <TextBlock VerticalAlignment="Center" Grid.Column="2" Grid.Row="1"  Margin="4" Text="OPD No." HorizontalAlignment="Right"></TextBlock>
                <TextBox TabIndex="4" x:Name="txtOPDNo" Text="{Binding OPDNo,Mode=TwoWay}"  Grid.Row="1"   Grid.Column="3"   Margin="4" MaxLength="30" />

                <TextBlock VerticalAlignment="Center" Grid.Column="4" Grid.Row="1"  Margin="4" Text="IPD No." HorizontalAlignment="Right"></TextBlock>
                <TextBox TabIndex="9" x:Name="txtIPDNo" Grid.Row="1"   Grid.Column="5"   Margin="4" MaxLength="30" />

                <CheckBox TabIndex="21" VerticalAlignment="Center" IsChecked="{Binding Path=RegistrationWise,Mode=TwoWay}" Grid.Column="1" Grid.Row="2"  Margin="4" Content="Registration Date :"  HorizontalAlignment="Right" x:Name="chkRegistration" Checked="chkRegistration_Checked" Unchecked="chkRegistration_Unchecked" />

                <TextBlock  HorizontalAlignment="Right" VerticalAlignment="Center" Text="From" Grid.Row="2" Grid.Column="2"  Margin="4" />
                <controls:DatePicker   x:Name="dtpRegistrationFromDate" Margin="4" Grid.Row="2" Grid.Column="3"  HorizontalAlignment="Stretch" SelectedDateChanged="dtpRegistrationFromDate_SelectedDateChanged" TabIndex="22"/>

                <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center" Text="To" Grid.Row="2" Grid.Column="4"  Margin="4" />
                <controls:DatePicker   x:Name="dtpRegistrationToDate" Margin="4" Grid.Row="2" Grid.Column="5"  HorizontalAlignment="Stretch" TabIndex="23" SelectedDateChanged="dtpRegistrationToDate_SelectedDateChanged"/>

                <CheckBox TabIndex="21" VerticalAlignment="Center" IsChecked="True" Grid.Column="6" Grid.Row="2" Grid.ColumnSpan="2" Margin="4" Content="Current Admitted" Click="chkCurrentAdmitted_Click" HorizontalAlignment="Left" x:Name="chkCurrentAdmitted"/>
                <!--IsChecked="{Binding Path=IsCurrentAdmitted,Mode=TwoWay}"-->
                <CheckBox TabIndex="24" VerticalAlignment="Center" IsChecked="{Binding Path=VisitWise,Mode=TwoWay}" Grid.Column="1" Grid.Row="3"   Margin="4" Content="Visit Date :"  HorizontalAlignment="Right" x:Name="chkVisit" Checked="chkVisit_Checked" Unchecked="chkVisit_Unchecked" />

                <TextBlock  HorizontalAlignment="Right" VerticalAlignment="Center" Text="From" Grid.Row="3" Grid.Column="2"  Margin="4" />
                <controls:DatePicker   x:Name="dtpVisitFromDate" Margin="4" Grid.Row="3" Grid.Column="3"  HorizontalAlignment="Stretch"  TabIndex="25" SelectedDateChanged="dtpVisitFromDate_SelectedDateChanged"/>

                <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center" Text="To" Grid.Row="3" Grid.Column="4"  Margin="4" />
                <controls:DatePicker   x:Name="dtpVisitToDate" Margin="4" Grid.Row="3" Grid.Column="5"  HorizontalAlignment="Stretch" TabIndex="26" SelectedDateChanged="dtpVisitToDate_SelectedDateChanged"/>

                <CheckBox TabIndex="27" VerticalAlignment="Center" Grid.Column="1" Grid.Row="4"  Margin="4" Content="Admission Date :"  HorizontalAlignment="Right" x:Name="chkAdmission" Unchecked="chkAdmission_Unchecked" Checked="chkAdmission_Checked" />

                <TextBlock  HorizontalAlignment="Right" VerticalAlignment="Center" Text="From" Grid.Row="4" Grid.Column="2"  Margin="4" />
                <controls:DatePicker   x:Name="dtpAdmissionFromDate" Margin="4" Grid.Row="4" Grid.Column="3"  HorizontalAlignment="Stretch"  TabIndex="28" SelectedDateChanged="dtpAdmissionFromDate_SelectedDateChanged"/>

                <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center" Text="To" Grid.Row="4" Grid.Column="4"  Margin="4" />
                <controls:DatePicker   x:Name="dtpAdmissionToDate" Margin="4" Grid.Row="4" Grid.Column="5"  HorizontalAlignment="Stretch" TabIndex="29" SelectedDateChanged="dtpAdmissionToDate_SelectedDateChanged"/>

                <StackPanel Grid.Row="4" Grid.Column="6" Grid.ColumnSpan="2" HorizontalAlignment="left" VerticalAlignment="Bottom" x:Name="SaveCommandPanel" Orientation="Horizontal"  Margin="2">
                    <ToggleButton TabIndex="6" Grid.ColumnSpan="2" x:Name="SearchButton" Content="{Binding btnSearch, Source={StaticResource locResource}}" Width="auto" MinHeight="25" Background="#000000" Style="{StaticResource ToggleButtonStyle}" Visibility="Visible" Click="PatientSearchButton_Click" HorizontalAlignment="Left" />
                </StackPanel>
            </Grid >

            <Grid Height="Auto" Width="Auto" my:DockPanel.Dock="Bottom">
                <my:DockPanel LastChildFill="True">
                    <data:DataPager TabIndex="20" x:Name="DataPager" my:DockPanel.Dock="Bottom"
                        Grid.Row="1"
                        PageSize="{Binding PageSize}"
                        DisplayMode="FirstLastPreviousNext"
                        IsEnabled="True"
                        IsTotalItemCountFixed="True"
                        Source="{Binding DataList}"  />
                    <data:DataGrid Height="Auto" Width="Auto" Grid.Row="0" ItemsSource="{Binding DataList}"  x:Name="dgPatientList"  AutoGenerateColumns="False" SelectionChanged="dgPatientList_SelectionChanged">
                        <data:DataGrid.Columns>
                            <data:DataGridTextColumn IsReadOnly="True" Localization:DataGridColumnHelper.HeaderBinding="{Binding lblMRNo, Source={StaticResource locResource}}" Binding="{Binding MRNo}" />
                            <data:DataGridTextColumn IsReadOnly="True" Localization:DataGridColumnHelper.HeaderBinding="{Binding lblPatientName, Source={StaticResource locResource}}" Binding="{Binding PatientName}" Width="150" />
                            <data:DataGridTextColumn IsReadOnly="True" Localization:DataGridColumnHelper.HeaderBinding="{Binding lblDOB, Source={StaticResource locResource}}" Width="100"  Binding="{Binding DateOfBirth,Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}"/>
                            <data:DataGridTextColumn IsReadOnly="True" Localization:DataGridColumnHelper.HeaderBinding="{Binding lblRegistrationDate, Source={StaticResource locResource}}" Binding="{Binding RegistrationDate,Converter={StaticResource DateConverter},ConverterParameter={StaticResource GridDateDisplayFormat}}"/>
                            <data:DataGridTextColumn IsReadOnly="True" Localization:DataGridColumnHelper.HeaderBinding="{Binding lblMobileNo, Source={StaticResource locResource}}" Width="100" Binding="{Binding ContactNO1}"/>
                            <data:DataGridTextColumn IsReadOnly="True" Localization:DataGridColumnHelper.HeaderBinding="{Binding lblGender, Source={StaticResource locResource}}" Width="100" Binding="{Binding Gender}"/>
                            <data:DataGridTextColumn IsReadOnly="True" Localization:DataGridColumnHelper.HeaderBinding="{Binding lblMaritalStatus, Source={StaticResource locResource}}" Width="100" Binding="{Binding MaritalStatus}"/>
                        </data:DataGrid.Columns>
                    </data:DataGrid>
                </my:DockPanel>
            </Grid>
        </my:DockPanel>
    </Grid>
</controls:ChildWindow>