<UserControl x:Class="PalashDynamics.Administration.frmDischargeTemplate"
           xmlns:controlsToolkit="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Toolkit" 
           xmlns:data="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"            
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
           xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
           xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"
           xmlns:dataInput="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data.Input"
           xmlns:input="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Input"
           xmlns:CustomCombo="clr-namespace:PalashDynamics.Controls;assembly=PalashDynamics.Controls.AutoCompleteComboBox"           
           xmlns:Converter="clr-namespace:PalashDynamics.Converters;assembly=PalashDynamics.Converters" 
           xmlns:c1="http://schemas.componentone.com/winfx/2006/xaml"
           
           Height="Auto" Width="Auto">
    <!--xmlns:c1="http://schemas.componentone.com/winfx/2006/xaml"-->
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/PalashDynamics;component/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <Converter:DateTimeConverter x:Key="DateConverter"></Converter:DateTimeConverter>
            <Converter:ToggleBooleanValueConverter x:Key="NegateValueConverter"/>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot" Background="White">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="1" BorderBrush="{StaticResource TabControlDarkerBorder}" Margin="4" BorderThickness="1" CornerRadius="3,3,3,3" Background="Transparent" >
            <StackPanel x:Name="Footer" Orientation="Horizontal" VerticalAlignment="Center"   Margin="0,3,5,3" HorizontalAlignment="Right" Background="Transparent">
                <StackPanel Orientation="Horizontal"  Margin="1" HorizontalAlignment="Right"  >
                    <ToggleButton  Margin="4" Content="New" Style="{StaticResource ToggleButtonStyle}" x:Name="cmdNew" Click="cmdNew_Click"></ToggleButton>
                    <ToggleButton x:Name="cmdSave" Content="Save" Margin="4" Style="{StaticResource ToggleButtonStyle}" VerticalAlignment="Center" Click="cmdSave_Click" />
                    <ToggleButton x:Name="cmdModify" Content="Modify" Margin="4" Style="{StaticResource ToggleButtonStyle}" VerticalAlignment="Center" Click="cmdModify_Click" />
                    <ToggleButton  Margin="4" Content="Cancel" Style="{StaticResource ToggleButtonStyle}" x:Name="cmdCancel" Click="cmdCancel_Click"></ToggleButton>
                </StackPanel>
            </StackPanel>
        </Border>

        <Grid Grid.Row="0">
            <Grid x:Name="grdDischargeDetails" Background="White">
                <Border BorderBrush="{StaticResource TabControlDarkerBorder}"  Margin="2" BorderThickness="1" CornerRadius="0,0,3,3" Background="Transparent">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <TextBlock Text="Code" Grid.Row="0" Grid.Column="0" Margin="4" VerticalAlignment="Center"/>
                        <TextBox x:Name="txtCode" Grid.Row="0" Grid.Column="1" Margin="4" VerticalAlignment="Center" KeyDown="txtCode_KeyDown" MaxLength="50"  />

                        <TextBlock Text="Name" Grid.Row="1" Grid.Column="0" Margin="4" VerticalAlignment="Center"/>
                        <TextBox x:Name="txtName" Grid.Row="1" Grid.Column="1" Margin="4" VerticalAlignment="Center" KeyDown="txtName_KeyDown" MaxLength="50" />
                        <TextBlock Text="Template" Grid.Row="3" Grid.Column="0" Margin="4" VerticalAlignment="Top"/>
                        <!--<CheckBox x:Name="chkIsTextTemplate" Grid.Row="2" Grid.Column="1" Content="{Binding lblIsTextTemplate}" VerticalAlignment="Center" Visibility="Collapsed" HorizontalAlignment="Center" Margin="4" IsChecked="True" Click="chkIsTextTemplate_Click"></CheckBox>-->

                        <Grid x:Name="grdFieldName" Grid.Row="3" Grid.ColumnSpan="4" Grid.Column="0" Visibility="Collapsed">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="200"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>

                            <Border BorderBrush="{StaticResource TabControlDarkerBorder}" Grid.Row="0" Grid.ColumnSpan="4" Margin="2" BorderThickness="1" CornerRadius="0,0,3,3" Background="Transparent">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <sdk:DataGrid Grid.Row="0" x:Name="dgDischargeDetails" VerticalAlignment="Stretch" ItemsSource="{Binding}" AutoGenerateColumns="False" >
                                        <sdk:DataGrid.Columns>
                                            <sdk:DataGridTextColumn IsReadOnly="True" Header="FieldName" Binding="{Binding FieldName}" MinWidth="200"/>
                                            <sdk:DataGridTextColumn IsReadOnly="True" Header="Parameter" Binding="{Binding ParameterName}" MinWidth="200"/>
                                            <sdk:DataGridTextColumn IsReadOnly="True" Header="Font" Binding="{Binding ApplicableFont}" MinWidth="200"/>
                                            <sdk:DataGridTextColumn IsReadOnly="True" Header="ControlBinding" Binding="{Binding BindingControlName}" MinWidth="200"/>
                                            <sdk:DataGridTemplateColumn>
                                                <sdk:DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <HyperlinkButton VerticalAlignment="Center" ToolTipService.ToolTip= "{Binding totipDelete}" FontFamily="Webdings" Content="r" Padding="5,0,5,0" IsTabStop="False" x:Name="hlbDeleteField" Click="hlbDeleteField_Click"></HyperlinkButton>
                                                    </DataTemplate>
                                                </sdk:DataGridTemplateColumn.CellTemplate>
                                            </sdk:DataGridTemplateColumn>
                                        </sdk:DataGrid.Columns>
                                    </sdk:DataGrid>
                                </Grid>
                            </Border>

                            <TextBlock Text="Field Name" Grid.Row="1" Grid.Column="0" Margin="4" VerticalAlignment="Center" />
                            <TextBox x:Name="txtFieldName" Grid.Row="1" Grid.Column="1" Margin="4" VerticalAlignment="Center" LostFocus="txtFieldName_LostFocus" KeyDown="txtCode_KeyDown" MaxLength="53"/>

                            <TextBlock Text="Binding Control" Grid.Row="1" Grid.Column="2" Margin="4" VerticalAlignment="Center" />
                            <CustomCombo:AutoCompleteComboBox x:Name="cmbBindingControl" Grid.Row="1" Grid.Column="3" Margin="4" VerticalAlignment="Center" HorizontalAlignment="Left"  SelectedValuePath="ID" SelectionChanged="cmbBindingControl_SelectionChanged" Width="150"></CustomCombo:AutoCompleteComboBox>

                            <TextBlock Text="Parameter" Grid.Row="2" Grid.Column="0" Margin="4" VerticalAlignment="Center"/>
                            <CustomCombo:AutoCompleteComboBox x:Name="cmbParameter" Grid.Row="2" Grid.Column="1" Margin="4" VerticalAlignment="Center" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID"></CustomCombo:AutoCompleteComboBox>

                            <TextBlock Text="Font" Grid.Row="3" Grid.Column="0" Margin="4" VerticalAlignment="Center"/>
                            <CustomCombo:AutoCompleteComboBox x:Name="cmbFont" Grid.Row="3" Grid.Column="1" Margin="4" VerticalAlignment="Center" SelectedItemBinding="{Binding MasterListItem, Mode=OneWay}" SelectedValuePath="ID"></CustomCombo:AutoCompleteComboBox>

                            <StackPanel Orientation="Horizontal" Grid.Row="4" Grid.Column="2" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <ToggleButton x:Name="cmdAdd" Content="Add" Margin="4" Style="{StaticResource ToggleButtonStyle}" VerticalAlignment="Center" Click="cmdAdd_Click" />
                            </StackPanel>
                        </Grid>

                        <Grid x:Name="grdRichTextBox" Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="3" Visibility="Visible" >
                            <c1:C1TabControl TabStripPlacement="Bottom" Padding="0 0 0 2" c1:C1NagScreen.Nag="True">
                                <c1:C1TabItem Header="" Name="richTextBoxTab" c1:C1NagScreen.Nag="True">
                                    <Grid>
                                        <Grid.Resources>
                                            <DataTemplate x:Name="printTemplate">
                                                <Grid Height="{Binding ViewManager.PresenterInfo.Height}" Width="{Binding ViewManager.PresenterInfo.Width}">
                                                    <c1:C1RichTextPresenter Source="{Binding}" Margin="{Binding ViewManager.PresenterInfo.Padding}" c1:C1NagScreen.Nag="True" />
                                                </Grid>
                                            </DataTemplate>
                                        </Grid.Resources>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <c1:C1RichTextBoxToolbar x:Name="richToolbar" RichTextBox="{Binding ElementName=richTextBox}" Margin="-1,-1,-1,0" c1:C1NagScreen.Nag="True" />
                                        <c1:C1RichTextBox x:Name="richTextBox" Grid.Row="1" BorderThickness="0" c1:C1NagScreen.Nag="True" />
                                    </Grid>
                                </c1:C1TabItem>
                            </c1:C1TabControl>
                        </Grid>
                    </Grid>
                </Border>
            </Grid>

            <Grid x:Name="grdDischargeList" Background="White">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition />
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <TextBlock Text="Name" Margin="4" Grid.Column="0" Grid.Row="0"/>
                <TextBox x:Name="txtNameDisCharge" Margin="4" Grid.Column="1" TabIndex="1"  Grid.Row="0" MaxLength="50" KeyDown="txtNameDisCharge_KeyDown"/>

                <Button Grid.Column="2" Grid.Row="0" x:Name="cmdSearch" Margin="0" ToolTipService.ToolTip="{Binding totipSearch}" HorizontalAlignment="Left" Click="cmdSearch_Click">
                    <Image Source="/PalashDynamics;component/Icons/Search_b.JPG" Margin="4" Width="20" ></Image>
                </Button>

                <Border Grid.Row="1" Grid.ColumnSpan="4" BorderBrush="{StaticResource TabControlDarkerBorder}" Margin="4" BorderThickness="1" CornerRadius="3,3,3,3" Background="Transparent" >
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <sdk:DataGrid Grid.Row="0" x:Name="dgDischargeTemplateDetailsList" VerticalAlignment="Stretch" ItemsSource="{Binding}" AutoGenerateColumns="False" >
                            <sdk:DataGrid.Columns>
                                <sdk:DataGridTemplateColumn Header="View">
                                    <sdk:DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <HyperlinkButton Margin="4" x:Name="cmdViewDischarge" Content="View" Cursor="Hand" Click="cmdViewDischarge_Click"></HyperlinkButton>
                                        </DataTemplate>
                                    </sdk:DataGridTemplateColumn.CellTemplate>
                                </sdk:DataGridTemplateColumn>
                                <sdk:DataGridTextColumn IsReadOnly="True" Header="Code" Binding="{Binding Code}" Width="100" />
                                <sdk:DataGridTextColumn IsReadOnly="True"  Header="Name" Binding="{Binding Description}" Width="200"/>
                                <sdk:DataGridTemplateColumn Header="Status" IsReadOnly="True">
                                    <sdk:DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <CheckBox x:Name="chkStatus" HorizontalAlignment="Center" Tag="{Binding ID}" Checked="CheckBox_Checked" Unchecked="CheckBox_Checked" Margin="4" IsChecked="{Binding Path=Status}"></CheckBox>
                                        </DataTemplate>
                                    </sdk:DataGridTemplateColumn.CellTemplate>
                                </sdk:DataGridTemplateColumn>
                            </sdk:DataGrid.Columns>
                        </sdk:DataGrid>

                        <sdk:DataPager Grid.Row="1"  x:Name="dataGridPager" controlsToolkit:DockPanel.Dock="Bottom" 
                                                        DisplayMode="FirstLastPreviousNext"  IsEnabled="True"                       
                                                        Source="{Binding}" 
                                                        AutoEllipsis="False" IsTotalItemCountFixed="False" PageSize="15" />
                    </Grid>
                </Border>
            </Grid>

        </Grid>
    </Grid>
</UserControl>
