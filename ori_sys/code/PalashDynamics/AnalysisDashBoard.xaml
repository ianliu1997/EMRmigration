<controls:ChildWindow x:Class="PalashDynamics.Forms.AnalysisDashBoard"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:Converter="clr-namespace:PalashDynamics.Converters;assembly=PalashDynamics.Converters"
        xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"
        xmlns:ChartToolkit="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit"
        xmlns:visualizationToolkit="clr-namespace:System.Windows.Controls.DataVisualization;assembly=System.Windows.Controls.DataVisualization.Toolkit"
        xmlns:blacklight="clr-namespace:Blacklight.Silverlight.Controls;assembly=Blacklight.Silverlight.Controls"
        Width="1000" Height="600"  Loaded="ChildWindow_Loaded"
        Title="Graphical Analysis">
    
    <controls:ChildWindow.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/PalashDynamics;component/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <Converter:DateTimeConverter x:Key="DateConverter"></Converter:DateTimeConverter>
            <Converter:DateTimeToAgePart x:Key="DateTimeToAgePart"></Converter:DateTimeToAgePart>
            <Converter:ToggleBooleanValueConverter x:Key="NegateValueConverter"/>
            <Converter:VisiblilityConverter x:Key="VisiblilityConverter"/>
            <Converter:PieColorConverter x:Key="PieColorConverter"></Converter:PieColorConverter>
        </ResourceDictionary>

        </controls:ChildWindow.Resources>
            <Grid x:Name="LayoutRoot" Margin="2" Background="White">

       
        <blacklight:DragDockPanelHost x:Name="DragPanelContainer" >
            <!--Total Collection :-->
            <blacklight:DragDockPanel x:Name="PatientQueue" Visibility="Visible" Margin="5" Style="{StaticResource DragDockPanelStyle}" Maximized="PatientQueue_Maximized" Minimized="DragDockPanel_Minimized" Grid.Row="0" UseLayoutRounding="False" >
                <Grid  HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Column="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition/>
                        
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontSize="12" Foreground="Black" Margin="5, 2, 0, 0" IsHitTestVisible="False">Total Collection :</TextBlock>
                        <TextBlock FontSize="12" x:Name="lblGraphSummary" Text="{Binding TotalCollection, Mode=TwoWay}" Foreground="Black" Margin="5, 2, 0, 0" IsHitTestVisible="False"></TextBlock>
                    </StackPanel>
                    <ChartToolkit:Chart Grid.Row="1" x:Name="PieChart" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="2">
                        <ChartToolkit:Chart.Series>
                            <ChartToolkit:PieSeries x:Name="chartCollection" ItemsSource="{Binding DailyCollection}" IndependentValueBinding="{Binding Paymode}" DependentValueBinding="{Binding Collection}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                <ChartToolkit:PieSeries.Palette>
                                    <!--<visualizationToolkit:ResourceDictionaryCollection>
                                        <ResourceDictionary>
                                            <Style x:Key="DataPointStyle" TargetType="Control" >
                                                <Setter Property="Background" Value="{Binding Path=Paymode, Converter={StaticResource PieColorConverter}}" />
                                            </Style>
                                        </ResourceDictionary>
                                    </visualizationToolkit:ResourceDictionaryCollection>-->
                                </ChartToolkit:PieSeries.Palette>
                            </ChartToolkit:PieSeries>
                        </ChartToolkit:Chart.Series>
                    </ChartToolkit:Chart>
                </Grid>
            </blacklight:DragDockPanel>
            <!--Sales Details :-->
            <blacklight:DragDockPanel x:Name="PatientQueue1" Visibility="Visible" Margin="5" Style="{StaticResource DragDockPanelStyle}" Maximized="PatientQueue_Maximized" Minimized="DragDockPanel_Minimized" Grid.Column="1" UseLayoutRounding="False" >
                <Grid  HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Column="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontSize="12" Foreground="Black" Margin="5, 2, 0, 0" IsHitTestVisible="False">Sales Details :</TextBlock>
                        <TextBlock FontSize="12" x:Name="lblSalesSummary" Foreground="Black" Margin="5, 2, 0, 0" IsHitTestVisible="False"></TextBlock>
                    </StackPanel>

                    <ChartToolkit:Chart Grid.Row="1" x:Name="DailySales" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="2">
                        <ChartToolkit:Chart.Series>
                            <ChartToolkit:PieSeries x:Name="DailySalesCollection" ItemsSource="{Binding DailySaleslst}"  IndependentValueBinding="{Binding Specialization}" DependentValueBinding="{Binding TotalAmount}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                            </ChartToolkit:PieSeries>
                        </ChartToolkit:Chart.Series>
                    </ChartToolkit:Chart>
                </Grid>
            </blacklight:DragDockPanel>
   
            <!--visit Rate :-->
            <blacklight:DragDockPanel x:Name="PatientQueue2" Visibility="Visible" Margin="5" Style="{StaticResource DragDockPanelStyle}" Maximized="PatientQueue_Maximized" Minimized="DragDockPanel_Minimized" Grid.Column="2" UseLayoutRounding="False" >
                <Grid  HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Column="2" Margin="4">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    
                    <StackPanel Orientation="Horizontal"  Grid.Row="0">
                        <TextBlock FontSize="12" Foreground="Black" Margin="4" IsHitTestVisible="False">Visit Details :</TextBlock>
                        <TextBlock FontSize="12" x:Name="lblVisitSummary"  Foreground="Black" Margin="4" IsHitTestVisible="False"></TextBlock>
                    </StackPanel>
                   
                            <ChartToolkit:Chart  x:Name="VisitSummary" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="2,20,2,2" >
                            <ChartToolkit:Chart.Series>
                            <ChartToolkit:PieSeries x:Name="VisitList" ItemsSource="{Binding VisitList_new}" IndependentValueBinding="{Binding VisitType}" DependentValueBinding="{Binding VisitID}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                </ChartToolkit:PieSeries>
                            </ChartToolkit:Chart.Series>
                        </ChartToolkit:Chart>     
                    </Grid>   
      
            </blacklight:DragDockPanel>
            
            <!--Appointment :-->
            <blacklight:DragDockPanel x:Name="PatientQueue3" Visibility="Visible" Margin="5" Style="{StaticResource DragDockPanelStyle}" Maximized="PatientQueue_Maximized" Minimized="DragDockPanel_Minimized" Grid.Column="3" UseLayoutRounding="False" >
                <Grid  HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Column="3">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontSize="12" Foreground="Black" Margin="5, 2, 0, 0" IsHitTestVisible="False">Appointment :</TextBlock>
                        <TextBlock FontSize="12" x:Name="lblReviewSummary" Text="{Binding AppointmentID, Mode=TwoWay}" Foreground="Black" Margin="5, 2, 0, 0" IsHitTestVisible="False"></TextBlock>
                    </StackPanel>

                    <ChartToolkit:Chart Grid.Row="1" x:Name="PatientReview" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="2">
                        <ChartToolkit:Chart.Series>
                            <ChartToolkit:PieSeries x:Name="PatientAppointment" ItemsSource="{Binding Appointment}" IndependentValueBinding="{Binding AppointmentReason}" DependentValueBinding="{Binding AppointmentID}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                            </ChartToolkit:PieSeries>
                        </ChartToolkit:Chart.Series>
                    </ChartToolkit:Chart>
                </Grid>
            </blacklight:DragDockPanel>
        
        </blacklight:DragDockPanelHost>
    </Grid>
</controls:ChildWindow>